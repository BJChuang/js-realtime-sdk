{"version":3,"sources":["/Users/leeyeh/work/LeanCloud/js-realtime-sdk/src/tool/index.js","/Users/leeyeh/work/LeanCloud/js-realtime-sdk/node_modules/leancloud-xmlhttprequest/lib/XMLHttpRequest.browser.js","/Users/leeyeh/work/LeanCloud/js-realtime-sdk/src/tool/ajax.js","/Users/leeyeh/work/LeanCloud/js-realtime-sdk/src/tool/eventCenter.js","/Users/leeyeh/work/LeanCloud/js-realtime-sdk/src/realtime.js"],"names":["tool","tool.now","tool.isJSONString","tool.encodeHTML","noop","isJSONString","obj","test","now","Date","getTime","encodeHTML","source","str","replace","babelHelpers_typeof","key","exports","XMLHttpRequest","window","XDomainRequest","XMLHttpRequest_browser","ajax","options","callback","url","method","xhr","open","status","JSON","parse","responseText","onerror","data","onprogress","timeout","body","stringify","send","cleanNull","list","i","l","length","tempList","push","eventList","eventOnceList","_on","eventName","fun","Error","isOnce","isSingle","split","once","single","itemEventList","m","n","toString","flag","_off","on","this","_one","emit","call","off","extend","Object","assign","config","WebSocket","global","MozWebSocket","require","engine","reuse","join","message","error","addOrRemove","cid","argument","cmd","members","serialId","getSerialId","cache","convAdd","convRemove","ec","_fun","id","attr","remove","add","peerId","leave","argument1","argument2","me","arguments","type","setMediaMsg","receipt","log","_didIteratorError","_step","_iterator","logs","Symbol","iterator","_iteratorNormalCompletion","next","done","_iteratorError","convLog","eNameIndex","where","results","convQuery","count","convCount","update","convUpdate","newRealtimeObject","closeFlag","reuseTimer","undefined","reuseFlag","clientId","getServer","connect","clearTimeout","setTimeout","close","openFlag","closeSession","ws","convObject","convId","conv","newConvObject","query","objectId","name","transient","startConv","create","room","apply","peerIdList","onlineSessionPeerIds","querySession","realtime","appId","auth","secure","region","realtimeObj","version","_engine","newConfig","bindEvent","openSession","guard","wsClose","event","wsMessage","msg","op","wsError","wsSend","createSocket","server","addEventListener","wsOpen","heartbeats","timer","timeLength","protocol","node","expires","ttl","ua","authFun","authResult","signature","nonce","t","timestamp","s","unique","r","$all","roomIds","convIds","$in","sort","skip","sessionPeerIds","mid","limit","getMediaMsg","hasOwnProperty","text","_lctext","_lcfile","metaData","_lctype","location","_lcloc","_lcattrs","format","height","width","size","duration","longitude","latitude","initBy","invited","left","kicked","membersjoined","convAck"],"mappings":"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","file":"bundle.browser.min.js","sourcesContent":["export function noop() {}\n\n// 检查是否是 JSON 格式的字符串\nexport function isJSONString(obj) {\n  return /^\\{.*\\}$/.test(obj);\n}\n\n// 获取当前时间的时间戳\nexport function now() {\n  return new Date().getTime();\n}\n\n// HTML 转义\nexport function encodeHTML(source) {\n  var encodeHTML = function(str) {\n    if (typeof(str) === 'string') {\n      return str.replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;');\n      // 考虑到其中有可能是 JSON，所以不做 HTML 强过滤，仅对标签过滤\n      // .replace(/\\\\/g,'&#92;')\n      // .replace(/\"/g,'&quot;')\n      // .replace(/'/g,'&#39;');\n    } else {\n      // 数字\n      return str;\n    }\n  };\n\n  // 对象类型\n  if (typeof(source) === 'object') {\n    for (var key in source) {\n      source[key] = tool.encodeHTML(source[key]);\n    }\n    return source;\n  } else {\n    // 非对象类型\n    return encodeHTML(source);\n  }\n}\n","\"use strict\";\n\nexports.XMLHttpRequest = window.XMLHttpRequest || window.XDomainRequest;\n\n","import { XMLHttpRequest } from 'leancloud-xmlhttprequest';\nexport const  ajax = (options, callback) => {\n  if (typeof options === 'string') {\n    options = {\n      url: options\n    };\n  }\n  var url = options.url;\n  var method = options.method || 'get';\n  var xhr = new XMLHttpRequest();\n\n  xhr.open(method, url);\n\n  xhr.onload = function(data) {\n    if ((xhr.status >= 200 && xhr.status < 300)) {\n      callback(null, JSON.parse(xhr.responseText));\n    } else {\n      callback(JSON.parse(xhr.responseText));\n    }\n  };\n\n  xhr.onerror = function(data) {\n    callback(data || {});\n    throw new Error('Network error.');\n  };\n\n  // IE9 中需要设置所有的 xhr 事件回调，不然可能会无法执行后续操作\n  xhr.onprogress = function() {};\n  xhr.ontimeout = function() {};\n  xhr.timeout = 0;\n\n  var body = JSON.stringify(options.data);\n\n  xhr.send(body);\n\n};\n","export const eventCenter = () => {\n  var eventList = {};\n  var eventOnceList = {};\n\n  var _on = function(eventName, fun, options) {\n    if (!eventName) {\n      throw new Error('No event name.');\n    } else if (!fun) {\n      throw new Error('No callback function.');\n    }\n    var list = eventName.split(/\\s+/);\n    var tempList;\n    var isOnce;\n    var isSingle;\n    if (options) {\n      isOnce = options.once;\n      isSingle = options.single;\n    }\n\n    if (!isOnce) {\n      tempList = eventList;\n    } else {\n      tempList = eventOnceList;\n    }\n    for (var i = 0, l = list.length; i < l; i++) {\n      if (list[i]) {\n        var itemEventList = tempList[list[i]];\n\n        if (!itemEventList) {\n          itemEventList = [];\n\n          // 将新指针指向原链表\n          tempList[list[i]] = itemEventList;\n        }\n\n        if (isSingle) {\n\n          // 标记是否存在重复的方法，如果有则为 true\n          var flag = false;\n          for (var m = 0, n = itemEventList.length; m < n; m++) {\n            if ((itemEventList[m]).toString() === (fun).toString()) {\n              flag = true;\n              break;\n            }\n          }\n\n          if (!flag) {\n            itemEventList.push(fun);\n          }\n        } else {\n          itemEventList.push(fun);\n        }\n\n      }\n    }\n  };\n\n  var _off = function(eventName, fun, options) {\n    var tempList;\n    var isOnce;\n    if (options) {\n      isOnce = options.once;\n    }\n    if (!isOnce) {\n      tempList = eventList;\n    } else {\n      tempList = eventOnceList;\n    }\n    if (tempList[eventName]) {\n      var i = 0;\n      var l = tempList[eventName].length;\n      for (; i < l; i++) {\n        if (tempList[eventName][i] === fun) {\n          tempList[eventName][i] = null;\n          // 每次只清除一个相同事件绑定\n          break;\n        }\n      }\n    }\n  };\n\n  function cleanNull(list) {\n    var tempList = [];\n    var i = 0;\n    var l = list.length;\n    if (l) {\n      for (; i < l; i++) {\n        if (list[i]) {\n          tempList.push(list[i]);\n        }\n      }\n      return tempList;\n    } else {\n      return null;\n    }\n  }\n\n  return {\n    on: function(eventName, fun) {\n      _on(eventName, fun);\n      return this;\n    },\n\n    // 方法绑定以后只会运行一次\n    once: function(eventName, fun) {\n      _on(eventName, fun, {\n        once: true\n      });\n      return this;\n    },\n\n    // 同一个方法只会被绑定一次\n    _one: function(eventName, fun) {\n      _on(eventName, fun, {\n        single: true\n      });\n    },\n    emit: function(eventName, data) {\n      if (!eventName) {\n        throw new Error('No emit event name.');\n      }\n      var i = 0;\n      var l = 0;\n      if (eventList[eventName]) {\n        i = 0;\n        l = eventList[eventName].length;\n        for (; i < l; i++) {\n          if (eventList[eventName][i]) {\n            eventList[eventName][i].call(this, data);\n          }\n        }\n        eventList[eventName] = cleanNull(eventList[eventName]);\n      }\n      if (eventOnceList[eventName]) {\n        i = 0;\n        l = eventOnceList[eventName].length;\n        for (; i < l; i++) {\n          if (eventOnceList[eventName][i]) {\n            eventOnceList[eventName][i].call(this, data);\n            _off(eventName, eventOnceList[eventName][i], {\n              once: true\n            });\n          }\n        }\n        eventOnceList[eventName] = cleanNull(eventOnceList[eventName]);\n      }\n      return this;\n    },\n    off: function(eventName, fun) {\n      _off(eventName, fun);\n      return this;\n    }\n  };\n}\n","/**\n * @author wangxiao liye\n * @see http://github.com/leancloud/js-realtime-sdk/\n *\n * 每位工程师都有保持代码优雅的义务\n * Each engineer has a duty to keep the code elegant\n */\n\nimport { version } from '../package.json';\nimport { ajax } from './tool/ajax';\nimport { eventCenter } from './tool/eventCenter';\nimport * as tool from './tool/index';\n\nvar extend = Object.assign;\n\n// 配置项\nvar config = {\n  // 心跳时间（一分钟）\n  heartbeatsTime: 60 * 1000,\n  WebSocket: global.WebSocket || global.MozWebSocket || require('ws')\n};\n\n// 命名空间，挂载私有方法\nvar engine = {};\n\n// realtime 对象内，会被派发的全部事件名\nvar eNameIndex = {\n  // session 连接建立完毕\n  open: 'open',\n  // 断开重连\n  reuse: 'reuse',\n  // websocket 连接关闭\n  close: 'close',\n  // 新建一个 conversation 时派发\n  create: 'create',\n  // conversation 新增加成员\n  // deprecated\n  join: 'join',\n  // conversation 成员离开\n  // deprecated\n  left: 'left',\n  // 当前用户被加入会话\n  invited: 'invited',\n  // 当前用户被踢出会话\n  kicked: 'kicked',\n  // 用户加入会话\n  membersjoined: 'membersjoined',\n  // 用户离开会话\n  membersleft: 'membersleft',\n  // conversation 内发送的数据\n  message: 'message',\n  // conversation 消息回执\n  receipt: 'receipt',\n  // conversation 更新\n  update: 'update',\n  // 各种错误\n  error: 'error'\n};\n\n// 生成 conversation 对象，挂载所有 conversation 相关方法，每次调用实例化\nvar newConvObject = function(cache) {\n\n  var addOrRemove = function(cid, argument, callback, cmd) {\n    var members = [];\n    var options;\n    var fun;\n    var eventName;\n\n    // 传入 userId\n    if (typeof argument === 'string') {\n      members.push(argument);\n    } else {\n      // 传入多个 userId\n      members = argument;\n    }\n    options = {\n      cid: cid,\n      members: members,\n      serialId: engine.getSerialId(cache)\n    };\n    switch (cmd) {\n      case 'add':\n        eventName = 'conv-added';\n        engine.convAdd(cache, options);\n        break;\n      case 'remove':\n        eventName = 'conv-removed';\n        engine.convRemove(cache, options);\n        break;\n    }\n    fun = function(data) {\n      if (data.i === options.serialId) {\n        if (callback) {\n          callback(data);\n        }\n        cache.ec.off(eventName, fun);\n      }\n    };\n    cache.ec.on(eventName, fun);\n    return this;\n  };\n\n  return {\n    // cid 即 conversation id\n    id: '',\n    // 创建 Conversation 时的默认属性\n    attr: {},\n    add: function(argument, callback) {\n      addOrRemove(this.id, argument, callback, 'add');\n      return this;\n    },\n    remove: function(argument, callback) {\n      addOrRemove(this.id, argument, callback, 'remove');\n      return this;\n    },\n    // 自己加入\n    join: function(callback) {\n      this.add(cache.options.peerId, callback);\n      return this;\n    },\n    // 自己离开\n    leave: function(callback) {\n      this.remove(cache.options.peerId, callback);\n      return this;\n    },\n    send: function(data, argument1, argument2) {\n      var callback;\n      var options = {};\n      var me = this;\n      switch (arguments.length) {\n        // 只有两个参数时，第二个是回调函数\n        case 2:\n          callback = argument1;\n          break;\n          // 三个参数时，第二个参数是配置项，第三个参数是回调\n        case 3:\n          options = argument1;\n          callback = argument2;\n          break;\n      }\n      options.cid = me.id;\n      options.serialId = engine.getSerialId(cache);\n\n      // 如果 type 存在，则发送多媒体格式\n      if (options.type) {\n        options.data = engine.setMediaMsg(cache, options.type, data);\n      } else {\n        if (typeof data === 'string') {\n          options.data = data;\n        } else {\n          // 协议中只接收 string 类型\n          options.data = JSON.stringify(data);\n        }\n      }\n\n      // 是否需要消息回执\n      if (options.receipt) {\n        options.receipt = 1;\n      }\n\n      // 如果是暂态消息，则不需回调，服务器也不会返回回调\n      if (!options.transient) {\n        var fun = function(data) {\n          if (data.i === options.serialId) {\n            if (callback) {\n              callback(data);\n            }\n            cache.ec.off('ack', fun);\n          }\n        };\n        cache.ec.on('ack', fun);\n      }\n      engine.send(cache, options, callback);\n      return this;\n    },\n    log: function(argument, callback) {\n      var options = {};\n      switch (arguments.length) {\n        // 如果只有一个参数，那么是 callback\n        case 1:\n          callback = argument;\n          break;\n        case 2:\n          options = argument;\n          break;\n      }\n      options.cid = options.cid || this.id;\n      options.serialId = options.serialId || engine.getSerialId(cache);\n      var fun = function(data) {\n        if (data.i === options.serialId) {\n          if (callback) {\n            // 对查出的类型进行过滤，兼容多端通信\n            for (var log of data.logs) {\n              log.data = engine.getMediaMsg(cache, log.data);\n              // 增加字段，兼容接收消息的字段\n              log.fromPeerId = log.from;\n              log.msg = log.data;\n            }\n            callback(data.logs);\n          }\n          cache.ec.off('logs', fun);\n        }\n      };\n      cache.ec.on('logs', fun);\n\n      // 注：立刻获取消息历史有可能取不到\n      engine.convLog(cache, options);\n      return this;\n    },\n    receive: function(callback) {\n      var id = this.id;\n      cache.ec.on(eNameIndex.message, function(data) {\n        // 是否是当前 room 的信息\n        if (id === data.cid) {\n          callback(data);\n        }\n      });\n      return this;\n    },\n    // 获取信息回执\n    receipt: function(callback) {\n      var id = this.id;\n      cache.ec.on(eNameIndex.receipt, function(data) {\n        // 是否是当前 room 的信息\n        if (id === data.cid) {\n          callback(data);\n        }\n      });\n      return this;\n    },\n    list: function(callback) {\n      var options = {};\n      var id = this.id;\n      options.where = {\n        objectId: id\n      };\n      options.serialId = engine.getSerialId(cache);\n      var fun = function(data) {\n        if (data.i === options.serialId) {\n          if (callback) {\n            if (data.results.length) {\n              // 因为是查询固定的 cid，所以结果只有一个。\n              callback(data.results[0].m);\n            } else {\n              callback([]);\n            }\n          }\n          cache.ec.off('conv-results', fun);\n        }\n      };\n      cache.ec.on('conv-results', fun);\n      engine.convQuery(cache, options);\n      return this;\n    },\n    count: function(callback) {\n      var id = this.id;\n      var options = {\n        cid: id,\n        serialId: engine.getSerialId(cache)\n      };\n      var fun = function(data) {\n        if (data.i === options.serialId) {\n          if (callback) {\n            callback(data.count);\n          }\n          cache.ec.off('conv-result', fun);\n        }\n      };\n      cache.ec.on('conv-result', fun);\n      engine.convCount(cache, options);\n      return this;\n    },\n    update: function(data, callback) {\n      var id = this.id;\n      var options = {\n        cid: id,\n        data: data,\n        serialId: engine.getSerialId(cache)\n      };\n      var fun = function(data) {\n        if (data.i === options.serialId) {\n          if (callback) {\n            callback(data);\n          }\n          cache.ec.off('conv-updated', fun);\n        }\n      };\n      cache.ec.on('conv-updated', fun);\n      engine.convUpdate(cache, options);\n      return this;\n    }\n  };\n};\n\n// 创建一个新的 realtime 对象，挂载所有 realtime 中的方法，每次调用实例化一个实例，支持单页多实例。\nvar newRealtimeObject = function() {\n\n  // 缓存一些已经实例化的变量\n  var cache = {\n    // 基础配置，包括 appId，peerId 等\n    options: undefined,\n    // WebSocket 实例\n    ws: undefined,\n    // 事件中心\n    ec: undefined,\n    // 所有已生成的 conversation 对象\n    conv: {},\n    // 是否已经 open 完毕，主要在 close 方法中检测\n    openFlag: false,\n    // 是否是用户关闭，如果不是将会断开重连\n    closeFlag: false,\n    // reuse 事件的重试 timer\n    reuseTimer: undefined,\n    // resuse 状态，如果为 true 表示内部已经在重试中\n    reuseFlag: false,\n    // 当前的 serialId\n    serialId: 2015\n  };\n\n  return {\n    clientId: '',\n    cache: cache,\n    open: function(callback) {\n      var me = this;\n      var cache = this.cache;\n      cache.closeFlag = false;\n      engine.getServer(cache, cache.options, function(data) {\n        if (data) {\n          engine.connect(cache, {\n            server: cache.server\n          });\n        }\n      });\n      if (callback) {\n        cache.ec.once(eNameIndex.open, callback);\n      }\n      // 断开重连\n      cache.ec.once(eNameIndex.reuse, function() {\n        if (cache.reuseTimer) {\n          clearTimeout(cache.reuseTimer);\n        }\n        cache.reuseTimer = setTimeout(function() {\n          me.open();\n        }, 5000);\n      });\n      return this;\n    },\n    // 表示关闭当前的 session 连接和 WebSocket 连接，并且回收内存\n    close: function() {\n      var cache = this.cache;\n      if (!cache.openFlag) {\n        throw new Error('Must call after open() has successed.');\n      }\n      cache.closeFlag = true;\n      engine.closeSession(cache);\n      cache.ws.close();\n      return this;\n    },\n    on: function(eventName, callback) {\n      this.cache.ec.on(eventName, callback);\n      return this;\n    },\n    once: function(eventName, callback) {\n      this.cache.ec.once(eventName, callback);\n      return this;\n    },\n    emit: function(eventName, data) {\n      this.cache.ec.emit(eventName, data);\n      return this;\n    },\n    off: function(eventName, callback) {\n      this.cache.ec.off(eventName, callback);\n      return this;\n    },\n    room: function(argument, callback) {\n      var cache = this.cache;\n      if (!cache.openFlag) {\n        throw new Error('Must call after open() has successed.');\n      }\n\n      var convObject;\n\n      // 传入 convId\n      if (typeof argument === 'string') {\n        var convId = argument;\n\n        // 优先使用 cache 中的 conv\n        if (cache.conv[convId]) {\n          convObject = cache.conv[convId];\n        } else {\n          convObject = newConvObject(cache);\n        }\n\n        // 去服务器端判断下当前 room id 是否存在\n        this.query({\n          where: {\n            objectId: convId\n          }\n        }, function(data) {\n\n          // 如果服务器端有这个 id\n          if (data.length) {\n            convObject.id = convId;\n            convObject.name = data[0].name;\n            // 获取初始化时的属性\n            convObject.attr = data[0].attr;\n            // 将 conv 写入 cache\n            cache.conv[convId] = convObject;\n          }\n\n          if (callback) {\n            // 如果服务器端存在就直接返回 roomObject\n            if (data.length) {\n              callback(convObject);\n            } else {\n              // 如果服务器端不存在这个 room id\n              callback(null);\n            }\n          }\n        });\n      } else {\n        // 传入 options\n        // 如果没有传入参数，则给一个错误提示\n        if (!argument) {\n          throw new Error('Createing room must have a callback function.');\n        }\n\n        var options;\n\n        // 只传入 callback\n        if (typeof argument === 'function') {\n          callback = argument;\n        } else {\n          // 传入参数\n          options = argument;\n        }\n\n        options = {\n          // Room 的名字\n          name: options.name || '',\n          // 人员的 id list\n          members: options.members || [],\n          // 默认的数据，可以放 Conversation 名字等\n          attr: options.attr || {},\n          transient: options.transient || false,\n          unique: options.unique || false,\n          serialId: engine.getSerialId(cache)\n        };\n\n        convObject = newConvObject(cache);\n\n        engine.startConv(cache, options, callback);\n\n        // 服务器端确认收到对话创建，并创建成功\n        var fun = function(data) {\n          if (data.i === options.serialId) {\n            convObject.id = data.cid;\n            convObject.name = options.name;\n            convObject.attr = options.attr;\n            // 将 conv 写入 cache\n            cache.conv[convObject.id] = convObject;\n            if (callback) {\n              callback(convObject);\n            }\n            cache.ec.emit(eNameIndex.create, data);\n            cache.ec.off('conv-started', fun);\n          }\n        };\n        cache.ec.on('conv-started', fun);\n      }\n      return convObject;\n    },\n    // conv 就是 room 的别名\n    conv: function() {\n      return this.room.apply(this, arguments);\n    },\n    // 相关查询，包括用户列表查询，房间查询等\n    query: function(argument, callback) {\n      var cache = this.cache;\n      if (!cache.openFlag) {\n        throw new Error('Must call after open() has successed.');\n      }\n      var options = {};\n      switch (arguments.length) {\n        // 如果只有一个参数，那么是 callback\n        case 1:\n          callback = argument;\n          break;\n        case 2:\n          options = argument;\n          break;\n      }\n      options.serialId = engine.getSerialId(cache);\n      var fun = function(data) {\n        if (data.i === options.serialId) {\n          if (callback) {\n            callback(data.results);\n          }\n          cache.ec.off('conv-results', fun);\n        }\n      };\n      cache.ec.on('conv-results', fun);\n      if (!options.where) {\n        options.where = {};\n        // 默认查找的当前用户所在的 conv\n        options.where.m = cache.options.peerId;\n      }\n      engine.convQuery(cache, options);\n      return this;\n    },\n    // 判断用户是否在线\n    ping: function(argument, callback) {\n      var cache = this.cache;\n      if (!cache.openFlag) {\n        throw new Error('Must call after open() has successed.');\n      }\n      if (!callback) {\n        throw new Error('Ping must have callback.');\n      }\n      var peerIdList = [];\n      // 传入一个 id\n      if (typeof(argument) === 'string') {\n        peerIdList.push(argument);\n      } else {\n        // 传入的是数组\n        peerIdList = argument;\n      }\n      var options = {\n        serialId: engine.getSerialId(cache),\n        peerIdList: peerIdList\n      };\n      var fun = function(data) {\n        if (data.i === options.serialId) {\n          callback(data.onlineSessionPeerIds);\n          cache.ec.off('session-query-result', fun);\n        }\n      };\n      cache.ec.on('session-query-result', fun);\n      engine.querySession(cache, options);\n      return this;\n    }\n  };\n};\n\n// 主函数，启动通信并获得 realtimeObject\nvar realtime = function(options, callback) {\n  if (typeof options !== 'object') {\n    throw new Error('realtime need a argument at least.');\n  } else if (!options.appId) {\n    throw new Error('Options must have appId.');\n  } else if (!config.WebSocket) {\n    console.error('Browser must support WebSocket, please read LeanCloud doc and use plugin.');\n  } else {\n\n    // 通过判断插件库中的对象是否存在来检测是否需要关掉安全链接，在需要兼容 flash 的时候需要关掉，默认开启。\n    var secure = config.WebSocket.loadFlashPolicyFile ? false : true;\n\n    options = {\n      // LeanCloud 中唯一的服务 id\n      appId: options.appId,\n      // clientId 对应的就是 peerId，如果不传入服务器会自动生成，客户端没有持久化该数据。\n      peerId: options.clientId,\n      // 是否开启 HTML 转义，防止 XSS 攻击，默认关闭\n      encodeHTML: options.encodeHTML || false,\n      // 是否开启服务器端认证，传入认证函数\n      auth: options.auth,\n      // 是否关闭 WebSocket 的安全链接，即由 wss 协议转为 ws 协议，关闭 SSL 保护。默认开启。\n      secure: typeof(options.secure) === 'undefined' ? secure : options.secure,\n      // 服务器地区选项，默认为中国大陆\n      region: options.region || 'cn'\n    };\n\n    var realtimeObj = newRealtimeObject();\n    realtimeObj.clientId = options.peerId;\n    realtimeObj.cache.options = options;\n    realtimeObj.cache.ec = eventCenter();\n    realtimeObj.cache.authFun = options.auth;\n    realtimeObj.open(callback);\n\n    return realtimeObj;\n  }\n};\n\n// 赋值版本号\nrealtime.version = version;\n\n// 挂载私有方法\nrealtime._tool = tool;\nrealtime._engine = engine;\n\nrealtime.config = function(newConfig) {\n  extend(config, newConfig);\n};\n\n// WebSocket Open\nengine.wsOpen = function(cache) {\n  engine.bindEvent(cache);\n  engine.openSession(cache, {\n    serialId: engine.getSerialId(cache)\n  });\n  // 启动心跳\n  engine.heartbeats(cache);\n  // 启动守护进程\n  engine.guard(cache);\n};\n\n// WebSocket Close\nengine.wsClose = function(cache, event) {\n  // 派发全局 close 事件，表示 realtime 已经关闭\n  cache.ec.emit(eNameIndex.close, event);\n};\n\n// WebSocket Message\nengine.wsMessage = function(cache, msg) {\n  var data = JSON.parse(msg.data);\n\n  // 对服务端返回的数据进行逻辑包装\n  if (data.cmd) {\n    var eventName = data.cmd;\n    if (data.op) {\n      eventName += '-' + data.op;\n    }\n    cache.ec.emit(eventName, data);\n  }\n};\n\nengine.wsError = function(cache, data) {\n  cache.ec.emit(eNameIndex.error, data);\n  throw (data);\n};\n\n// WebSocket send message\nengine.wsSend = function(cache, data) {\n  if (!cache.closeFlag) {\n    if (!cache.ws) {\n      throw new Error('The realtimeObject must opened first. Please listen to the \"open\" event.');\n    } else {\n      data.peerId = cache.options.peerId;\n      cache.ws.send(JSON.stringify(data));\n    }\n  }\n};\n\nengine.createSocket = function(cache, server) {\n  if (cache.ws) {\n    cache.ws.close();\n  }\n  var ws = new config.WebSocket(server);\n  cache.ws = ws;\n  ws.addEventListener('open', function() {\n    engine.wsOpen(cache);\n  });\n  ws.addEventListener('close', function(event) {\n    engine.wsClose(cache, event);\n  });\n  ws.addEventListener('message', function(msg) {\n    engine.wsMessage(cache, msg);\n  });\n  ws.addEventListener('error', function(data) {\n    engine.wsError(cache, data);\n  });\n};\n\n// 心跳程序\nengine.heartbeats = function(cache) {\n\n  // 当前 RealtimeObject 已经启动心跳程序\n  if (cache.openFlag) {\n    return;\n  }\n\n  var timer;\n  cache.ws.addEventListener('message', function() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(function() {\n      cache.ws.send('{}');\n    }, config.heartbeatsTime);\n  });\n};\n\n// 守护进程，会派发 reuse 重连事件\nengine.guard = function(cache) {\n\n  // 当前 RealtimeObject 已经启动守护进程\n  if (cache.openFlag) {\n    return;\n  }\n\n  // 超时是三分钟\n  var timeLength = 3 * 60 * 1000;\n  var timer;\n\n  // 结合心跳事件，如果长时间没有收到服务器的心跳，也要触发重连机制\n  cache.ws.addEventListener('message', function() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(function() {\n      if (!cache.closeFlag && !cache.reuseFlag) {\n        cache.reuseFlag = true;\n        // 超时则派发重试事件\n        cache.ec.emit(eNameIndex.reuse);\n      }\n    }, timeLength);\n  });\n\n  // 监测断开事件\n  cache.ec.on(eNameIndex.close + ' ' + 'session-closed', function() {\n    if (!cache.closeFlag && !cache.reuseFlag) {\n      cache.reuseFlag = true;\n      cache.ec.emit(eNameIndex.reuse);\n    }\n  });\n};\n\nengine.connect = function(cache, options) {\n  var server = options.server;\n  // 判断获取出缓存的时间是否是比较新的\n  if (server && tool.now() <= server.expires) {\n    engine.createSocket(cache, server.server);\n  } else {\n    cache.ec.emit(eNameIndex.error);\n    throw new Error('WebSocket connet failed.');\n  }\n};\n\nengine.getServer = function(cache, options, callback) {\n  var appId = options.appId;\n  // 是否获取 wss 的安全链接\n  var secure = options.secure;\n  var url = '';\n  var protocol = '//';\n  if (secure) {\n    protocol = 'https://';\n  }\n  var node = '';\n  switch (options.region) {\n    case 'cn':\n      node = 'g0';\n      break;\n    case 'us':\n      node = 'a0';\n      break;\n    default:\n      throw new Error('There is no this region.');\n  }\n  url = protocol + 'router-' + node + '-push.leancloud.cn/v1/route';\n  url += '?_t=' + tool.now() + '&appId=' + appId;\n  if (secure) {\n    url += '&secure=1';\n  }\n  ajax(url, function(error, data) {\n    if (data) {\n      data.expires = tool.now() + data.ttl * 1000;\n      cache.server = data;\n      callback(data);\n    } else {\n      cache.ec.emit(eNameIndex.error);\n    }\n  });\n};\n\n// 打开 session\nengine.openSession = function(cache, options) {\n  var cmd = {\n    cmd: 'session',\n    op: 'open',\n    appId: cache.options.appId,\n    ua: 'js/' + version,\n    i: options.serialId\n  };\n  if (cache.authFun) {\n    cache.authFun({\n      clientId: cache.options.peerId\n    }, function(authResult) {\n      if (authResult && authResult.signature) {\n        cmd.n = authResult.nonce;\n        cmd.t = authResult.timestamp;\n        cmd.s = authResult.signature;\n        engine.wsSend(cache, cmd);\n      } else {\n        throw new Error('Session open denied by application: ' + authResult);\n      }\n    });\n  } else {\n    engine.wsSend(cache, cmd);\n  }\n};\n\nengine.closeSession = function(cache) {\n  engine.wsSend(cache, cache, {\n    cmd: 'session',\n    op: 'close'\n  });\n};\n\nengine.startConv = function(cache, options) {\n  var cmd = {\n    cmd: 'conv',\n    op: 'start',\n    // m [] 初始的对话用户id列表，服务器默认会把自己加入\n    m: options.members,\n    // attr json对象，对话的任意初始属性\n    attr: {\n      name: options.name || '',\n      attr: options.attr || {}\n    },\n    i: options.serialId,\n    unique: options.unique || false,\n    // 是否是开放聊天室，无人数限制\n    transient: options.transient || false\n  };\n  if (cache.authFun) {\n    cache.authFun({\n      clientId: cache.options.peerId,\n      members: options.members\n    }, function(authResult) {\n      if (authResult && authResult.signature) {\n        cmd.n = authResult.nonce;\n        cmd.t = authResult.timestamp;\n        cmd.s = authResult.signature;\n        engine.wsSend(cache, cmd);\n      } else {\n        throw new Error('Conversation creation denied by application: ' + authResult);\n      }\n    });\n  } else {\n    engine.wsSend(cache, cmd);\n  }\n};\n\nengine.convAdd = function(cache, options) {\n  var cmd = {\n    cmd: 'conv',\n    op: 'add',\n    cid: options.cid,\n    m: options.members,\n    i: options.serialId\n  };\n  if (cache.authFun) {\n    cache.authFun({\n      clientId: cache.options.peerId,\n      members: options.members,\n      convId: options.cid,\n      action: 'invite'\n    }, function(authResult) {\n      if (authResult && authResult.signature) {\n        cmd.n = authResult.nonce;\n        cmd.t = authResult.timestamp;\n        cmd.s = authResult.signature;\n        engine.wsSend(cache, cmd);\n      } else {\n        throw new Error('Adding members to conversation denied by application: ' + authResult);\n      }\n    });\n  } else {\n    engine.wsSend(cache, cmd);\n  }\n};\n\nengine.convRemove = function(cache, options) {\n  var cmd = {\n    cmd: 'conv',\n    op: 'remove',\n    cid: options.cid,\n    m: options.members,\n    i: options.serialId\n  };\n  if (cache.authFun && (options.members.length > 1 || options.members[0] != cache.options.peerId)) {\n    cache.authFun({\n      clientId: cache.options.peerId,\n      members: options.members,\n      convId: options.cid,\n      action: 'kick'\n    }, function(authResult) {\n      if (authResult && authResult.signature) {\n        cmd.n = authResult.nonce;\n        cmd.t = authResult.timestamp;\n        cmd.s = authResult.signature;\n        engine.wsSend(cache, cmd);\n      } else {\n        throw new Error('Removing members from conversation denied by application: ' + authResult);\n      }\n    });\n  } else {\n    engine.wsSend(cache, cmd);\n  }\n};\n\nengine.send = function(cache, options) {\n  engine.wsSend(cache, {\n    cmd: 'direct',\n    cid: options.cid,\n    msg: options.data,\n    i: options.serialId,\n    // r 是否需要回执需要则1，否则不传\n    r: options.receipt || false,\n    // transient 是否暂态消息（暂态消息不返回 ack，不保留离线消息，不触发离 线推送），否则不传\n    transient: options.transient || false\n  });\n};\n\nengine.convQuery = function(cache, options) {\n  options = options || {};\n  var where = options.where || {};\n\n  // 同时查找含有数组中 id 的用户所在的 conversation\n  if (where.m && typeof where.m !== 'string') {\n    where.m = {\n      $all: where.m\n    };\n  }\n\n  // 批量查找 room 信息\n  if (where.roomIds || where.convIds) {\n    where.objectId = {\n      $in: where.roomIds || where.convIds\n    };\n    // 避免对查询项产生干扰\n    delete where.roomIds;\n    delete where.convIds;\n  }\n\n  engine.wsSend(cache, {\n    cmd: 'conv',\n    op: 'query',\n    // where 可选，对象，默认为包含自己的查询 {\"m\": peerId}\n    where: where,\n    // sort 可选，字符串，默认为 -lm，最近对话反序\n    sort: options.sort || '-lm',\n    // limit 可选，数字，默认10\n    limit: options.limit || 10,\n    // skip 可选，数字，默认0\n    skip: options.skip || 0,\n    // i serial-id\n    i: options.serialId\n  });\n};\n\n// 查询 session 在线情况\nengine.querySession = function(cache, options) {\n  engine.wsSend(cache, {\n    cmd: 'session',\n    op: 'query',\n    i: options.serialId,\n    sessionPeerIds: options.peerIdList\n  });\n};\n\n// 查询 conversation 的聊天记录\nengine.convLog = function(cache, options) {\n  engine.wsSend(cache, {\n    cmd: 'logs',\n    cid: options.cid,\n    // t 时间戳，从 t 开始向前查询\n    t: options.t || undefined,\n    // mid 消息 id，从消息 id 开始向前查询（和 t 共同使用，为防止某毫秒时刻有重复消息）\n    mid: options.mid || undefined,\n    limit: options.limit || 20,\n    // i serial-id\n    i: options.serialId\n  });\n};\n\nengine.convUpdate = function(cache, options) {\n  engine.wsSend(cache, {\n    cmd: 'conv',\n    op: 'update',\n    cid: options.cid,\n    // attr 要修改的内容\n    attr: options.data,\n    i: options.serialId\n  });\n};\n\nengine.convAck = function(cache, options) {\n  engine.wsSend(cache, {\n    cmd: 'ack',\n    cid: options.cid,\n    mid: options.mid\n  });\n};\n\nengine.convCount = function(cache, options) {\n  engine.wsSend(cache, {\n    cmd: 'conv',\n    op: 'count',\n    i: options.serialId,\n    cid: options.cid\n  });\n};\n\n// 取出多媒体类型的格式（内置 HTML 转义逻辑）\nengine.getMediaMsg = function(cache, msg) {\n\n  // 检查是否是 JSON 格式的一个 String 类型\n  if (!tool.isJSONString(msg)) {\n\n    // 是否对消息中的 HTML 进行转义\n    if (cache.options.encodeHTML) {\n      msg = tool.encodeHTML(msg);\n    }\n    return msg;\n  }\n\n  msg = JSON.parse(msg);\n\n  // 检查是否是多媒体类型\n  if (!msg.hasOwnProperty('_lctype')) {\n    return msg;\n  }\n\n  var obj = {\n    text: msg._lctext,\n    attr: msg._lcattrs\n  };\n\n  // 是否对消息中的 HTML 进行转义，对媒体格式仅对 text 转义\n  if (cache.options.encodeHTML) {\n    obj.text = tool.encodeHTML(msg._lctext);\n  }\n\n  if (msg._lcfile && msg._lcfile.url) {\n    obj.url = msg._lcfile.url;\n  }\n  if (msg._lcfile && msg._lcfile.metaData) {\n    obj.metaData = msg._lcfile.metaData;\n  }\n\n  // 多媒体类型\n  switch (msg._lctype) {\n    case -1:\n      obj.type = 'text';\n      break;\n    case -2:\n      obj.type = 'image';\n      break;\n    case -3:\n      obj.type = 'audio';\n      break;\n    case -4:\n      obj.type = 'video';\n      break;\n    case -5:\n      obj.type = 'location';\n      if (msg._lcloc) {\n        obj.location = msg._lcloc;\n      }\n      break;\n    case -6:\n      obj.type = 'file';\n      break;\n    // 自定义类型，返回全部自定义数据\n    default:\n      obj = msg;\n      break;\n  }\n  return obj;\n};\n\n// 生成多媒体特定格式的数据\nengine.setMediaMsg = function(cache, type, data) {\n  var obj;\n  if (type !== 'text' && !data.metaData) {\n    throw new Error('Media Data must have metaData attribute.');\n  }\n  switch (type) {\n    case 'text':\n      obj = {\n        _lctype: -1,\n        _lctext: data.text,\n        // _lcattrs 是用来存储用户自定义的一些键值对\n        _lcattrs: data.attr\n      };\n      break;\n    case 'image':\n      obj = {\n        _lctype: -2,\n        _lctext: data.text,\n        // _lcattrs 是用来存储用户自定义的一些键值对\n        _lcattrs: data.attr,\n        _lcfile: {\n          url: data.url,\n          objId: data.objectId,\n          metaData: {\n            name: data.metaData.name,\n            // 格式\n            format: data.metaData.format,\n            //单位：像素\n            height: data.metaData.height,\n            //单位：像素\n            width: data.metaData.width,\n            //单位：b\n            size: data.metaData.size\n          }\n        }\n      };\n      break;\n    case 'audio':\n      obj = {\n        _lctype: -3,\n        _lctext: data.text,\n        // _lcattrs 是用来存储用户自定义的一些键值对\n        _lcattrs: data.attr,\n        _lcfile: {\n          url: data.url,\n          objId: data.objectId,\n          metaData: {\n            name: data.metaData.name,\n            // 媒体格式\n            format: data.metaData.format,\n            //单位：秒\n            duration: data.metaData.duration,\n            //单位：b\n            size: data.metaData.size\n          }\n        }\n      };\n      break;\n    case 'video':\n      obj = {\n        _lctype: -4,\n        _lctext: data.text,\n        // _lcattrs 是用来存储用户自定义的一些键值对\n        _lcattrs: data.attr,\n        _lcfile: {\n          url: data.url,\n          objId: data.objectId,\n          metaData: {\n            name: data.metaData.name,\n            // 媒体格式\n            format: data.metaData.format,\n            // 单位：秒\n            duration: data.metaData.duration,\n            //单位：b\n            size: data.metaData.size\n          }\n        }\n      };\n      break;\n    case 'location':\n      obj = {\n        _lctype: -5,\n        _lctext: data.text,\n        // _lcattrs 是用来存储用户自定义的一些键值对\n        _lcattrs: data.attr,\n        _lcloc: {\n          // 经度\n          longitude: data.metaData.longitude,\n          // 维度\n          latitude: data.metaData.latitude\n        }\n      };\n      break;\n    case 'file':\n      obj = {\n        _lctype: -6,\n        _lctext: data.text,\n        // _lcattrs 是用来存储用户自定义的一些键值对\n        _lcattrs: data.attr,\n        _lcfile: {\n          name: data.metaData.name,\n          // 单位：b\n          size: data.metaData.size\n        }\n      };\n      break;\n  }\n  obj = JSON.stringify(obj);\n  return obj;\n};\n\n// 取自增的 number 类型\nengine.getSerialId = function(cache) {\n  cache.serialId++;\n  if (cache.serialId > 999999) {\n    cache.serialId = 2015;\n  }\n  return cache.serialId;\n};\n\n// 绑定所有服务返回事件\nengine.bindEvent = function(cache) {\n\n  // RealtimeObject 已经初始化过，不再重复绑定事件\n  if (cache.openFlag) {\n    return;\n  }\n\n  cache.ec.on('session-opened', function(data) {\n    // 标记重试状态为 false，表示没有在重试\n    cache.reuseFlag = false;\n    // 标记开启状态，已经开启\n    cache.openFlag = true;\n    // 派发全局 open 事件，表示 realtime 已经启动\n    cache.ec.emit(eNameIndex.open, data);\n  });\n\n  // cache.ec.on('session-closed', function() {\n  // session 被关闭，则关闭当前 websocket 连接\n  // });\n\n  // 查询 session 在线情况\n  // cache.ec.on('session-query-result', function() {});\n\n  cache.ec.on('session-error', function(data) {\n    cache.ec.emit(eNameIndex.error, data);\n  });\n\n  // 服务器端确认收到 conversation 创建，并创建成功\n  // 在创建时已经做绑定，所以注释掉\n  // cache.ec.on('conv-started', function(data) {});\n\n  // 服务器端发给客户端，表示当前用户加入了某个对话。包括创建对话、或加入对话\n  cache.ec.on('conv-joined', function(data) {\n    // 不是当前用户自己加入\n    // join 事件已废弃\n    // 这里把当前用户主动操作的情况过滤掉了，为了兼容保持原样。\n    if (data.peerId !== data.initBy) {\n      cache.ec.emit(eNameIndex.join, data);\n    }\n    cache.ec.emit(eNameIndex.invited, data);\n  });\n\n  // 服务器端发给客户端，表示当前用户离开了某个对话，不再能收到对话的消息\n  cache.ec.on('conv-left', function(data) {\n    cache.ec.emit(eNameIndex.left, data);\n    cache.ec.emit(eNameIndex.kicked, data);\n  });\n\n  // 服务器端发给客户端，表示当前对话有新人加入\n  cache.ec.on('conv-members-joined', function(data) {\n    cache.ec.emit(eNameIndex.join, data);\n    cache.ec.emit(eNameIndex.membersjoined, data);\n  });\n\n  // 服务器端发给客户端，表示当前对话有新人离开\n  cache.ec.on('conv-members-left', function(data) {\n    cache.ec.emit(eNameIndex.left, data);\n    cache.ec.emit(eNameIndex.membersleft, data);\n  });\n\n  // 服务器端回复。表示 add 操作完成\n  // 因为 added 之后也会触发 members-joined，所以注释掉\n  // cache.ec.on('conv-added', function(data) {});\n\n  // 服务器端确认删除成功\n  // 因为 removed 之后也会触发 members-removed，所以注释掉\n  // cache.ec.on('conv-removed', function() {});\n\n  cache.ec.on('conv-error', function(data) {\n    cache.ec.emit(eNameIndex.error, data);\n    throw (data.code + ':' + data.reason);\n  });\n\n  // 查询对话的结果\n  // cache.ec.on('conv-results', function(data) {});\n\n  // cache.ec.on('conv-updated', function(data) {});\n\n  cache.ec.on('direct', function(data) {\n\n    // 增加多媒体消息的数据格式化\n    data.msg = engine.getMediaMsg(cache, data.msg);\n\n    // 暂态消息无需回复\n    if (!data.transient) {\n      engine.convAck(cache, {\n        cid: data.cid,\n        mid: data.id\n      });\n    }\n\n    cache.ec.emit(eNameIndex.message, data);\n  });\n\n  // 对要求回执的消息，服务器端会在对方客户端发送ack后发送回执\n  cache.ec.on('rcp', function(data) {\n    cache.ec.emit(eNameIndex.receipt, data);\n  });\n\n  // cache.ec.on('ack', function(data) {});\n\n  // 用户可以获取自己所在对话的历史记录\n  // cache.ec.on('logs', function(data) {});\n};\n\nexport default realtime;\n"]}