!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.AV=a.AV||{})}(this,function(a){"use strict";function b(a,b){return b={exports:{}},a(b,b.exports,_),b.exports}function c(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function d(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b}function e(a,b){return"onerror"===a?void Vc.on("error",b):2!==arguments.length?Vc[a]:void(Vc[a]=b)}function f(a){return"function"==typeof a||"object"==typeof a&&null!==a}function g(a){return"function"==typeof a}function h(a){return"object"==typeof a&&null!==a}function i(){}function j(){setTimeout(function(){for(var a,b=0;b<$c.length;b++){a=$c[b];var c=a.payload;c.guid=c.key+c.id,c.childGuid=c.key+c.childId,c.error&&(c.stack=c.error.stack),Vc.trigger(a.name,a.payload)}$c.length=0},50)}function k(a,b,c){1===$c.push({name:a,payload:{key:b._guidKey,id:b._id,eventName:a,detail:b._result,childId:c&&c._id,label:b._label,timeStamp:Yc(),error:Vc["instrument-with-stack"]?new Error(b._label):null}})&&j()}function l(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(n,b);return t(d,a),d}function m(){return new TypeError("A promises callback cannot return that same promise.")}function n(){}function o(a){try{return a.then}catch(b){return cd.error=b,cd}}function p(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function q(a,b,c){Vc.async(function(a){var d=!1,e=p(c,b,function(c){d||(d=!0,b!==c?t(a,c,void 0):v(a,c))},function(b){d||(d=!0,w(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,w(a,e))},a)}function r(a,b){b._state===ad?v(a,b._result):b._state===bd?(b._onError=null,w(a,b._result)):x(b,void 0,function(c){b!==c?t(a,c,void 0):v(a,c)},function(b){w(a,b)})}function s(a,b,c){b.constructor===a.constructor&&c===D&&constructor.resolve===l?r(a,b):c===cd?w(a,cd.error):void 0===c?v(a,b):g(c)?q(a,b,c):v(a,b)}function t(a,b){a===b?v(a,b):f(b)?s(a,b,o(b)):v(a,b)}function u(a){a._onError&&a._onError(a._result),y(a)}function v(a,b){a._state===_c&&(a._result=b,a._state=ad,0===a._subscribers.length?Vc.instrument&&k("fulfilled",a):Vc.async(y,a))}function w(a,b){a._state===_c&&(a._state=bd,a._result=b,Vc.async(u,a))}function x(a,b,c,d){var e=a._subscribers,f=e.length;a._onError=null,e[f]=b,e[f+ad]=c,e[f+bd]=d,0===f&&a._state&&Vc.async(y,a)}function y(a){var b=a._subscribers,c=a._state;if(Vc.instrument&&k(c===ad?"fulfilled":"rejected",a),0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?B(c,d,e,f):e(f);a._subscribers.length=0}}function z(){this.error=null}function A(a,b){try{return a(b)}catch(c){return dd.error=c,dd}}function B(a,b,c,d){var e,f,h,i,j=g(c);if(j){if(e=A(c,d),e===dd?(i=!0,f=e.error,e=null):h=!0,b===e)return void w(b,m())}else e=d,h=!0;b._state!==_c||(j&&h?t(b,e):i?w(b,f):a===ad?v(b,e):a===bd&&w(b,e))}function C(a,b){var c=!1;try{b(function(b){c||(c=!0,t(a,b))},function(b){c||(c=!0,w(a,b))})}catch(d){w(a,d)}}function D(a,b,c){var d=this,e=d._state;if(e===ad&&!a||e===bd&&!b)return Vc.instrument&&k("chained",d,d),d;d._onError=null;var f=new d.constructor(n,c),g=d._result;if(Vc.instrument&&k("chained",d,f),e){var h=arguments[e-1];Vc.async(function(){B(e,f,h,g)})}else x(d,f,a,b);return f}function E(a,b,c){return a===ad?{state:"fulfilled",value:c}:{state:"rejected",reason:c}}function F(a,b,c,d){this._instanceConstructor=a,this.promise=new a(n,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?v(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&v(this.promise,this._result))):w(this.promise,this._validationError())}function G(a,b){return new F(this,a,!0,b).promise}function H(a,b){function c(a){t(f,a)}function d(a){w(f,a)}var e=this,f=new e(n,b);if(!Xc(a))return w(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===_c&&g>h;h++)x(e.resolve(a[h]),void 0,c,d);return f}function I(a,b){var c=this,d=new c(n,b);return w(d,a),d}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(a,b){this._id=fd++,this._label=b,this._state=void 0,this._result=void 0,this._subscribers=[],Vc.instrument&&k("created",this),n!==a&&("function"!=typeof a&&J(),this instanceof L?C(this,a):K())}function M(){this.value=void 0}function N(a,b,c){this._superConstructor(a,b,!1,c)}function O(a,b,c){this._superConstructor(a,b,!0,c)}function P(a,b,c){this._superConstructor(a,b,!1,c)}function Q(a,b){od[id]=a,od[id+1]=b,id+=2,2===id&&hd()}function R(){var a=process.nextTick,b=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(W)}}function S(){return function(){gd(W)}}function T(){var a=0,b=new ld(W),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function U(){var a=new MessageChannel;return a.port1.onmessage=W,function(){a.port2.postMessage(0)}}function V(){return function(){setTimeout(W,1)}}function W(){for(var a=0;id>a;a+=2){var b=od[a],c=od[a+1];b(c),od[a]=void 0,od[a+1]=void 0}id=0}function X(){try{var a=$,b=a("vertx");return gd=b.runOnLoop||b.runOnContext,S()}catch(c){return V()}}function Y(){Vc.on.apply(Vc,arguments)}var Z="undefined"!=typeof window?window:"undefined"!=typeof Z?Z:this,$=$||function(a){throw new Error("Unexpected required "+a)},_="undefined"!=typeof window?window:"undefined"!=typeof Z?Z:this,aa=b(function(a){var b=a.exports={version:"2.2.1"};"number"==typeof __e&&(__e=b)}),ba=aa&&"object"==typeof aa&&"default"in aa?aa["default"]:aa,ca=b(function(a){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),da=ca&&"object"==typeof ca&&"default"in ca?ca["default"]:ca,ea=b(function(a){var b=0,c=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++b+c).toString(36))}}),fa=ea&&"object"==typeof ea&&"default"in ea?ea["default"]:ea,ga=b(function(a){var b=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=b)}),ha=ga&&"object"==typeof ga&&"default"in ga?ga["default"]:ga,ia=b(function(a){var b=ha,c="__core-js_shared__",d=b[c]||(b[c]={});a.exports=function(a){return d[a]||(d[a]={})}}),ja=ia&&"object"==typeof ia&&"default"in ia?ia["default"]:ia,ka=b(function(a){var b=ja("keys"),c=fa;a.exports=function(a){return b[a]||(b[a]=c(a))}}),la=ka&&"object"==typeof ka&&"default"in ka?ka["default"]:ka,ma=b(function(a){var b=Math.ceil,c=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?c:b)(a)}}),na=ma&&"object"==typeof ma&&"default"in ma?ma["default"]:ma,oa=b(function(a){var b=na,c=Math.max,d=Math.min;a.exports=function(a,e){return a=b(a),0>a?c(a+e,0):d(a,e)}}),pa=oa&&"object"==typeof oa&&"default"in oa?oa["default"]:oa,qa=b(function(a){var b=na,c=Math.min;a.exports=function(a){return a>0?c(b(a),9007199254740991):0}}),ra=qa&&"object"==typeof qa&&"default"in qa?qa["default"]:qa,sa=b(function(a){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}}),ta=sa&&"object"==typeof sa&&"default"in sa?sa["default"]:sa,ua=b(function(a){var b={}.toString;a.exports=function(a){return b.call(a).slice(8,-1)}}),va=ua&&"object"==typeof ua&&"default"in ua?ua["default"]:ua,wa=b(function(a){var b=va;a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==b(a)?a.split(""):Object(a)}}),xa=wa&&"object"==typeof wa&&"default"in wa?wa["default"]:wa,ya=b(function(a){var b=xa,c=ta;a.exports=function(a){return b(c(a))}}),za=ya&&"object"==typeof ya&&"default"in ya?ya["default"]:ya,Aa=b(function(a){var b=za,c=ra,d=pa;a.exports=function(a){return function(e,f,g){var h,i=b(e),j=c(i.length),k=d(g,j);if(a&&f!=f){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===f)return a||k;return!a&&-1}}}),Ba=Aa&&"object"==typeof Aa&&"default"in Aa?Aa["default"]:Aa,Ca=b(function(a){var b={}.hasOwnProperty;a.exports=function(a,c){return b.call(a,c)}}),Da=Ca&&"object"==typeof Ca&&"default"in Ca?Ca["default"]:Ca,Ea=b(function(a){var b=Da,c=za,d=Ba(!1),e=la("IE_PROTO");a.exports=function(a,f){var g,h=c(a),i=0,j=[];for(g in h)g!=e&&b(h,g)&&j.push(g);for(;f.length>i;)b(h,g=f[i++])&&(~d(j,g)||j.push(g));return j}}),Fa=Ea&&"object"==typeof Ea&&"default"in Ea?Ea["default"]:Ea,Ga=b(function(a,b){var c=Fa,d=da.concat("length","prototype");b.f=Object.getOwnPropertyNames||function(a){return c(a,d)}}),Ha=Ga&&"object"==typeof Ga&&"default"in Ga?Ga["default"]:Ga,Ia=b(function(a){var b=za,c=Ha.f,d={}.toString,e="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(a){try{return c(a)}catch(b){return e.slice()}};a.exports.f=function(a){return e&&"[object Window]"==d.call(a)?f(a):c(b(a))}}),Ja=Ia&&"object"==typeof Ia&&"default"in Ia?Ia["default"]:Ia,Ka=b(function(a){a.exports=function(a){try{return!!a()}catch(b){return!0}}}),La=Ka&&"object"==typeof Ka&&"default"in Ka?Ka["default"]:Ka,Ma=b(function(a){a.exports=!La(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),Na=Ma&&"object"==typeof Ma&&"default"in Ma?Ma["default"]:Ma,Oa=b(function(a){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}}),Pa=Oa&&"object"==typeof Oa&&"default"in Oa?Oa["default"]:Oa,Qa=b(function(a){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}}),Ra=Qa&&"object"==typeof Qa&&"default"in Qa?Qa["default"]:Qa,Sa=b(function(a){var b=Ra;a.exports=function(a,c){if(!b(a))return a;var d,e;if(c&&"function"==typeof(d=a.toString)&&!b(e=d.call(a)))return e;if("function"==typeof(d=a.valueOf)&&!b(e=d.call(a)))return e;if(!c&&"function"==typeof(d=a.toString)&&!b(e=d.call(a)))return e;throw TypeError("Can't convert object to primitive value")}}),Ta=Sa&&"object"==typeof Sa&&"default"in Sa?Sa["default"]:Sa,Ua=b(function(a){var b=Ra,c=ha.document,d=b(c)&&b(c.createElement);a.exports=function(a){return d?c.createElement(a):{}}}),Va=Ua&&"object"==typeof Ua&&"default"in Ua?Ua["default"]:Ua,Wa=b(function(a){a.exports=!Na&&!La(function(){return 7!=Object.defineProperty(Va("div"),"a",{get:function(){return 7}}).a})}),Xa=Wa&&"object"==typeof Wa&&"default"in Wa?Wa["default"]:Wa,Ya=b(function(a){var b=Ra;a.exports=function(a){if(!b(a))throw TypeError(a+" is not an object!");return a}}),Za=Ya&&"object"==typeof Ya&&"default"in Ya?Ya["default"]:Ya,$a=b(function(a,b){var c=Za,d=Xa,e=Ta,f=Object.defineProperty;b.f=Na?Object.defineProperty:function(a,b,g){if(c(a),b=e(b,!0),c(g),d)try{return f(a,b,g)}catch(h){}if("get"in g||"set"in g)throw TypeError("Accessors not supported!");return"value"in g&&(a[b]=g.value),a}}),_a=$a&&"object"==typeof $a&&"default"in $a?$a["default"]:$a,ab=b(function(a){var b=_a,c=Pa;a.exports=Na?function(a,d,e){return b.f(a,d,c(1,e))}:function(a,b,c){return a[b]=c,a}}),bb=ab&&"object"==typeof ab&&"default"in ab?ab["default"]:ab,cb=b(function(a){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}}),db=cb&&"object"==typeof cb&&"default"in cb?cb["default"]:cb,eb=b(function(a){var b=db;a.exports=function(a,c,d){if(b(a),void 0===c)return a;switch(d){case 1:return function(b){return a.call(c,b)};case 2:return function(b,d){return a.call(c,b,d)};case 3:return function(b,d,e){return a.call(c,b,d,e)}}return function(){return a.apply(c,arguments)}}}),fb=eb&&"object"==typeof eb&&"default"in eb?eb["default"]:eb,gb=b(function(a,b){var c=ha,d=ba,e=fb,f=bb,g="prototype",h=function(a,b,i){var j,k,l,m=a&h.F,n=a&h.G,o=a&h.S,p=a&h.P,q=a&h.B,r=a&h.W,s=n?d:d[b]||(d[b]={}),t=s[g],u=n?c:o?c[b]:(c[b]||{})[g];n&&(i=b);for(j in i)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:i[j],s[j]=n&&"function"!=typeof u[j]?i[j]:q&&k?e(l,c):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[g]=a[g],b}(l):p&&"function"==typeof l?e(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&h.R&&t&&!t[j]&&f(t,j,l)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,a.exports=h}),hb=gb&&"object"==typeof gb&&"default"in gb?gb["default"]:gb,ib=b(function(a){var b=hb,c=ba,d=La;a.exports=function(a,e){var f=(c.Object||{})[a]||Object[a],g={};g[a]=e(f),b(b.S+b.F*d(function(){f(1)}),"Object",g)}}),jb=ib&&"object"==typeof ib&&"default"in ib?ib["default"]:ib,kb=(b(function(a){jb("getOwnPropertyNames",function(){return Ja.f})}),b(function(a){var b=ba.Object;a.exports=function(a){return b.getOwnPropertyNames(a)}})),lb=kb&&"object"==typeof kb&&"default"in kb?kb["default"]:kb,mb=b(function(a){a.exports={"default":lb,__esModule:!0}}),nb=mb&&"object"==typeof mb&&"default"in mb?mb["default"]:mb,ob=b(function(a){a.exports=function(){}}),pb=ob&&"object"==typeof ob&&"default"in ob?ob["default"]:ob,qb=b(function(a){var b=ja("wks"),c=fa,d=ha.Symbol,e="function"==typeof d;a.exports=function(a){return b[a]||(b[a]=e&&d[a]||(e?d:c)("Symbol."+a))}}),rb=qb&&"object"==typeof qb&&"default"in qb?qb["default"]:qb,sb=b(function(a){var b=va;a.exports=Array.isArray||function(a){return"Array"==b(a)}}),tb=sb&&"object"==typeof sb&&"default"in sb?sb["default"]:sb,ub=b(function(a){var b=Ra,c=tb,d=rb("species");a.exports=function(a,e){var f;return c(a)&&(f=a.constructor,"function"!=typeof f||f!==Array&&!c(f.prototype)||(f=void 0),b(f)&&(f=f[d],null===f&&(f=void 0))),new(void 0===f?Array:f)(e)}}),vb=ub&&"object"==typeof ub&&"default"in ub?ub["default"]:ub,wb=b(function(a){var b=ta;a.exports=function(a){return Object(b(a))}}),xb=wb&&"object"==typeof wb&&"default"in wb?wb["default"]:wb,yb=b(function(a){var b=fb,c=xa,d=xb,e=ra,f=vb;a.exports=function(a,g){var h=1==a,i=2==a,j=3==a,k=4==a,l=6==a,m=5==a||l,n=g||f;return function(f,g,o){for(var p,q,r=d(f),s=c(r),t=b(g,o,3),u=e(s.length),v=0,w=h?n(f,u):i?n(f,0):void 0;u>v;v++)if((m||v in s)&&(p=s[v],q=t(p,v,r),a))if(h)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(k)return!1;return l?-1:j||k?k:w}}}),zb=yb&&"object"==typeof yb&&"default"in yb?yb["default"]:yb,Ab=(b(function(a){var b=hb,c=zb(5),d="find",e=!0;d in[]&&Array(1)[d](function(){e=!1}),b(b.P+b.F*e,"Array",{find:function(a){return c(this,a,arguments.length>1?arguments[1]:void 0)}}),pb(d)}),b(function(a){a.exports=ba.Array.find})),Bb=Ab&&"object"==typeof Ab&&"default"in Ab?Ab["default"]:Ab,Cb=b(function(a){a.exports={"default":Bb,__esModule:!0}}),Db=Cb&&"object"==typeof Cb&&"default"in Cb?Cb["default"]:Cb,Eb=b(function(a,b){b.f={}.propertyIsEnumerable}),Fb=Eb&&"object"==typeof Eb&&"default"in Eb?Eb["default"]:Eb,Gb=b(function(a,b){b.f=Object.getOwnPropertySymbols}),Hb=Gb&&"object"==typeof Gb&&"default"in Gb?Gb["default"]:Gb,Ib=b(function(a){var b=Fa,c=da;a.exports=Object.keys||function(a){return b(a,c)}}),Jb=Ib&&"object"==typeof Ib&&"default"in Ib?Ib["default"]:Ib,Kb=b(function(a){var b=Jb,c=Hb,d=Fb,e=xb,f=xa,g=Object.assign;a.exports=!g||La(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=g({},a)[c]||Object.keys(g({},b)).join("")!=d})?function(a,g){for(var h=e(a),i=arguments.length,j=1,k=c.f,l=d.f;i>j;)for(var m,n=f(arguments[j++]),o=k?b(n).concat(k(n)):b(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(h[m]=n[m]);return h}:g}),Lb=Kb&&"object"==typeof Kb&&"default"in Kb?Kb["default"]:Kb,Mb=(b(function(a){var b=hb;b(b.S+b.F,"Object",{assign:Lb})}),b(function(a){a.exports=ba.Object.assign})),Nb=Mb&&"object"==typeof Mb&&"default"in Mb?Mb["default"]:Mb,Ob=b(function(a){a.exports={"default":Nb,__esModule:!0}}),Pb=Ob&&"object"==typeof Ob&&"default"in Ob?Ob["default"]:Ob,Qb=b(function(a,b){b.__esModule=!0,b["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}}),Rb=Qb&&"object"==typeof Qb&&"default"in Qb?Qb["default"]:Qb,Sb=b(function(a){a.exports=!0}),Tb=Sb&&"object"==typeof Sb&&"default"in Sb?Sb["default"]:Sb,Ub=b(function(a,b){var c=Fb,d=Pa,e=za,f=Ta,g=Da,h=Xa,i=Object.getOwnPropertyDescriptor;b.f=Na?i:function(a,b){if(a=e(a),b=f(b,!0),h)try{return i(a,b)}catch(j){}return g(a,b)?d(!c.f.call(a,b),a[b]):void 0}}),Vb=Ub&&"object"==typeof Ub&&"default"in Ub?Ub["default"]:Ub,Wb=b(function(a){a.exports=ha.document&&document.documentElement}),Xb=Wb&&"object"==typeof Wb&&"default"in Wb?Wb["default"]:Wb,Yb=b(function(a){var b=_a,c=Za,d=Jb;a.exports=Na?Object.defineProperties:function(a,e){c(a);for(var f,g=d(e),h=g.length,i=0;h>i;)b.f(a,f=g[i++],e[f]);return a}}),Zb=Yb&&"object"==typeof Yb&&"default"in Yb?Yb["default"]:Yb,$b=b(function(a){var b=Za,c=Zb,d=da,e=la("IE_PROTO"),f=function(){},g="prototype",h=function(){var a,b=Va("iframe"),c=d.length,e=">";for(b.style.display="none",Xb.appendChild(b),b.src="javascript:",a=b.contentWindow.document,a.open(),a.write("<script>document.F=Object</script"+e),a.close(),h=a.F;c--;)delete h[g][d[c]];return h()};a.exports=Object.create||function(a,d){var i;return null!==a?(f[g]=b(a),i=new f,f[g]=null,i[e]=a):i=h(),void 0===d?i:c(i,d)}}),_b=$b&&"object"==typeof $b&&"default"in $b?$b["default"]:$b,ac=b(function(a){var b=Jb,c=Hb,d=Fb;a.exports=function(a){var e=b(a),f=c.f;if(f)for(var g,h=f(a),i=d.f,j=0;h.length>j;)i.call(a,g=h[j++])&&e.push(g);return e}}),bc=ac&&"object"==typeof ac&&"default"in ac?ac["default"]:ac,cc=b(function(a){var b=Jb,c=za;a.exports=function(a,d){for(var e,f=c(a),g=b(f),h=g.length,i=0;h>i;)if(f[e=g[i++]]===d)return e}}),dc=cc&&"object"==typeof cc&&"default"in cc?cc["default"]:cc,ec=b(function(a){var b=_a.f,c=Da,d=rb("toStringTag");a.exports=function(a,e,f){a&&!c(a=f?a:a.prototype,d)&&b(a,d,{configurable:!0,value:e})}}),fc=ec&&"object"==typeof ec&&"default"in ec?ec["default"]:ec,gc=b(function(a){var b=fa("meta"),c=Ra,d=Da,e=_a.f,f=0,g=Object.isExtensible||function(){return!0},h=!La(function(){return g(Object.preventExtensions({}))}),i=function(a){e(a,b,{value:{i:"O"+ ++f,w:{}}})},j=function(a,e){if(!c(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!d(a,b)){if(!g(a))return"F";if(!e)return"E";i(a)}return a[b].i},k=function(a,c){if(!d(a,b)){if(!g(a))return!0;if(!c)return!1;i(a)}return a[b].w},l=function(a){return h&&m.NEED&&g(a)&&!d(a,b)&&i(a),a},m=a.exports={KEY:b,NEED:!1,fastKey:j,getWeak:k,onFreeze:l}}),hc=gc&&"object"==typeof gc&&"default"in gc?gc["default"]:gc,ic=b(function(a){a.exports=bb}),jc=ic&&"object"==typeof ic&&"default"in ic?ic["default"]:ic,kc=(b(function(a){var b=ha,c=ba,d=Da,e=Na,f=hb,g=jc,h=hc.KEY,i=La,j=ja,k=fc,l=fa,m=rb,n=dc,o=bc,p=tb,q=Za,r=za,s=Ta,t=Pa,u=_b,v=Ja,w=Vb,x=_a,y=w.f,z=x.f,A=v.f,B=b.Symbol,C=b.JSON,D=C&&C.stringify,E=!1,F="prototype",G=m("_hidden"),H=m("toPrimitive"),I={}.propertyIsEnumerable,J=j("symbol-registry"),K=j("symbols"),L=Object[F],M="function"==typeof B,N=b.QObject,O=e&&i(function(){return 7!=u(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=y(L,b);d&&delete L[b],z(a,b,c),d&&a!==L&&z(L,b,d)}:z,P=function(a){var b=K[a]=u(B[F]);return b._k=a,e&&E&&O(L,a,{configurable:!0,set:function(b){d(this,G)&&d(this[G],a)&&(this[G][a]=!1),O(this,a,t(1,b))}}),b},Q=M&&"symbol"==typeof B.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof B},R=function(a,b,c){return q(a),b=s(b,!0),q(c),d(K,b)?(c.enumerable?(d(a,G)&&a[G][b]&&(a[G][b]=!1),c=u(c,{enumerable:t(0,!1)})):(d(a,G)||z(a,G,t(1,{})),a[G][b]=!0),O(a,b,c)):z(a,b,c)},S=function(a,b){q(a);for(var c,d=o(b=r(b)),e=0,f=d.length;f>e;)R(a,c=d[e++],b[c]);return a},T=function(a,b){return void 0===b?u(a):S(u(a),b)},U=function(a){var b=I.call(this,a=s(a,!0));return b||!d(this,a)||!d(K,a)||d(this,G)&&this[G][a]?b:!0},V=function(a,b){var c=y(a=r(a),b=s(b,!0));return!c||!d(K,b)||d(a,G)&&a[G][b]||(c.enumerable=!0),c},W=function(a){for(var b,c=A(r(a)),e=[],f=0;c.length>f;)d(K,b=c[f++])||b==G||b==h||e.push(b);return e},X=function(a){for(var b,c=A(r(a)),e=[],f=0;c.length>f;)d(K,b=c[f++])&&e.push(K[b]);return e},Y=function(a){if(void 0!==a&&!Q(a)){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);return b=d[1],"function"==typeof b&&(c=b),!c&&p(b)||(b=function(a,b){return c&&(b=c.call(this,a,b)),Q(b)?void 0:b}),d[1]=b,D.apply(C,d)}},Z=i(function(){var a=B();return"[null]"!=D([a])||"{}"!=D({a:a})||"{}"!=D(Object(a))});M||(B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");return P(l(arguments.length>0?arguments[0]:void 0))},g(B[F],"toString",function(){return this._k}),w.f=V,x.f=R,Ha.f=v.f=W,Fb.f=U,Hb.f=X,e&&!Tb&&g(L,"propertyIsEnumerable",U,!0)),f(f.G+f.W+f.F*!M,{Symbol:B});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),_=0;$.length>_;){var aa=$[_++],ca=c.Symbol,da=m(aa);aa in ca||z(ca,aa,{value:M?da:P(da)})}N&&N[F]&&N[F].findChild||(E=!0),f(f.S+f.F*!M,"Symbol",{"for":function(a){return d(J,a+="")?J[a]:J[a]=B(a)},keyFor:function(a){if(Q(a))return n(J,a);throw TypeError(a+" is not a symbol!")},useSetter:function(){E=!0},useSimple:function(){E=!1}}),f(f.S+f.F*!M,"Object",{create:T,defineProperty:R,defineProperties:S,getOwnPropertyDescriptor:V,getOwnPropertyNames:W,getOwnPropertySymbols:X}),C&&f(f.S+f.F*(!M||Z),"JSON",{stringify:Y}),B[F][H]||bb(B[F],H,B[F].valueOf),k(B,"Symbol"),k(Math,"Math",!0),k(b.JSON,"JSON",!0)}),b(function(a){a.exports=ba.Symbol})),lc=kc&&"object"==typeof kc&&"default"in kc?kc["default"]:kc,mc=b(function(a){a.exports={"default":lc,__esModule:!0}}),nc=mc&&"object"==typeof mc&&"default"in mc?mc["default"]:mc,oc=b(function(a){a.exports={}}),pc=oc&&"object"==typeof oc&&"default"in oc?oc["default"]:oc,qc=b(function(a){var b=Da,c=xb,d=la("IE_PROTO"),e=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=c(a),b(a,d)?a[d]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?e:null}}),rc=qc&&"object"==typeof qc&&"default"in qc?qc["default"]:qc,sc=b(function(a){var b=_b,c=Pa,d=fc,e={};bb(e,rb("iterator"),function(){return this}),a.exports=function(a,f,g){a.prototype=b(e,{next:c(1,g)}),d(a,f+" Iterator")}}),tc=sc&&"object"==typeof sc&&"default"in sc?sc["default"]:sc,uc=b(function(a){var b=Tb,c=hb,d=jc,e=bb,f=Da,g=pc,h=tc,i=fc,j=rc,k=rb("iterator"),l=!([].keys&&"next"in[].keys()),m="@@iterator",n="keys",o="values",p=function(){return this};a.exports=function(a,q,r,s,t,u,v){h(r,q,s);var w,x,y,z=function(a){if(!l&&a in D)return D[a];switch(a){case n:return function(){return new r(this,a)};case o:return function(){return new r(this,a)}}return function(){return new r(this,a)}},A=q+" Iterator",B=t==o,C=!1,D=a.prototype,E=D[k]||D[m]||t&&D[t],F=E||z(t),G=t?B?z("entries"):F:void 0,H="Array"==q?D.entries||E:E;if(H&&(y=j(H.call(new a)),y!==Object.prototype&&(i(y,A,!0),b||f(y,k)||e(y,k,p))),B&&E&&E.name!==o&&(C=!0,F=function(){return E.call(this)}),b&&!v||!l&&!C&&D[k]||e(D,k,F),g[q]=F,g[A]=p,t)if(w={values:B?F:z(o),keys:u?F:z(n),entries:G},v)for(x in w)x in D||d(D,x,w[x]);else c(c.P+c.F*(l||C),q,w);return w}}),vc=uc&&"object"==typeof uc&&"default"in uc?uc["default"]:uc,wc=b(function(a){a.exports=function(a,b){return{value:b,done:!!a}}}),xc=wc&&"object"==typeof wc&&"default"in wc?wc["default"]:wc,yc=(b(function(a){var b=pb,c=xc,d=pc,e=za;a.exports=vc(Array,"Array",function(a,b){this._t=e(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,d=this._i++;return!a||d>=a.length?(this._t=void 0,c(1)):"keys"==b?c(0,d):"values"==b?c(0,a[d]):c(0,[d,a[d]])},"values"),d.Arguments=d.Array,b("keys"),b("values"),b("entries")}),b(function(a){for(var b=ha,c=bb,d=pc,e=rb("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],g=0;5>g;g++){var h=f[g],i=b[h],j=i&&i.prototype;j&&!j[e]&&c(j,e,h),d[h]=d.Array}}),b(function(a){var b=na,c=ta;a.exports=function(a){return function(d,e){var f,g,h=String(c(d)),i=b(e),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}})),zc=yc&&"object"==typeof yc&&"default"in yc?yc["default"]:yc,Ac=(b(function(a){var b=zc(!0);vc(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,c=this._t,d=this._i;return d>=c.length?{value:void 0,done:!0}:(a=b(c,d),this._i+=a.length,{value:a,done:!1})})}),b(function(a){a.exports=rb("iterator")})),Bc=Ac&&"object"==typeof Ac&&"default"in Ac?Ac["default"]:Ac,Cc=b(function(a){a.exports={"default":Bc,__esModule:!0}}),Dc=Cc&&"object"==typeof Cc&&"default"in Cc?Cc["default"]:Cc,Ec=b(function(a,b){function c(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var d=Dc,e=c(d),f=nc,g=c(f),h="function"==typeof g["default"]&&"symbol"==typeof e["default"]?function(a){return typeof a}:function(a){return a&&"function"==typeof g["default"]&&a.constructor===g["default"]?"symbol":typeof a};b["default"]="function"==typeof g["default"]&&"symbol"===h(e["default"])?function(a){return"undefined"==typeof a?"undefined":h(a)}:function(a){return a&&"function"==typeof g["default"]&&a.constructor===g["default"]?"symbol":"undefined"==typeof a?"undefined":h(a)}}),Fc=Ec&&"object"==typeof Ec&&"default"in Ec?Ec["default"]:Ec,Gc=b(function(a,b){function c(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var d=Fc,e=c(d);b["default"]=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==("undefined"==typeof b?"undefined":(0,e["default"])(b))&&"function"!=typeof b?a:b}}),Hc=Gc&&"object"==typeof Gc&&"default"in Gc?Gc["default"]:Gc,Ic=(b(function(a){var b=hb;b(b.S,"Object",{create:_b})}),b(function(a){var b=ba.Object;a.exports=function(a,c){return b.create(a,c)}})),Jc=Ic&&"object"==typeof Ic&&"default"in Ic?Ic["default"]:Ic,Kc=b(function(a){a.exports={"default":Jc,__esModule:!0}}),Lc=Kc&&"object"==typeof Kc&&"default"in Kc?Kc["default"]:Kc,Mc=b(function(a){var b=Ra,c=Za,d=function(a,d){if(c(a),!b(d)&&null!==d)throw TypeError(d+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,b,c){try{c=fb(Function.call,Vb.f(Object.prototype,"__proto__").set,2),c(a,[]),b=!(a instanceof Array)}catch(e){b=!0}return function(a,e){return d(a,e),b?a.__proto__=e:c(a,e),a}}({},!1):void 0),check:d}}),Nc=Mc&&"object"==typeof Mc&&"default"in Mc?Mc["default"]:Mc,Oc=(b(function(a){var b=hb;b(b.S,"Object",{setPrototypeOf:Nc.set})}),b(function(a){a.exports=ba.Object.setPrototypeOf})),Pc=Oc&&"object"==typeof Oc&&"default"in Oc?Oc["default"]:Oc,Qc=b(function(a){a.exports={"default":Pc,__esModule:!0}}),Rc=Qc&&"object"==typeof Qc&&"default"in Qc?Qc["default"]:Qc,Sc=b(function(a,b){function c(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var d=Rc,e=c(d),f=Lc,g=c(f),h=Fc,i=c(h);b["default"]=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof b?"undefined":(0,i["default"])(b)));a.prototype=(0,g["default"])(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e["default"]?(0,e["default"])(a,b):a.__proto__=b)}}),Tc=Sc&&"object"==typeof Sc&&"default"in Sc?Sc["default"]:Sc,Uc={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,b){if("function"!=typeof b)throw new TypeError("Callback must be a function");var e,f=d(this);e=f[a],e||(e=f[a]=[]),-1===c(e,b)&&e.push(b)},off:function(a,b){var e,f,g=d(this);return b?(e=g[a],f=c(e,b),void(-1!==f&&e.splice(f,1))):void(g[a]=[])},trigger:function(a,b,c){var e,f,g=d(this);if(e=g[a])for(var h=0;h<e.length;h++)(f=e[h])(b,c)}},Vc={instrument:!1};Uc.mixin(Vc);var Wc;Wc=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var Xc=Wc,Yc=Date.now||function(){return(new Date).getTime()},Zc=Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return i.prototype=a,new i},$c=[],_c=void 0,ad=1,bd=2,cd=new z,dd=new z;F.prototype._validateInput=function(a){return Xc(a)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)},F.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===_c&&a>d;d++)this._eachEntry(c[d],d)},F.prototype._settleMaybeThenable=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===l){var e=o(a);if(e===D&&a._state!==_c)a._onError=null,this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=this._makeResult(ad,b,a);else if(c===L){var f=new c(n);s(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){b(a)}),b)}else this._willSettleAt(d(a),b)},F.prototype._eachEntry=function(a,b){h(a)?this._settleMaybeThenable(a,b):(this._remaining--,this._result[b]=this._makeResult(ad,b,a))},F.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===_c&&(this._remaining--,this._abortOnReject&&a===bd?w(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&v(d,this._result)},F.prototype._makeResult=function(a,b,c){return c},F.prototype._willSettleAt=function(a,b){var c=this;x(a,void 0,function(a){c._settledAt(ad,b,a)},function(a){c._settledAt(bd,b,a)})};var ed="rsvp_"+Yc()+"-",fd=0;L.cast=l,L.all=G,L.race=H,L.resolve=l,L.reject=I,L.prototype={constructor:L,_guidKey:ed,_onError:function(a){var b=this;Vc.after(function(){b._onError&&Vc.trigger("error",a,b._label)})},then:D,"catch":function(a,b){return this.then(void 0,a,b)},"finally":function(a,b){var c=this,d=c.constructor;return c.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){return d.reject(b)})},b)}};new M,new M;N.prototype=Zc(F.prototype),N.prototype._superConstructor=F,N.prototype._makeResult=E,N.prototype._validationError=function(){return new Error("allSettled must be called with an array")},O.prototype=Zc(F.prototype),O.prototype._superConstructor=F,O.prototype._init=function(){this._result={}},O.prototype._validateInput=function(a){return a&&"object"==typeof a},O.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},O.prototype._enumerate=function(){var a=this,b=a.promise,c=a._input,d=[];for(var e in c)b._state===_c&&Object.prototype.hasOwnProperty.call(c,e)&&d.push({position:e,entry:c[e]});var f=d.length;a._remaining=f;for(var g,h=0;b._state===_c&&f>h;h++)g=d[h],a._eachEntry(g.entry,g.position)},P.prototype=Zc(O.prototype),P.prototype._superConstructor=F,P.prototype._makeResult=E,P.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var gd,hd,id=0,jd="undefined"!=typeof window?window:void 0,kd=jd||{},ld=kd.MutationObserver||kd.WebKitMutationObserver,md="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),nd="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,od=new Array(1e3);if(hd=md?R():ld?T():nd?U():void 0===jd&&"function"==typeof $?X():V(),Vc.async=Q,Vc.after=function(a){setTimeout(a,0)},"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var pd=window.__PROMISE_INSTRUMENTATION__;e("instrument",!0);for(var qd in pd)pd.hasOwnProperty(qd)&&Y(qd,pd[qd])}var rd=b(function(a){var b=ba,c=b.JSON||(b.JSON={stringify:JSON.stringify});a.exports=function(a){return c.stringify.apply(c,arguments);
}}),sd=rd&&"object"==typeof rd&&"default"in rd?rd["default"]:rd,td=b(function(a){a.exports={"default":sd,__esModule:!0}}),ud=td&&"object"==typeof td&&"default"in td?td["default"]:td,vd=b(function(a){var b=rb("iterator"),c=!1;try{var d=[7][b]();d["return"]=function(){c=!0},Array.from(d,function(){throw 2})}catch(e){}a.exports=function(a,d){if(!d&&!c)return!1;var e=!1;try{var f=[7],g=f[b]();g.next=function(){e=!0},f[b]=function(){return g},a(f)}catch(h){}return e}}),wd=vd&&"object"==typeof vd&&"default"in vd?vd["default"]:vd,xd=b(function(a){var b=va,c=rb("toStringTag"),d="Arguments"==b(function(){return arguments}()),e=function(a,b){try{return a[b]}catch(c){}};a.exports=function(a){var f,g,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(g=e(f=Object(a),c))?g:d?b(f):"Object"==(h=b(f))&&"function"==typeof f.callee?"Arguments":h}}),yd=xd&&"object"==typeof xd&&"default"in xd?xd["default"]:xd,zd=b(function(a){var b=yd,c=rb("iterator"),d=pc;a.exports=ba.getIteratorMethod=function(a){return void 0!=a?a[c]||a["@@iterator"]||d[b(a)]:void 0}}),Ad=zd&&"object"==typeof zd&&"default"in zd?zd["default"]:zd,Bd=b(function(a){var b=pc,c=rb("iterator"),d=Array.prototype;a.exports=function(a){return void 0!==a&&(b.Array===a||d[c]===a)}}),Cd=Bd&&"object"==typeof Bd&&"default"in Bd?Bd["default"]:Bd,Dd=b(function(a){var b=Za;a.exports=function(a,c,d,e){try{return e?c(b(d)[0],d[1]):c(d)}catch(f){var g=a["return"];throw void 0!==g&&b(g.call(a)),f}}}),Ed=Dd&&"object"==typeof Dd&&"default"in Dd?Dd["default"]:Dd,Fd=(b(function(a){var b=fb,c=hb,d=xb,e=Ed,f=Cd,g=ra,h=Ad;c(c.S+c.F*!wd(function(a){Array.from(a)}),"Array",{from:function(a){var c,i,j,k,l=d(a),m="function"==typeof this?this:Array,n=arguments.length,o=n>1?arguments[1]:void 0,p=void 0!==o,q=0,r=h(l);if(p&&(o=b(o,n>2?arguments[2]:void 0,2)),void 0==r||m==Array&&f(r))for(c=g(l.length),i=new m(c);c>q;q++)i[q]=p?o(l[q],q):l[q];else for(k=r.call(l),i=new m;!(j=k.next()).done;q++)i[q]=p?e(k,o,[j.value,q],!0):j.value;return i.length=q,i}})}),b(function(a){a.exports=ba.Array.from})),Gd=Fd&&"object"==typeof Fd&&"default"in Fd?Fd["default"]:Fd,Hd=b(function(a){a.exports={"default":Gd,__esModule:!0}}),Id=Hd&&"object"==typeof Hd&&"default"in Hd?Hd["default"]:Hd,Jd=b(function(a,b){function c(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var d=Id,e=c(d);b["default"]=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return(0,e["default"])(a)}}),Kd=Jd&&"object"==typeof Jd&&"default"in Jd?Jd["default"]:Jd,Ld=b(function(a){var b=fb,c=Ed,d=Cd,e=Za,f=ra,g=Ad;a.exports=function(a,h,i,j,k){var l,m,n,o=k?function(){return a}:g(a),p=b(i,j,h?2:1),q=0;if("function"!=typeof o)throw TypeError(a+" is not iterable!");if(d(o))for(l=f(a.length);l>q;q++)h?p(e(m=a[q])[0],m[1]):p(a[q]);else for(n=o.call(a);!(m=n.next()).done;)c(n,p,m.value,h)}}),Md=Ld&&"object"==typeof Ld&&"default"in Ld?Ld["default"]:Ld,Nd=b(function(a){var b=Md;a.exports=function(a,c){var d=[];return b(a,!1,d.push,d,c),d}}),Od=Nd&&"object"==typeof Nd&&"default"in Nd?Nd["default"]:Nd,Pd=b(function(a){var b=yd,c=Od;a.exports=function(a){return function(){if(b(this)!=a)throw TypeError(a+"#toJSON isn't generic");return c(this)}}}),Qd=Pd&&"object"==typeof Pd&&"default"in Pd?Pd["default"]:Pd,Rd=(b(function(a){var b=hb;b(b.P+b.R,"Set",{toJSON:Qd("Set")})}),b(function(a){a.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}})),Sd=Rd&&"object"==typeof Rd&&"default"in Rd?Rd["default"]:Rd,Td=b(function(a){var b=bb;a.exports=function(a,c,d){for(var e in c)d&&a[e]?a[e]=c[e]:b(a,e,c[e]);return a}}),Ud=Td&&"object"==typeof Td&&"default"in Td?Td["default"]:Td,Vd=b(function(a){var b=ha,c=hb,d=hc,e=La,f=bb,g=Ud,h=Md,i=Sd,j=Ra,k=fc,l=_a.f,m=zb(0),n=Na;a.exports=function(a,o,p,q,r,s){var t=b[a],u=t,v=r?"set":"add",w=u&&u.prototype,x={};return n&&"function"==typeof u&&(s||w.forEach&&!e(function(){(new u).entries().next()}))?(u=o(function(b,c){i(b,u,a,"_c"),b._c=new t,void 0!=c&&h(c,r,b[v],b)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(a){var b="add"==a||"set"==a;a in w&&(!s||"clear"!=a)&&f(u.prototype,a,function(c,d){if(i(this,u,a),!b&&s&&!j(c))return"get"==a?void 0:!1;var e=this._c[a](0===c?0:c,d);return b?this:e})}),"size"in w&&l(u.prototype,"size",{get:function(){return this._c.size}})):(u=q.getConstructor(o,a,r,v),g(u.prototype,p),d.NEED=!0),k(u,a),x[a]=u,c(c.G+c.W+c.F,x),s||q.setStrong(u,a,r),u}}),Wd=Vd&&"object"==typeof Vd&&"default"in Vd?Vd["default"]:Vd,Xd=b(function(a){var b=ha,c=ba,d=_a,e=Na,f=rb("species");a.exports=function(a){var g="function"==typeof c[a]?c[a]:b[a];e&&g&&!g[f]&&d.f(g,f,{configurable:!0,get:function(){return this}})}}),Yd=Xd&&"object"==typeof Xd&&"default"in Xd?Xd["default"]:Xd,Zd=b(function(a){var b=_a.f,c=_b,d=Ud,e=fb,f=Sd,g=ta,h=Md,i=vc,j=xc,k=Yd,l=Na,m=hc.fastKey,n=l?"_s":"size",o=function(a,b){var c,d=m(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};a.exports={getConstructor:function(a,i,j,k){var m=a(function(a,b){f(a,m,i,"_i"),a._i=c(null),a._f=void 0,a._l=void 0,a[n]=0,void 0!=b&&h(b,j,a[k],a)});return d(m.prototype,{clear:function(){for(var a=this,b=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete b[c.i];a._f=a._l=void 0,a[n]=0},"delete":function(a){var b=this,c=o(b,a);if(c){var d=c.n,e=c.p;delete b._i[c.i],c.r=!0,e&&(e.n=d),d&&(d.p=e),b._f==c&&(b._f=d),b._l==c&&(b._l=e),b[n]--}return!!c},forEach:function(a){f(this,m,"forEach");for(var b,c=e(a,arguments.length>1?arguments[1]:void 0,3);b=b?b.n:this._f;)for(c(b.v,b.k,this);b&&b.r;)b=b.p},has:function(a){return!!o(this,a)}}),l&&b(m.prototype,"size",{get:function(){return g(this[n])}}),m},def:function(a,b,c){var d,e,f=o(a,b);return f?f.v=c:(a._l=f={i:e=m(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[n]++,"F"!==e&&(a._i[e]=f)),a},getEntry:o,setStrong:function(a,b,c){i(a,b,function(a,b){this._t=a,this._k=b,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?j(0,c.k):"values"==b?j(0,c.v):j(0,[c.k,c.v]):(a._t=void 0,j(1))},c?"entries":"values",!c,!0),k(b)}}}),$d=Zd&&"object"==typeof Zd&&"default"in Zd?Zd["default"]:Zd,_d=(b(function(a){var b=$d;a.exports=Wd("Set",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return b.def(this,a=0===a?0:a,a)}},b)}),b(function(a){a.exports=ba.Set})),ae=_d&&"object"==typeof _d&&"default"in _d?_d["default"]:_d,be=b(function(a){a.exports={"default":ae,__esModule:!0}}),ce=be&&"object"==typeof be&&"default"in be?be["default"]:be,de=(b(function(a){var b=hb;b(b.S+b.F*!Na,"Object",{defineProperty:_a.f})}),b(function(a){var b=ba.Object;a.exports=function(a,c,d){return b.defineProperty(a,c,d)}})),ee=de&&"object"==typeof de&&"default"in de?de["default"]:de,fe=b(function(a){a.exports={"default":ee,__esModule:!0}}),ge=fe&&"object"==typeof fe&&"default"in fe?fe["default"]:fe,he=b(function(a,b){function c(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var d=ge,e=c(d);b["default"]=function(a,b,c){return b in a?(0,e["default"])(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}}),ie=he&&"object"==typeof he&&"default"in he?he["default"]:he,je=(b(function(a){var b=xb,c=Jb;jb("keys",function(){return function(a){return c(b(a))}})}),b(function(a){a.exports=ba.Object.keys})),ke=je&&"object"==typeof je&&"default"in je?je["default"]:je,le=b(function(a){a.exports={"default":ke,__esModule:!0}}),me=le&&"object"==typeof le&&"default"in le?le["default"]:le,ne=b(function(a){function b(a){return!!a&&"object"==typeof a}a.exports=b}),oe=ne&&"object"==typeof ne&&"default"in ne?ne["default"]:ne,pe=b(function(a){function b(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(c){}return b}a.exports=b}),qe=pe&&"object"==typeof pe&&"default"in pe?pe["default"]:pe,re=b(function(a){function b(a){if(!d(a)||i.call(a)!=e||c(a))return!1;var b=j(a);if(null===b)return!0;var f=b.constructor;return"function"==typeof f&&f instanceof f&&g.call(f)==h}var c=qe,d=oe,e="[object Object]",f=Object.prototype,g=Function.prototype.toString,h=g.call(Object),i=f.toString,j=Object.getPrototypeOf;a.exports=b}),se=re&&"object"==typeof re&&"default"in re?re["default"]:re,te=b(function(a){function b(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*j;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*h;case"minutes":case"minute":case"mins":case"min":case"m":return c*g;case"seconds":case"second":case"secs":case"sec":case"s":return c*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function c(a){return a>=i?Math.round(a/i)+"d":a>=h?Math.round(a/h)+"h":a>=g?Math.round(a/g)+"m":a>=f?Math.round(a/f)+"s":a+"ms"}function d(a){return e(a,i,"day")||e(a,h,"hour")||e(a,g,"minute")||e(a,f,"second")||a+" ms"}function e(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var f=1e3,g=60*f,h=60*g,i=24*h,j=365.25*i;a.exports=function(a,e){return e=e||{},"string"==typeof a?b(a):e["long"]?d(a):c(a)}}),ue=te&&"object"==typeof te&&"default"in te?te["default"]:te,ve=b(function(a,b){function c(){return b.colors[j++%b.colors.length]}function d(a){function d(){}function e(){var a=e,d=+new Date,f=d-(i||d);a.diff=f,a.prev=i,a.curr=d,i=d,null==a.useColors&&(a.useColors=b.useColors()),null==a.color&&a.useColors&&(a.color=c());var g=Array.prototype.slice.call(arguments);g[0]=b.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(c,d){if("%%"===c)return c;h++;var e=b.formatters[d];if("function"==typeof e){var f=g[h];c=e.call(a,f),g.splice(h,1),h--}return c}),"function"==typeof b.formatArgs&&(g=b.formatArgs.apply(a,g));var j=e.log||b.log||console.log.bind(console);j.apply(a,g)}d.enabled=!1,e.enabled=!0;var f=b.enabled(a)?e:d;return f.namespace=a,f}function e(a){b.save(a);for(var c=(a||"").split(/[\s,]+/),d=c.length,e=0;d>e;e++)c[e]&&(a=c[e].replace(/\*/g,".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$")))}function f(){b.enable("")}function g(a){var c,d;for(c=0,d=b.skips.length;d>c;c++)if(b.skips[c].test(a))return!1;for(c=0,d=b.names.length;d>c;c++)if(b.names[c].test(a))return!0;return!1}function h(a){return a instanceof Error?a.stack||a.message:a}b=a.exports=d,b.coerce=h,b.disable=f,b.enable=e,b.enabled=g,b.humanize=ue,b.names=[],b.skips=[],b.formatters={};var i,j=0}),we=ve&&"object"==typeof ve&&"default"in ve?ve["default"]:ve,xe=b(function(a,b){function c(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function d(){var a=arguments,c=this.useColors;if(a[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+a[0]+(c?"%c ":" ")+"+"+b.humanize(this.diff),!c)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function e(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function f(a){try{null==a?b.storage.removeItem("debug"):b.storage.debug=a}catch(c){}}function g(){var a;try{a=b.storage.debug}catch(c){}return a}function h(){try{return window.localStorage}catch(a){}}b=a.exports=we,b.log=e,b.formatArgs=d,b.save=f,b.load=g,b.useColors=c,b.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:h(),b.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],b.formatters.j=function(a){return JSON.stringify(a)},b.enable(g())}),ye=xe&&"object"==typeof xe&&"default"in xe?xe["default"]:xe,ze=function Eg(a){var b=new L(a[0]);return 1===a.length?b:b["catch"](function(){return Eg(a.slice(1))})},Ae=function(a){return function(b){return a(b),b}},Be=ye("LC:Cache"),Ce=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?"anonymous":arguments[0];Rb(this,a),this.name=b,this._map={}}return a.prototype.get=function(a){var b=this._map[a];if(b){var c=b.expiredAt&&b.expiredAt<Date.now();if(!c)return Be("["+this.name+"] hit: "+a+" "+b.value),b.value;Be("["+this.name+"] expired: "+a)}return Be("["+this.name+"] missed: "+a),null},a.prototype.set=function(a,b,c){Be("["+this.name+"] set: "+a+" "+b+" "+c);var d=this._map[a]={value:b};"number"==typeof c&&(d.expiredAt=Date.now()+c)},a}(),De=function(a){return a?"string"==typeof a?new Date(a):"Date"===a.__type&&a.iso?new Date(a.iso):a:a},Ee=function(a,b){return me(b).reduce(function(c,d){var e=a[d]||d;return Pb(c,ie({},e,b[d]))},{})},Fe=function(a,b){return Id(new ce([].concat(Kd(a),Kd(b))))},Ge=function(a,b){return Id(function(b){return new ce(a.filter(function(a){return!b.has(a)}))}(new ce(b)))},He=function Fg(a){if(!se(a))return a;var b=Pb({},a);for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];null===d?delete b[c]:b[c]=Fg(d)}return b},Ie=function(a){return He(JSON.parse(ud(a)))},Je=b(function(a){function b(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function c(){}var d=Object.prototype.hasOwnProperty,e="function"!=typeof Object.create?"~":!1;c.prototype._events=void 0,c.prototype.eventNames=function(){var a,b=this._events,c=[];if(!b)return c;for(a in b)d.call(b,a)&&c.push(e?a.slice(1):a);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(b)):c},c.prototype.listeners=function(a,b){var c=e?e+a:a,d=this._events&&this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var f=0,g=d.length,h=new Array(g);g>f;f++)h[f]=d[f].fn;return h},c.prototype.emit=function(a,b,c,d,f,g){var h=e?e+a:a;if(!this._events||!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if("function"==typeof k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,f),!0;case 6:return k.fn.call(k.context,b,c,d,f,g),!0}for(j=1,i=new Array(l-1);l>j;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;n>j;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;default:if(!i)for(m=1,i=new Array(l-1);l>m;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},c.prototype.on=function(a,c,d){var f=new b(c,d||this),g=e?e+a:a;return this._events||(this._events=e?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],f]:this._events[g].push(f):this._events[g]=f,this},c.prototype.once=function(a,c,d){var f=new b(c,d||this,!0),g=e?e+a:a;return this._events||(this._events=e?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],f]:this._events[g].push(f):this._events[g]=f,this},c.prototype.removeListener=function(a,b,c,d){var f=e?e+a:a;if(!this._events||!this._events[f])return this;var g=this._events[f],h=[];if(b)if(g.fn)(g.fn!==b||d&&!g.once||c&&g.context!==c)&&h.push(g);else for(var i=0,j=g.length;j>i;i++)(g[i].fn!==b||d&&!g[i].once||c&&g[i].context!==c)&&h.push(g[i]);return h.length?this._events[f]=1===h.length?h[0]:h:delete this._events[f],this},c.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[e?e+a:a]:this._events=e?{}:Object.create(null),this):this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=e,"undefined"!=typeof a&&(a.exports=c)}),Ke=Je&&"object"==typeof Je&&"default"in Je?Je["default"]:Je,Le=b(function(a,b){!function(){var c={VERSION:"2.3.5",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(a,b){var d="string"==typeof a.initial?{state:a.initial}:a.initial,e=a.terminal||a["final"],f=b||a.target||{},g=a.events||[],h=a.callbacks||{},i={},j={},k=function(a){var b=a.from instanceof Array?a.from:a.from?[a.from]:[c.WILDCARD];i[a.name]=i[a.name]||{};for(var d=0;d<b.length;d++)j[b[d]]=j[b[d]]||[],j[b[d]].push(a.name),i[a.name][b[d]]=a.to||b[d]};d&&(d.event=d.event||"startup",k({name:d.event,from:"none",to:d.state}));for(var l=0;l<g.length;l++)k(g[l]);for(var m in i)i.hasOwnProperty(m)&&(f[m]=c.buildEvent(m,i[m]));for(var m in h)h.hasOwnProperty(m)&&(f[m]=h[m]);return f.current="none",f.is=function(a){return a instanceof Array?a.indexOf(this.current)>=0:this.current===a},f.can=function(a){return!this.transition&&(i[a].hasOwnProperty(this.current)||i[a].hasOwnProperty(c.WILDCARD))},f.cannot=function(a){return!this.can(a)},f.transitions=function(){return j[this.current]},f.isFinished=function(){return this.is(e)},f.error=a.error||function(a,b,c,d,e,f,g){throw g||f},d&&!d.defer&&f[d.event](),f},doCallback:function(a,b,d,e,f,g){if(b)try{return b.apply(a,[d,e,f].concat(g))}catch(h){return a.error(d,e,f,g,c.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",h)}},beforeAnyEvent:function(a,b,d,e,f){return c.doCallback(a,a.onbeforeevent,b,d,e,f)},afterAnyEvent:function(a,b,d,e,f){return c.doCallback(a,a.onafterevent||a.onevent,b,d,e,f)},leaveAnyState:function(a,b,d,e,f){return c.doCallback(a,a.onleavestate,b,d,e,f)},enterAnyState:function(a,b,d,e,f){return c.doCallback(a,a.onenterstate||a.onstate,b,d,e,f)},changeState:function(a,b,d,e,f){return c.doCallback(a,a.onchangestate,b,d,e,f)},beforeThisEvent:function(a,b,d,e,f){return c.doCallback(a,a["onbefore"+b],b,d,e,f)},afterThisEvent:function(a,b,d,e,f){return c.doCallback(a,a["onafter"+b]||a["on"+b],b,d,e,f)},leaveThisState:function(a,b,d,e,f){return c.doCallback(a,a["onleave"+d],b,d,e,f)},enterThisState:function(a,b,d,e,f){return c.doCallback(a,a["onenter"+e]||a["on"+e],b,d,e,f)},beforeEvent:function(a,b,d,e,f){return!1===c.beforeThisEvent(a,b,d,e,f)||!1===c.beforeAnyEvent(a,b,d,e,f)?!1:void 0},afterEvent:function(a,b,d,e,f){c.afterThisEvent(a,b,d,e,f),c.afterAnyEvent(a,b,d,e,f)},leaveState:function(a,b,d,e,f){var g=c.leaveThisState(a,b,d,e,f),h=c.leaveAnyState(a,b,d,e,f);return!1===g||!1===h?!1:c.ASYNC===g||c.ASYNC===h?c.ASYNC:void 0},enterState:function(a,b,d,e,f){c.enterThisState(a,b,d,e,f),c.enterAnyState(a,b,d,e,f)},buildEvent:function(a,b){return function(){var d=this.current,e=b[d]||b[c.WILDCARD]||d,f=Array.prototype.slice.call(arguments);if(this.transition)return this.error(a,d,e,f,c.Error.PENDING_TRANSITION,"event "+a+" inappropriate because previous transition did not complete");if(this.cannot(a))return this.error(a,d,e,f,c.Error.INVALID_TRANSITION,"event "+a+" inappropriate in current state "+this.current);if(!1===c.beforeEvent(this,a,d,e,f))return c.Result.CANCELLED;if(d===e)return c.afterEvent(this,a,d,e,f),c.Result.NOTRANSITION;var g=this;this.transition=function(){return g.transition=null,g.current=e,c.enterState(g,a,d,e,f),c.changeState(g,a,d,e,f),c.afterEvent(g,a,d,e,f),c.Result.SUCCEEDED},this.transition.cancel=function(){g.transition=null,c.afterEvent(g,a,d,e,f)};var h=c.leaveState(this,a,d,e,f);return!1===h?(this.transition=null,c.Result.CANCELLED):c.ASYNC===h?c.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof b?("undefined"!=typeof a&&a.exports&&(b=a.exports=c),b.StateMachine=c):"function"==typeof define&&define.amd?define(function(a){return c}):"undefined"!=typeof window?window.StateMachine=c:"undefined"!=typeof self&&(self.StateMachine=c)}()}),Me=Le&&"object"==typeof Le&&"default"in Le?Le["default"]:Le,Ne=ye("LC:WebSocketPlus"),Oe=Z.WebSocket||Z.MozWebSocket||$("ws"),Pe=6e4,Qe=18e4,Re=function(a){function b(c,d){if(Rb(this,b),Ne("initializing WebSocketPlus"),"undefined"==typeof Oe)throw new Error("WebSocket is undefined. Polyfill is required in this runtime.");var e=Hc(this,a.call(this));return"function"!=typeof c?e._getUrls=function(){return L.resolve(c)}:e._getUrls=c,e._protocol=d,e.init(),e._createWs(e._getUrls,e._protocol).then(function(){return e.open()},function(a){return e["throw"](a)}),e.__postponeTimers=e._postponeTimers.bind(e),e}return Tc(b,a),b.prototype._createWs=function(a,b){var c=this;return a().then(function(a){var d=a;return d instanceof Array||(d=[d]),ze(d.map(function(a){return function(d,e){Ne("connect ["+a+"] "+b);var f=b?new Oe(a,b):new Oe(a);f.binaryType=c.binaryType||"blob",f.onopen=function(){return d(f)},f.onerror=function(b){return e(b instanceof Error?b:new Error("Failed to connect ["+a+"]"))}}})).then(function(a){return c._ws=a,c._ws.onclose=c._handleClose.bind(c),c._ws.onmessage=c._handleMessage.bind(c),a})})},b.prototype._destroyWs=function(){var a=this._ws;a&&(a.onopen=a.onclose=a.onerror=a.onmessage=null,this._ws=null,a.close())},b.prototype.onopen=function(){Ne("open"),this.emit("open")},b.prototype.onconnected=function(){this._startConnectionKeeper()},b.prototype.onleaveconnected=function(){this._stopConnectionKeeper()},b.prototype.ondisconnect=function(){Ne("disconnect"),this._destroyWs(),this._retryCount=0,this.emit("disconnect"),this.retry()},b.prototype.onreconnect=function(){Ne("reconnect"),this.emit("reconnect")},b.prototype.onretry=function(){var a=this;setTimeout(function(){a.is("offline")&&(a._createWs(a._getUrls,a._protocol).then(function(){return a.reconnect()},function(){return a.retry()}),Ne("retry ["+a._retryCount+"]"),a.emit("retry",a._retryCount))},3e3*this._retryCount),this._retryCount++},b.prototype.onclose=function(){Ne("close"),this._ws.close()},b.prototype.onerror=function(a,b,c,d){Ne("error",d),this.emit("error",d)},b.prototype.ping=function(){this._ws.ping?this._ws.ping():console.warn("The WebSocket implement does not support sending ping frame.\n        Override ping method to use application defined ping/pong mechanism.")},b.prototype._postponeTimers=function(){var a=this;Ne("_postponeTimers"),this._clearTimers(),this._heartbeatTimer=setInterval(function(){Ne("ping"),a.ping()},Pe),this._timeoutTimer=setTimeout(function(){Ne("timeout"),a.disconnect()},Qe)},b.prototype._clearTimers=function(){this._heartbeatTimer&&clearInterval(this._heartbeatTimer),this._timeoutTimer&&clearTimeout(this._timeoutTimer)},b.prototype._startConnectionKeeper=function(){Ne("start connection keeper");var a=this._ws.addListener||this._ws.addEventListener;a.call(this._ws,"message",this.__postponeTimers),this._postponeTimers()},b.prototype._stopConnectionKeeper=function(){Ne("stop connection keeper");var a=this._ws.removeListener||this._ws.removeEventListener;a.call(this._ws,"message",this.__postponeTimers),this._clearTimers()},b.prototype._handleClose=function(a){Ne("ws closed ["+a.code+"] "+a.reason),this.isFinished()||this.handleClose(a)},b.prototype.handleClose=function(){this.disconnect()},b.prototype.send=function(a){Ne("send",a),this._ws.send(a)},b.prototype._handleMessage=function(a){Ne("message",a.data),this.handleMessage(a.data)},b.prototype.handleMessage=function(a){this.emit("message",a)},b}(Ke);Me.create({target:Re.prototype,initial:{state:"initialized",event:"init",defer:!0},terminal:"closed",events:[{name:"open",from:"initialized",to:"connected"},{name:"disconnect",from:"connected",to:"offline"},{name:"retry",from:"offline",to:"offline"},{name:"reconnect",from:"offline",to:"connected"},{name:"close",from:["connected","offline"],to:"closed"},{name:"throw",from:"*",to:"error"}]});var Se={code:4100,message:"App not exists or realtime message service is disabled."},Te={code:4103,message:"Malformed clientId."},Ue={code:4110,message:"Access denied by domain whitelist."},Ve={code:4111},We=function(a){var b=a.code,c=a.reason,d=a.appCode,e=a.detail,f=new Error(c||e);return Pb(f,{code:b,appCode:d,detail:e})},Xe={},Ye=b(function(a,b,c){!function(b,c){"function"==typeof define&&define.amd?define([],c):"function"==typeof $&&"object"==typeof a&&a&&a.exports?a.exports=c():(b.dcodeIO=b.dcodeIO||{}).Long=c()}(_,function(){function a(a,b,c){this.low=0|a,this.high=0|b,this.unsigned=!!c}function b(a){return(a&&a.__isLong__)===!0}function c(a,b){var c,d,f;return b?(a>>>=0,(f=a>=0&&256>a)&&(d=i[a])?d:(c=e(a,0>(0|a)?-1:0,!0),f&&(i[a]=c),c)):(a|=0,(f=a>=-128&&128>a)&&(d=h[a])?d:(c=e(a,0>a?-1:0,!1),f&&(h[a]=c),c))}function d(a,b){if(isNaN(a)||!isFinite(a))return b?q:p;if(b){if(0>a)return q;if(a>=m)return v}else{if(-n>=a)return w;if(a+1>=n)return u}return 0>a?d(-a,b).neg():e(a%l|0,a/l|0,b)}function e(b,c,d){return new a(b,c,d)}function f(a,b,c){if(0===a.length)throw Error("empty string");if("NaN"===a||"Infinity"===a||"+Infinity"===a||"-Infinity"===a)return p;if("number"==typeof b&&(c=b,b=!1),c=c||10,2>c||c>36)throw RangeError("radix");var e;if((e=a.indexOf("-"))>0)throw Error("interior hyphen");if(0===e)return f(a.substring(1),b,c).neg();for(var g=d(j(c,8)),h=p,i=0;i<a.length;i+=8){var k=Math.min(8,a.length-i),l=parseInt(a.substring(i,i+k),c);if(8>k){var m=d(j(c,k));h=h.mul(m).add(d(l))}else h=h.mul(g),h=h.add(d(l))}return h.unsigned=b,h}function g(b){return b instanceof a?b:"number"==typeof b?d(b):"string"==typeof b?f(b):e(b.low,b.high,b.unsigned)}a.__isLong__,Object.defineProperty(a.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),a.isLong=b;var h={},i={};a.fromInt=c,a.fromNumber=d,a.fromBits=e;var j=Math.pow;a.fromString=f,a.fromValue=g;var k=1<<24,l=4294967296,m=0x10000000000000000,n=m/2,o=c(k),p=c(0);a.ZERO=p;var q=c(0,!0);a.UZERO=q;var r=c(1);a.ONE=r;var s=c(1,!0);a.UONE=s;var t=c(-1);a.NEG_ONE=t;var u=e(-1,2147483647,!1);a.MAX_VALUE=u;var v=e(-1,-1,!0);a.MAX_UNSIGNED_VALUE=v;var w=e(0,-2147483648,!1);a.MIN_VALUE=w;var x=a.prototype;return x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},x.toString=function(a){if(a=a||10,2>a||a>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var b=d(a),c=this.div(b),e=c.mul(b).sub(this);return c.toString(a)+e.toInt().toString(a)}return"-"+this.neg().toString(a)}for(var f=d(j(a,6),this.unsigned),g=this,h="";;){var i=g.div(f),k=g.sub(i.mul(f)).toInt()>>>0,l=k.toString(a);if(g=i,g.isZero())return l+h;for(;l.length<6;)l="0"+l;h=""+l+h}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var a=0!=this.high?this.high:this.low,b=31;b>0&&0==(a&1<<b);b--);return 0!=this.high?b+33:b+1},x.isZero=function(){return 0===this.high&&0===this.low},x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1===(1&this.low)},x.isEven=function(){return 0===(1&this.low)},x.equals=function(a){return b(a)||(a=g(a)),this.unsigned!==a.unsigned&&this.high>>>31===1&&a.high>>>31===1?!1:this.high===a.high&&this.low===a.low},x.eq=x.equals,x.notEquals=function(a){return!this.eq(a)},x.neq=x.notEquals,x.lessThan=function(a){return this.comp(a)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(a){return this.comp(a)<=0},x.lte=x.lessThanOrEqual,x.greaterThan=function(a){return this.comp(a)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(a){return this.comp(a)>=0},x.gte=x.greaterThanOrEqual,x.compare=function(a){if(b(a)||(a=g(a)),this.eq(a))return 0;var c=this.isNegative(),d=a.isNegative();return c&&!d?-1:!c&&d?1:this.unsigned?a.high>>>0>this.high>>>0||a.high===this.high&&a.low>>>0>this.low>>>0?-1:1:this.sub(a).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(r)},x.neg=x.negate,x.add=function(a){b(a)||(a=g(a));var c=this.high>>>16,d=65535&this.high,f=this.low>>>16,h=65535&this.low,i=a.high>>>16,j=65535&a.high,k=a.low>>>16,l=65535&a.low,m=0,n=0,o=0,p=0;return p+=h+l,o+=p>>>16,p&=65535,o+=f+k,n+=o>>>16,o&=65535,n+=d+j,m+=n>>>16,n&=65535,m+=c+i,m&=65535,e(o<<16|p,m<<16|n,this.unsigned)},x.subtract=function(a){return b(a)||(a=g(a)),this.add(a.neg())},x.sub=x.subtract,x.multiply=function(a){if(this.isZero())return p;if(b(a)||(a=g(a)),a.isZero())return p;if(this.eq(w))return a.isOdd()?w:p;if(a.eq(w))return this.isOdd()?w:p;if(this.isNegative())return a.isNegative()?this.neg().mul(a.neg()):this.neg().mul(a).neg();if(a.isNegative())return this.mul(a.neg()).neg();if(this.lt(o)&&a.lt(o))return d(this.toNumber()*a.toNumber(),this.unsigned);var c=this.high>>>16,f=65535&this.high,h=this.low>>>16,i=65535&this.low,j=a.high>>>16,k=65535&a.high,l=a.low>>>16,m=65535&a.low,n=0,q=0,r=0,s=0;return s+=i*m,r+=s>>>16,s&=65535,r+=h*m,q+=r>>>16,r&=65535,r+=i*l,q+=r>>>16,r&=65535,q+=f*m,n+=q>>>16,q&=65535,q+=h*l,n+=q>>>16,q&=65535,q+=i*k,n+=q>>>16,q&=65535,n+=c*m+f*l+h*k+i*j,n&=65535,e(r<<16|s,n<<16|q,this.unsigned)},x.mul=x.multiply,x.divide=function(a){if(b(a)||(a=g(a)),a.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?q:p;var c,e,f;if(this.eq(w)){if(a.eq(r)||a.eq(t))return w;if(a.eq(w))return r;var h=this.shr(1);return c=h.div(a).shl(1),c.eq(p)?a.isNegative()?r:t:(e=this.sub(a.mul(c)),f=c.add(e.div(a)))}if(a.eq(w))return this.unsigned?q:p;if(this.isNegative())return a.isNegative()?this.neg().div(a.neg()):this.neg().div(a).neg();if(a.isNegative())return this.div(a.neg()).neg();for(f=p,e=this;e.gte(a);){c=Math.max(1,Math.floor(e.toNumber()/a.toNumber()));for(var i=Math.ceil(Math.log(c)/Math.LN2),k=48>=i?1:j(2,i-48),l=d(c),m=l.mul(a);m.isNegative()||m.gt(e);)c-=k,l=d(c,this.unsigned),m=l.mul(a);l.isZero()&&(l=r),f=f.add(l),e=e.sub(m)}return f},x.div=x.divide,x.modulo=function(a){return b(a)||(a=g(a)),this.sub(this.div(a).mul(a))},x.mod=x.modulo,x.not=function(){return e(~this.low,~this.high,this.unsigned)},x.and=function(a){return b(a)||(a=g(a)),e(this.low&a.low,this.high&a.high,this.unsigned)},x.or=function(a){return b(a)||(a=g(a)),e(this.low|a.low,this.high|a.high,this.unsigned)},x.xor=function(a){return b(a)||(a=g(a)),e(this.low^a.low,this.high^a.high,this.unsigned)},x.shiftLeft=function(a){return b(a)&&(a=a.toInt()),0===(a&=63)?this:32>a?e(this.low<<a,this.high<<a|this.low>>>32-a,this.unsigned):e(0,this.low<<a-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(a){return b(a)&&(a=a.toInt()),0===(a&=63)?this:32>a?e(this.low>>>a|this.high<<32-a,this.high>>a,this.unsigned):e(this.high>>a-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(a){if(b(a)&&(a=a.toInt()),a&=63,0===a)return this;var c=this.high;if(32>a){var d=this.low;return e(d>>>a|c<<32-a,c>>>a,this.unsigned)}return 32===a?e(c,0,this.unsigned):e(c>>>a-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.toSigned=function(){return this.unsigned?e(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:e(this.low,this.high,!0)},a})}),Ze=Ye&&"object"==typeof Ye&&"default"in Ye?Ye["default"]:Ye,$e=b(function(a,b,c){!function(b,c){"function"==typeof define&&define.amd?define(["long"],c):"function"==typeof $&&"object"==typeof a&&a&&a.exports?a.exports=function(){var a;try{a=Ze}catch(b){}return c(a)}():(b.dcodeIO=b.dcodeIO||{}).ByteBuffer=c(b.dcodeIO.Long)}(_,function(a){function b(a){var b=0;return function(){return b<a.length?a.charCodeAt(b++):null}}function c(){var a=[],b=[];return function(){return 0===arguments.length?b.join("")+i.apply(String,a):(a.length+arguments.length>1024&&(b.push(i.apply(String,a)),a.length=0),void Array.prototype.push.apply(a,arguments))}}function d(a,b,c,d,e){
var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)}function e(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}var f=function(a,b,c){if("undefined"==typeof a&&(a=f.DEFAULT_CAPACITY),"undefined"==typeof b&&(b=f.DEFAULT_ENDIAN),"undefined"==typeof c&&(c=f.DEFAULT_NOASSERT),!c){if(a=0|a,0>a)throw RangeError("Illegal capacity");b=!!b,c=!!c}this.buffer=0===a?h:new ArrayBuffer(a),this.view=0===a?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=a,this.littleEndian=b,this.noAssert=c};f.VERSION="5.0.1",f.LITTLE_ENDIAN=!0,f.BIG_ENDIAN=!1,f.DEFAULT_CAPACITY=16,f.DEFAULT_ENDIAN=f.BIG_ENDIAN,f.DEFAULT_NOASSERT=!1,f.Long=a||null;var g=f.prototype;g.__isByteBuffer__,Object.defineProperty(g,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var h=new ArrayBuffer(0),i=String.fromCharCode;f.accessor=function(){return Uint8Array},f.allocate=function(a,b,c){return new f(a,b,c)},f.concat=function(a,b,c,d){"boolean"!=typeof b&&"string"==typeof b||(d=c,c=b,b=void 0);for(var e,g=0,h=0,i=a.length;i>h;++h)f.isByteBuffer(a[h])||(a[h]=f.wrap(a[h],b)),e=a[h].limit-a[h].offset,e>0&&(g+=e);if(0===g)return new f(0,c,d);var j,k=new f(g,c,d);for(h=0;i>h;)j=a[h++],e=j.limit-j.offset,0>=e||(k.view.set(j.view.subarray(j.offset,j.limit),k.offset),k.offset+=e);return k.limit=k.offset,k.offset=0,k},f.isByteBuffer=function(a){return(a&&a.__isByteBuffer__)===!0},f.type=function(){return ArrayBuffer},f.wrap=function(a,b,c,d){if("string"!=typeof b&&(d=c,c=b,b=void 0),"string"==typeof a)switch("undefined"==typeof b&&(b="utf8"),b){case"base64":return f.fromBase64(a,c);case"hex":return f.fromHex(a,c);case"binary":return f.fromBinary(a,c);case"utf8":return f.fromUTF8(a,c);case"debug":return f.fromDebug(a,c);default:throw Error("Unsupported encoding: "+b)}if(null===a||"object"!=typeof a)throw TypeError("Illegal buffer");var e;if(f.isByteBuffer(a))return e=g.clone.call(a),e.markedOffset=-1,e;if(a instanceof Uint8Array)e=new f(0,c,d),a.length>0&&(e.buffer=a.buffer,e.offset=a.byteOffset,e.limit=a.byteOffset+a.byteLength,e.view=new Uint8Array(a.buffer));else if(a instanceof ArrayBuffer)e=new f(0,c,d),a.byteLength>0&&(e.buffer=a,e.offset=0,e.limit=a.byteLength,e.view=a.byteLength>0?new Uint8Array(a):null);else{if("[object Array]"!==Object.prototype.toString.call(a))throw TypeError("Illegal buffer");e=new f(a.length,c,d),e.limit=a.length;for(var h=0;h<a.length;++h)e.view[h]=a[h]}return e},g.writeBitSet=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if(!(a instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var d,e=b,f=a.length,g=f>>3,h=0;for(b+=this.writeVarint32(f,b);g--;)d=1&!!a[h++]|(1&!!a[h++])<<1|(1&!!a[h++])<<2|(1&!!a[h++])<<3|(1&!!a[h++])<<4|(1&!!a[h++])<<5|(1&!!a[h++])<<6|(1&!!a[h++])<<7,this.writeByte(d,b++);if(f>h){var i=0;for(d=0;f>h;)d|=(1&!!a[h++])<<i++;this.writeByte(d,b++)}return c?(this.offset=b,this):b-e},g.readBitSet=function(a){var b="undefined"==typeof a;b&&(a=this.offset);var c,d=this.readVarint32(a),e=d.value,f=e>>3,g=0,h=[];for(a+=d.length;f--;)c=this.readByte(a++),h[g++]=!!(1&c),h[g++]=!!(2&c),h[g++]=!!(4&c),h[g++]=!!(8&c),h[g++]=!!(16&c),h[g++]=!!(32&c),h[g++]=!!(64&c),h[g++]=!!(128&c);if(e>g){var i=0;for(c=this.readByte(a++);e>g;)h[g++]=!!(c>>i++&1)}return b&&(this.offset=a),h},g.readBytes=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+a>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+"+a+") <= "+this.buffer.byteLength)}var d=this.slice(b,b+a);return c&&(this.offset+=a),d},g.writeBytes=g.append,g.writeInt8=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view[b]=a,c&&(this.offset+=1),this},g.writeByte=g.writeInt8,g.readInt8=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.view[a];return 128===(128&c)&&(c=-(255-c+1)),b&&(this.offset+=1),c},g.readByte=g.readInt8,g.writeUint8=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view[b]=a,c&&(this.offset+=1),this},g.writeUInt8=g.writeUint8,g.readUint8=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.view[a];return b&&(this.offset+=1),c},g.readUInt8=g.readUint8,g.writeInt16=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.littleEndian?(this.view[b+1]=(65280&a)>>>8,this.view[b]=255&a):(this.view[b]=(65280&a)>>>8,this.view[b+1]=255&a),c&&(this.offset+=2),this},g.writeShort=g.writeInt16,g.readInt16=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a],c|=this.view[a+1]<<8):(c=this.view[a]<<8,c|=this.view[a+1]),32768===(32768&c)&&(c=-(65535-c+1)),b&&(this.offset+=2),c},g.readShort=g.readInt16,g.writeUint16=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.littleEndian?(this.view[b+1]=(65280&a)>>>8,this.view[b]=255&a):(this.view[b]=(65280&a)>>>8,this.view[b+1]=255&a),c&&(this.offset+=2),this},g.writeUInt16=g.writeUint16,g.readUint16=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a],c|=this.view[a+1]<<8):(c=this.view[a]<<8,c|=this.view[a+1]),b&&(this.offset+=2),c},g.readUInt16=g.readUint16,g.writeInt32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.littleEndian?(this.view[b+3]=a>>>24&255,this.view[b+2]=a>>>16&255,this.view[b+1]=a>>>8&255,this.view[b]=255&a):(this.view[b]=a>>>24&255,this.view[b+1]=a>>>16&255,this.view[b+2]=a>>>8&255,this.view[b+3]=255&a),c&&(this.offset+=4),this},g.writeInt=g.writeInt32,g.readInt32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a+2]<<16,c|=this.view[a+1]<<8,c|=this.view[a],c+=this.view[a+3]<<24>>>0):(c=this.view[a+1]<<16,c|=this.view[a+2]<<8,c|=this.view[a+3],c+=this.view[a]<<24>>>0),c|=0,b&&(this.offset+=4),c},g.readInt=g.readInt32,g.writeUint32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.littleEndian?(this.view[b+3]=a>>>24&255,this.view[b+2]=a>>>16&255,this.view[b+1]=a>>>8&255,this.view[b]=255&a):(this.view[b]=a>>>24&255,this.view[b+1]=a>>>16&255,this.view[b+2]=a>>>8&255,this.view[b+3]=255&a),c&&(this.offset+=4),this},g.writeUInt32=g.writeUint32,g.readUint32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=0;return this.littleEndian?(c=this.view[a+2]<<16,c|=this.view[a+1]<<8,c|=this.view[a],c+=this.view[a+3]<<24>>>0):(c=this.view[a+1]<<16,c|=this.view[a+2]<<8,c|=this.view[a+3],c+=this.view[a]<<24>>>0),b&&(this.offset+=4),c},g.readUInt32=g.readUint32,a&&(g.writeInt64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b)),c+=8;var e=this.buffer.byteLength;c>e&&this.resize((e*=2)>c?e:c),c-=8;var f=b.low,g=b.high;return this.littleEndian?(this.view[c+3]=f>>>24&255,this.view[c+2]=f>>>16&255,this.view[c+1]=f>>>8&255,this.view[c]=255&f,c+=4,this.view[c+3]=g>>>24&255,this.view[c+2]=g>>>16&255,this.view[c+1]=g>>>8&255,this.view[c]=255&g):(this.view[c]=g>>>24&255,this.view[c+1]=g>>>16&255,this.view[c+2]=g>>>8&255,this.view[c+3]=255&g,c+=4,this.view[c]=f>>>24&255,this.view[c+1]=f>>>16&255,this.view[c+2]=f>>>8&255,this.view[c+3]=255&f),d&&(this.offset+=8),this},g.writeLong=g.writeInt64,g.readInt64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}var d=0,e=0;this.littleEndian?(d=this.view[b+2]<<16,d|=this.view[b+1]<<8,d|=this.view[b],d+=this.view[b+3]<<24>>>0,b+=4,e=this.view[b+2]<<16,e|=this.view[b+1]<<8,e|=this.view[b],e+=this.view[b+3]<<24>>>0):(e=this.view[b+1]<<16,e|=this.view[b+2]<<8,e|=this.view[b+3],e+=this.view[b]<<24>>>0,b+=4,d=this.view[b+1]<<16,d|=this.view[b+2]<<8,d|=this.view[b+3],d+=this.view[b]<<24>>>0);var f=new a(d,e,!1);return c&&(this.offset+=8),f},g.readLong=g.readInt64,g.writeUint64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b)),c+=8;var e=this.buffer.byteLength;c>e&&this.resize((e*=2)>c?e:c),c-=8;var f=b.low,g=b.high;return this.littleEndian?(this.view[c+3]=f>>>24&255,this.view[c+2]=f>>>16&255,this.view[c+1]=f>>>8&255,this.view[c]=255&f,c+=4,this.view[c+3]=g>>>24&255,this.view[c+2]=g>>>16&255,this.view[c+1]=g>>>8&255,this.view[c]=255&g):(this.view[c]=g>>>24&255,this.view[c+1]=g>>>16&255,this.view[c+2]=g>>>8&255,this.view[c+3]=255&g,c+=4,this.view[c]=f>>>24&255,this.view[c+1]=f>>>16&255,this.view[c+2]=f>>>8&255,this.view[c+3]=255&f),d&&(this.offset+=8),this},g.writeUInt64=g.writeUint64,g.readUint64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}var d=0,e=0;this.littleEndian?(d=this.view[b+2]<<16,d|=this.view[b+1]<<8,d|=this.view[b],d+=this.view[b+3]<<24>>>0,b+=4,e=this.view[b+2]<<16,e|=this.view[b+1]<<8,e|=this.view[b],e+=this.view[b+3]<<24>>>0):(e=this.view[b+1]<<16,e|=this.view[b+2]<<8,e|=this.view[b+3],e+=this.view[b]<<24>>>0,b+=4,d=this.view[b+1]<<16,d|=this.view[b+2]<<8,d|=this.view[b+3],d+=this.view[b]<<24>>>0);var f=new a(d,e,!0);return c&&(this.offset+=8),f},g.readUInt64=g.readUint64),g.writeFloat32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,e(this.view,a,b,this.littleEndian,23,4),c&&(this.offset+=4),this},g.writeFloat=g.writeFloat32,g.readFloat32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=d(this.view,a,this.littleEndian,23,4);return b&&(this.offset+=4),c},g.readFloat=g.readFloat32,g.writeFloat64=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=8;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=8,e(this.view,a,b,this.littleEndian,52,8),c&&(this.offset+=8),this},g.writeDouble=g.writeFloat64,g.readFloat64=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+8) <= "+this.buffer.byteLength)}var c=d(this.view,a,this.littleEndian,52,8);return b&&(this.offset+=8),c},g.readDouble=g.readFloat64,f.MAX_VARINT32_BYTES=5,f.calculateVarint32=function(a){return a>>>=0,128>a?1:16384>a?2:1<<21>a?3:1<<28>a?4:5},f.zigZagEncode32=function(a){return((a|=0)<<1^a>>31)>>>0},f.zigZagDecode32=function(a){return a>>>1^-(1&a)|0},g.writeVarint32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var d,e=f.calculateVarint32(a);b+=e;var g=this.buffer.byteLength;for(b>g&&this.resize((g*=2)>b?g:b),b-=e,a>>>=0;a>=128;)d=127&a|128,this.view[b++]=d,a>>>=7;return this.view[b++]=a,c?(this.offset=b,this):e},g.writeVarint32ZigZag=function(a,b){return this.writeVarint32(f.zigZagEncode32(a),b)},g.readVarint32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c,d=0,e=0;do{if(!this.noAssert&&a>this.limit){var f=Error("Truncated");throw f.truncated=!0,f}c=this.view[a++],5>d&&(e|=(127&c)<<7*d),++d}while(0!==(128&c));return e|=0,b?(this.offset=a,e):{value:e,length:d}},g.readVarint32ZigZag=function(a){var b=this.readVarint32(a);return"object"==typeof b?b.value=f.zigZagDecode32(b.value):b=f.zigZagDecode32(b),b},a&&(f.MAX_VARINT64_BYTES=10,f.calculateVarint64=function(b){"number"==typeof b?b=a.fromNumber(b):"string"==typeof b&&(b=a.fromString(b));var c=b.toInt()>>>0,d=b.shiftRightUnsigned(28).toInt()>>>0,e=b.shiftRightUnsigned(56).toInt()>>>0;return 0==e?0==d?16384>c?128>c?1:2:1<<21>c?3:4:16384>d?128>d?5:6:1<<21>d?7:8:128>e?9:10},f.zigZagEncode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):b.unsigned!==!1&&(b=b.toSigned()),b.shiftLeft(1).xor(b.shiftRight(63)).toUnsigned()},f.zigZagDecode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):b.unsigned!==!1&&(b=b.toSigned()),b.shiftRightUnsigned(1).xor(b.and(a.ONE).toSigned().negate()).toSigned()},g.writeVarint64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if("string"==typeof b)b=a.fromString(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b?b=a.fromNumber(b,!1):"string"==typeof b?b=a.fromString(b,!1):b.unsigned!==!1&&(b=b.toSigned());var e=f.calculateVarint64(b),g=b.toInt()>>>0,h=b.shiftRightUnsigned(28).toInt()>>>0,i=b.shiftRightUnsigned(56).toInt()>>>0;c+=e;var j=this.buffer.byteLength;switch(c>j&&this.resize((j*=2)>c?j:c),c-=e,e){case 10:this.view[c+9]=i>>>7&1;case 9:this.view[c+8]=9!==e?128|i:127&i;case 8:this.view[c+7]=8!==e?h>>>21|128:h>>>21&127;case 7:this.view[c+6]=7!==e?h>>>14|128:h>>>14&127;case 6:this.view[c+5]=6!==e?h>>>7|128:h>>>7&127;case 5:this.view[c+4]=5!==e?128|h:127&h;case 4:this.view[c+3]=4!==e?g>>>21|128:g>>>21&127;case 3:this.view[c+2]=3!==e?g>>>14|128:g>>>14&127;case 2:this.view[c+1]=2!==e?g>>>7|128:g>>>7&127;case 1:this.view[c]=1!==e?128|g:127&g}return d?(this.offset+=e,this):e},g.writeVarint64ZigZag=function(a,b){return this.writeVarint64(f.zigZagEncode64(a),b)},g.readVarint64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+1) <= "+this.buffer.byteLength)}var d=b,e=0,f=0,g=0,h=0;if(h=this.view[b++],e=127&h,128&h&&(h=this.view[b++],e|=(127&h)<<7,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],e|=(127&h)<<14,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],e|=(127&h)<<21,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f=127&h,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f|=(127&h)<<7,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f|=(127&h)<<14,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],f|=(127&h)<<21,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],g=127&h,(128&h||this.noAssert&&"undefined"==typeof h)&&(h=this.view[b++],g|=(127&h)<<7,128&h||this.noAssert&&"undefined"==typeof h))))))))))throw Error("Buffer overrun");var i=a.fromBits(e|f<<28,f>>>4|g<<24,!1);return c?(this.offset=b,i):{value:i,length:b-d}},g.readVarint64ZigZag=function(b){var c=this.readVarint64(b);return c&&c.value instanceof a?c.value=f.zigZagDecode64(c.value):c=f.zigZagDecode64(c),c}),g.writeCString=function(a,c){var d="undefined"==typeof c;d&&(c=this.offset);var e,f=a.length;if(!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");for(e=0;f>e;++e)if(0===a.charCodeAt(e))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}f=k.calculateUTF16asUTF8(b(a))[1],c+=f+1;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=f+1,k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),this.view[c++]=0,d?(this.offset=c,this):f},g.readCString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var d,e=a,f=-1;return k.decodeUTF8toUTF16(function(){if(0===f)return null;if(a>=this.limit)throw RangeError("Illegal range: Truncated data, "+a+" < "+this.limit);return f=this.view[a++],0===f?null:f}.bind(this),d=c(),!0),b?(this.offset=a,d()):{string:d(),length:a-e}},g.writeIString=function(a,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=k.calculateUTF16asUTF8(b(a),this.noAssert)[1],c+=4+e;var g=this.buffer.byteLength;if(c>g&&this.resize((g*=2)>c?g:c),c-=4+e,this.littleEndian?(this.view[c+3]=e>>>24&255,this.view[c+2]=e>>>16&255,this.view[c+1]=e>>>8&255,this.view[c]=255&e):(this.view[c]=e>>>24&255,this.view[c+1]=e>>>16&255,this.view[c+2]=e>>>8&255,this.view[c+3]=255&e),c+=4,k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),c!==f+4+e)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+4+e));return d?(this.offset=c,this):c-f},g.readIString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=a,d=this.readUint32(a),e=this.readUTF8String(d,f.METRICS_BYTES,a+=4);return a+=e.length,b?(this.offset=a,e.string):{string:e.string,length:a-c}},f.METRICS_CHARS="c",f.METRICS_BYTES="b",g.writeUTF8String=function(a,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=k.calculateUTF16asUTF8(b(a))[1],c+=e;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=e,k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),d?(this.offset=c,this):c-f},g.writeString=g.writeUTF8String,f.calculateUTF8Chars=function(a){return k.calculateUTF16asUTF8(b(a))[0]},f.calculateUTF8Bytes=function(a){return k.calculateUTF16asUTF8(b(a))[1]},f.calculateString=f.calculateUTF8Bytes,g.readUTF8String=function(a,b,d){"number"==typeof b&&(d=b,b=void 0);var e="undefined"==typeof d;if(e&&(d=this.offset),"undefined"==typeof b&&(b=f.METRICS_CHARS),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal length: "+a+" (not an integer)");if(a|=0,"number"!=typeof d||d%1!==0)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,0>d||d+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+0) <= "+this.buffer.byteLength)}var g,h=0,i=d;if(b===f.METRICS_CHARS){if(g=c(),k.decodeUTF8(function(){return a>h&&d<this.limit?this.view[d++]:null}.bind(this),function(a){++h,k.UTF8toUTF16(a,g)}),h!==a)throw RangeError("Illegal range: Truncated data, "+h+" == "+a);return e?(this.offset=d,g()):{string:g(),length:d-i}}if(b===f.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof d||d%1!==0)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,0>d||d+a>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+"+a+") <= "+this.buffer.byteLength)}var j=d+a;if(k.decodeUTF8toUTF16(function(){return j>d?this.view[d++]:null}.bind(this),g=c(),this.noAssert),d!==j)throw RangeError("Illegal range: Truncated data, "+d+" == "+j);return e?(this.offset=d,g()):{string:g(),length:d-i}}throw TypeError("Unsupported metrics: "+b)},g.readString=g.readUTF8String,g.writeVString=function(a,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,g,h=c;e=k.calculateUTF16asUTF8(b(a),this.noAssert)[1],g=f.calculateVarint32(e),c+=g+e;var i=this.buffer.byteLength;if(c>i&&this.resize((i*=2)>c?i:c),c-=g+e,c+=this.writeVarint32(e,c),k.encodeUTF16toUTF8(b(a),function(a){this.view[c++]=a}.bind(this)),c!==h+e+g)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+e+g));return d?(this.offset=c,this):c-h},g.readVString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=a,d=this.readVarint32(a),e=this.readUTF8String(d.value,f.METRICS_BYTES,a+=d.length);return a+=e.length,b?(this.offset=a,e.string):{string:e.string,length:a-c}},g.append=function(a,b,c){"number"!=typeof b&&"string"==typeof b||(c=b,b=void 0);var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}a instanceof f||(a=f.wrap(a,b));var e=a.limit-a.offset;if(0>=e)return this;c+=e;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=e,this.view.set(a.view.subarray(a.offset,a.limit),c),a.offset+=e,d&&(this.offset+=e),this},g.appendTo=function(a,b){return a.append(this,b),this},g.assert=function(a){return this.noAssert=!a,this},g.capacity=function(){return this.buffer.byteLength},g.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},g.clone=function(a){var b=new f(0,this.littleEndian,this.noAssert);return a?(b.buffer=new ArrayBuffer(this.buffer.byteLength),b.view=new Uint8Array(b.buffer)):(b.buffer=this.buffer,b.view=this.view),b.offset=this.offset,b.markedOffset=this.markedOffset,b.limit=this.limit,b},g.compact=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(0===a&&b===this.buffer.byteLength)return this;var c=b-a;if(0===c)return this.buffer=h,this.view=null,this.markedOffset>=0&&(this.markedOffset-=a),this.offset=0,this.limit=0,this;var d=new ArrayBuffer(c),e=new Uint8Array(d);return e.set(this.view.subarray(a,b)),this.buffer=d,this.view=e,this.markedOffset>=0&&(this.markedOffset-=a),this.offset=0,this.limit=c,this},g.copy=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(a===b)return new f(0,this.littleEndian,this.noAssert);var c=b-a,d=new f(c,this.littleEndian,this.noAssert);return d.offset=0,d.limit=c,d.markedOffset>=0&&(d.markedOffset-=a),this.copyTo(d,0,a,b),d},g.copyTo=function(a,b,c,d){var e,g;if(!this.noAssert&&!f.isByteBuffer(a))throw TypeError("Illegal target: Not a ByteBuffer");if(b=(g="undefined"==typeof b)?a.offset:0|b,c=(e="undefined"==typeof c)?this.offset:0|c,d="undefined"==typeof d?this.limit:0|d,0>b||b>a.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+b+" <= "+a.buffer.byteLength);if(0>c||d>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+c+" <= "+this.buffer.byteLength);var h=d-c;return 0===h?a:(a.ensureCapacity(b+h),a.view.set(this.view.subarray(c,d),b),e&&(this.offset+=h),g&&(a.offset+=h),this)},g.ensureCapacity=function(a){var b=this.buffer.byteLength;return a>b?this.resize((b*=2)>a?b:a):this},g.fill=function(a,b,c){var d="undefined"==typeof b;if(d&&(b=this.offset),"string"==typeof a&&a.length>0&&(a=a.charCodeAt(0)),"undefined"==typeof b&&(b=this.offset),"undefined"==typeof c&&(c=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal begin: Not an integer");if(b>>>=0,"number"!=typeof c||c%1!==0)throw TypeError("Illegal end: Not an integer");if(c>>>=0,0>b||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}if(b>=c)return this;for(;c>b;)this.view[b++]=a;return d&&(this.offset=b),this},g.flip=function(){return this.limit=this.offset,this.offset=0,this},g.mark=function(a){if(a="undefined"==typeof a?this.offset:a,!this.noAssert){
if("number"!=typeof a||a%1!==0)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=a,this},g.order=function(a){if(!this.noAssert&&"boolean"!=typeof a)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!a,this},g.LE=function(a){return this.littleEndian="undefined"!=typeof a?!!a:!0,this},g.BE=function(a){return this.littleEndian="undefined"!=typeof a?!a:!1,this},g.prepend=function(a,b,c){"number"!=typeof b&&"string"==typeof b||(c=b,b=void 0);var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!==0)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}a instanceof f||(a=f.wrap(a,b));var e=a.limit-a.offset;if(0>=e)return this;var g=e-c;if(g>0){var h=new ArrayBuffer(this.buffer.byteLength+g),i=new Uint8Array(h);i.set(this.view.subarray(c,this.buffer.byteLength),e),this.buffer=h,this.view=i,this.offset+=g,this.markedOffset>=0&&(this.markedOffset+=g),this.limit+=g,c+=g}else{new Uint8Array(this.buffer)}return this.view.set(a.view.subarray(a.offset,a.limit),c-e),a.offset=a.limit,d&&(this.offset-=e),this},g.prependTo=function(a,b){return a.prepend(this,b),this},g.printDebug=function(a){"function"!=typeof a&&(a=console.log.bind(console)),a(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},g.remaining=function(){return this.limit-this.offset},g.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},g.resize=function(a){if(!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal capacity: "+a+" (not an integer)");if(a|=0,0>a)throw RangeError("Illegal capacity: 0 <= "+a)}if(this.buffer.byteLength<a){var b=new ArrayBuffer(a),c=new Uint8Array(b);c.set(this.view),this.buffer=b,this.view=c}return this},g.reverse=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}return a===b?this:(Array.prototype.reverse.call(this.view.subarray(a,b)),this)},g.skip=function(a){if(!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal length: "+a+" (not an integer)");a|=0}var b=this.offset+a;if(!this.noAssert&&(0>b||b>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+a+" <= "+this.buffer.byteLength);return this.offset=b,this},g.slice=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var c=this.clone();return c.offset=a,c.limit=b,c},g.toBuffer=function(a){var b=this.offset,c=this.limit;if(!this.noAssert){if("number"!=typeof b||b%1!==0)throw TypeError("Illegal offset: Not an integer");if(b>>>=0,"number"!=typeof c||c%1!==0)throw TypeError("Illegal limit: Not an integer");if(c>>>=0,0>b||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}if(!a&&0===b&&c===this.buffer.byteLength)return this.buffer;if(b===c)return h;var d=new ArrayBuffer(c-b);return new Uint8Array(d).set(new Uint8Array(this.buffer).subarray(b,c),0),d},g.toArrayBuffer=g.toBuffer,g.toString=function(a,b,c){if("undefined"==typeof a)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof a&&(a="utf8",b=a,c=b),a){case"utf8":return this.toUTF8(b,c);case"base64":return this.toBase64(b,c);case"hex":return this.toHex(b,c);case"binary":return this.toBinary(b,c);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+a)}};var j=function(){for(var a={},b=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],c=[],d=0,e=b.length;e>d;++d)c[b[d]]=d;return a.encode=function(a,c){for(var d,e;null!==(d=a());)c(b[d>>2&63]),e=(3&d)<<4,null!==(d=a())?(e|=d>>4&15,c(b[63&(e|d>>4&15)]),e=(15&d)<<2,null!==(d=a())?(c(b[63&(e|d>>6&3)]),c(b[63&d])):(c(b[63&e]),c(61))):(c(b[63&e]),c(61),c(61))},a.decode=function(a,b){function d(a){throw Error("Illegal character code: "+a)}for(var e,f,g;null!==(e=a());)if(f=c[e],"undefined"==typeof f&&d(e),null!==(e=a())&&(g=c[e],"undefined"==typeof g&&d(e),b(f<<2>>>0|(48&g)>>4),null!==(e=a()))){if(f=c[e],"undefined"==typeof f){if(61===e)break;d(e)}if(b((15&g)<<4>>>0|(60&f)>>2),null!==(e=a())){if(g=c[e],"undefined"==typeof g){if(61===e)break;d(e)}b((3&f)<<6>>>0|g)}}},a.test=function(a){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(a)},a}();g.toBase64=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),a=0|a,b=0|b,0>a||b>this.capacity||a>b)throw RangeError("begin, end");var d;return j.encode(function(){return b>a?this.view[a++]:null}.bind(this),d=c()),d()},f.fromBase64=function(a,c){if("string"!=typeof a)throw TypeError("str");var d=new f(a.length/4*3,c),e=0;return j.decode(b(a),function(a){d.view[e++]=a}),d.limit=e,d},f.btoa=function(a){return f.fromBinary(a).toBase64()},f.atob=function(a){return f.fromBase64(a).toBinary()},g.toBinary=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),a|=0,b|=0,0>a||b>this.capacity()||a>b)throw RangeError("begin, end");if(a===b)return"";for(var c=[],d=[];b>a;)c.push(this.view[a++]),c.length>=1024&&(d.push(String.fromCharCode.apply(String,c)),c=[]);return d.join("")+String.fromCharCode.apply(String,c)},f.fromBinary=function(a,b){if("string"!=typeof a)throw TypeError("str");for(var c,d=0,e=a.length,g=new f(e,b);e>d;){if(c=a.charCodeAt(d),c>255)throw RangeError("illegal char code: "+c);g.view[d++]=c}return g.limit=e,g},g.toDebug=function(a){for(var b,c=-1,d=this.buffer.byteLength,e="",f="",g="";d>c;){if(-1!==c&&(b=this.view[c],e+=16>b?"0"+b.toString(16).toUpperCase():b.toString(16).toUpperCase(),a&&(f+=b>32&&127>b?String.fromCharCode(b):".")),++c,a&&c>0&&c%16===0&&c!==d){for(;e.length<51;)e+=" ";g+=e+f+"\n",e=f=""}e+=c===this.offset&&c===this.limit?c===this.markedOffset?"!":"|":c===this.offset?c===this.markedOffset?"[":"<":c===this.limit?c===this.markedOffset?"]":">":c===this.markedOffset?"'":a||0!==c&&c!==d?" ":""}if(a&&" "!==e){for(;e.length<51;)e+=" ";g+=e+f+"\n"}return a?g:e},f.fromDebug=function(a,b,c){for(var d,e,g=a.length,h=new f((g+1)/3|0,b,c),i=0,j=0,k=!1,l=!1,m=!1,n=!1,o=!1;g>i;){switch(d=a.charAt(i++)){case"!":if(!c){if(l||m||n){o=!0;break}l=m=n=!0}h.offset=h.markedOffset=h.limit=j,k=!1;break;case"|":if(!c){if(l||n){o=!0;break}l=n=!0}h.offset=h.limit=j,k=!1;break;case"[":if(!c){if(l||m){o=!0;break}l=m=!0}h.offset=h.markedOffset=j,k=!1;break;case"<":if(!c){if(l){o=!0;break}l=!0}h.offset=j,k=!1;break;case"]":if(!c){if(n||m){o=!0;break}n=m=!0}h.limit=h.markedOffset=j,k=!1;break;case">":if(!c){if(n){o=!0;break}n=!0}h.limit=j,k=!1;break;case"'":if(!c){if(m){o=!0;break}m=!0}h.markedOffset=j,k=!1;break;case" ":k=!1;break;default:if(!c&&k){o=!0;break}if(e=parseInt(d+a.charAt(i++),16),!c&&(isNaN(e)||0>e||e>255))throw TypeError("Illegal str: Not a debug encoded string");h.view[j++]=e,k=!0}if(o)throw TypeError("Illegal str: Invalid symbol at "+i)}if(!c){if(!l||!n)throw TypeError("Illegal str: Missing offset or limit");if(j<h.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+j+" < "+g)}return h},g.toHex=function(a,b){if(a="undefined"==typeof a?this.offset:a,b="undefined"==typeof b?this.limit:b,!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}for(var c,d=new Array(b-a);b>a;)c=this.view[a++],16>c?d.push("0",c.toString(16)):d.push(c.toString(16));return d.join("")},f.fromHex=function(a,b,c){if(!c){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if(a.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var d,e=a.length,g=new f(e/2|0,b),h=0,i=0;e>h;h+=2){if(d=parseInt(a.substring(h,h+2),16),!c&&(!isFinite(d)||0>d||d>255))throw TypeError("Illegal str: Contains non-hex characters");g.view[i++]=d}return g.limit=i,g};var k=function(){var a={};return a.MAX_CODEPOINT=1114111,a.encodeUTF8=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)128>c?b(127&c):2048>c?(b(c>>6&31|192),b(63&c|128)):65536>c?(b(c>>12&15|224),b(c>>6&63|128),b(63&c|128)):(b(c>>18&7|240),b(c>>12&63|128),b(c>>6&63|128),b(63&c|128)),c=null},a.decodeUTF8=function(a,b){for(var c,d,e,f,g=function(a){a=a.slice(0,a.indexOf(null));var b=Error(a.toString());throw b.name="TruncatedError",b.bytes=a,b};null!==(c=a());)if(0===(128&c))b(c);else if(192===(224&c))null===(d=a())&&g([c,d]),b((31&c)<<6|63&d);else if(224===(240&c))(null===(d=a())||null===(e=a()))&&g([c,d,e]),b((15&c)<<12|(63&d)<<6|63&e);else{if(240!==(248&c))throw RangeError("Illegal starting byte: "+c);(null===(d=a())||null===(e=a())||null===(f=a()))&&g([c,d,e,f]),b((7&c)<<18|(63&d)<<12|(63&e)<<6|63&f)}},a.UTF16toUTF8=function(a,b){for(var c,d=null;;){if(null===(c=null!==d?d:a()))break;c>=55296&&57343>=c&&null!==(d=a())&&d>=56320&&57343>=d?(b(1024*(c-55296)+d-56320+65536),d=null):b(c)}null!==d&&b(d)},a.UTF8toUTF16=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)65535>=c?b(c):(c-=65536,b((c>>10)+55296),b(c%1024+56320)),c=null},a.encodeUTF16toUTF8=function(b,c){a.UTF16toUTF8(b,function(b){a.encodeUTF8(b,c)})},a.decodeUTF8toUTF16=function(b,c){a.decodeUTF8(b,function(b){a.UTF8toUTF16(b,c)})},a.calculateCodePoint=function(a){return 128>a?1:2048>a?2:65536>a?3:4},a.calculateUTF8=function(a){for(var b,c=0;null!==(b=a());)c+=128>b?1:2048>b?2:65536>b?3:4;return c},a.calculateUTF16asUTF8=function(b){var c=0,d=0;return a.UTF16toUTF8(b,function(a){++c,d+=128>a?1:2048>a?2:65536>a?3:4}),[c,d]},a}();return g.toUTF8=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!==0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!==0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var d;try{k.decodeUTF8toUTF16(function(){return b>a?this.view[a++]:null}.bind(this),d=c())}catch(e){if(a!==b)throw RangeError("Illegal range: Truncated data, "+a+" != "+b)}return d()},f.fromUTF8=function(a,c,d){if(!d&&"string"!=typeof a)throw TypeError("Illegal str: Not a string");var e=new f(k.calculateUTF16asUTF8(b(a),!0)[1],c,d),g=0;return k.encodeUTF16toUTF8(b(a),function(a){e.view[g++]=a}),e.limit=g,e},f})}),_e=$e&&"object"==typeof $e&&"default"in $e?$e["default"]:$e,af=b(function(a,b,c){!function(b,c){"function"==typeof define&&define.amd?define(["bytebuffer"],c):"function"==typeof $&&"object"==typeof a&&a&&a.exports?a.exports=c(_e,!0):(b.dcodeIO=b.dcodeIO||{}).ProtoBuf=c(b.dcodeIO.ByteBuffer)}(_,function(a,b){var c={};return c.ByteBuffer=a,c.Long=a.Long||null,c.VERSION="5.0.1",c.WIRE_TYPES={},c.WIRE_TYPES.VARINT=0,c.WIRE_TYPES.BITS64=1,c.WIRE_TYPES.LDELIM=2,c.WIRE_TYPES.STARTGROUP=3,c.WIRE_TYPES.ENDGROUP=4,c.WIRE_TYPES.BITS32=5,c.PACKABLE_WIRE_TYPES=[c.WIRE_TYPES.VARINT,c.WIRE_TYPES.BITS64,c.WIRE_TYPES.BITS32],c.TYPES={int32:{name:"int32",wireType:c.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:c.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:c.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:c.WIRE_TYPES.VARINT,defaultValue:c.Long?c.Long.ZERO:void 0},uint64:{name:"uint64",wireType:c.WIRE_TYPES.VARINT,defaultValue:c.Long?c.Long.UZERO:void 0},sint64:{name:"sint64",wireType:c.WIRE_TYPES.VARINT,defaultValue:c.Long?c.Long.ZERO:void 0},bool:{name:"bool",wireType:c.WIRE_TYPES.VARINT,defaultValue:!1},"double":{name:"double",wireType:c.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:c.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:c.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:c.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:c.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:c.WIRE_TYPES.BITS64,defaultValue:c.Long?c.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:c.WIRE_TYPES.BITS64,defaultValue:c.Long?c.Long.ZERO:void 0},"float":{name:"float",wireType:c.WIRE_TYPES.BITS32,defaultValue:0},"enum":{name:"enum",wireType:c.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:c.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:c.WIRE_TYPES.STARTGROUP,defaultValue:null}},c.MAP_KEY_TYPES=[c.TYPES.int32,c.TYPES.sint32,c.TYPES.sfixed32,c.TYPES.uint32,c.TYPES.fixed32,c.TYPES.int64,c.TYPES.sint64,c.TYPES.sfixed64,c.TYPES.uint64,c.TYPES.fixed64,c.TYPES.bool,c.TYPES.string,c.TYPES.bytes],c.ID_MIN=1,c.ID_MAX=536870911,c.convertFieldsToCamelCase=!1,c.populateAccessors=!0,c.populateDefaults=!0,c.Util=function(){var a={};return a.IS_NODE=!("object"!=typeof process||process+""!="[object process]"||process.browser),a.XHR=function(){for(var a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=null,c=0;c<a.length;c++){try{b=a[c]()}catch(d){continue}break}if(!b)throw Error("XMLHttpRequest is not supported");return b},a.fetch=function(b,c){if(c&&"function"!=typeof c&&(c=null),a.IS_NODE){var d=Xe;if(c)d.readFile(b,function(a,b){c(a?null:""+b)});else try{return d.readFileSync(b)}catch(e){return null}}else{var f=a.XHR();if(f.open("GET",b,!!c),f.setRequestHeader("Accept","text/plain"),"function"==typeof f.overrideMimeType&&f.overrideMimeType("text/plain"),!c)return f.send(null),200==f.status||0==f.status&&"string"==typeof f.responseText?f.responseText:null;if(f.onreadystatechange=function(){4==f.readyState&&c(200==f.status||0==f.status&&"string"==typeof f.responseText?f.responseText:null)},4==f.readyState)return;f.send(null)}},a.toCamelCase=function(a){return a.replace(/_([a-zA-Z])/g,function(a,b){return b.toUpperCase()})},a}(),c.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},c.Reflect=function(b){function c(c){if("string"==typeof c&&(c=b.TYPES[c]),"undefined"==typeof c.defaultValue)throw Error("default value for type "+c.name+" is not supported");return c==b.TYPES.bytes?new a(0):c.defaultValue}function d(a,c){if(a&&"number"==typeof a.low&&"number"==typeof a.high&&"boolean"==typeof a.unsigned&&a.low===a.low&&a.high===a.high)return new b.Long(a.low,a.high,"undefined"==typeof c?a.unsigned:c);if("string"==typeof a)return b.Long.fromString(a,c||!1,10);if("number"==typeof a)return b.Long.fromNumber(a,c||!1);throw Error("not convertible to Long")}function e(a,c){var d=c.readVarint32(),f=7&d,g=d>>>3;switch(f){case b.WIRE_TYPES.VARINT:do d=c.readUint8();while(128===(128&d));break;case b.WIRE_TYPES.BITS64:c.offset+=8;break;case b.WIRE_TYPES.LDELIM:d=c.readVarint32(),c.offset+=d;break;case b.WIRE_TYPES.STARTGROUP:e(g,c);break;case b.WIRE_TYPES.ENDGROUP:if(g===a)return!1;throw Error("Illegal GROUPEND after unknown group: "+g+" ("+a+" expected)");case b.WIRE_TYPES.BITS32:c.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+a+": "+f)}return!0}var f={},g=function(a,b,c){this.builder=a,this.parent=b,this.name=c,this.className},h=g.prototype;h.fqn=function(){for(var a=this.name,b=this;;){if(b=b.parent,null==b)break;a=b.name+"."+a}return a},h.toString=function(a){return(a?this.className+" ":"")+this.fqn()},h.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},f.T=g;var i=function(a,b,c,d,e){g.call(this,a,b,c),this.className="Namespace",this.children=[],this.options=d||{},this.syntax=e||"proto2"},j=i.prototype=Object.create(g.prototype);j.getChildren=function(a){if(a=a||null,null==a)return this.children.slice();for(var b=[],c=0,d=this.children.length;d>c;++c)this.children[c]instanceof a&&b.push(this.children[c]);return b},j.addChild=function(a){var b;if(b=this.getChild(a.name))if(b instanceof m.Field&&b.name!==b.originalName&&null===this.getChild(b.originalName))b.name=b.originalName;else{if(!(a instanceof m.Field&&a.name!==a.originalName&&null===this.getChild(a.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+a.name);a.name=a.originalName}this.children.push(a)},j.getChild=function(a){for(var b="number"==typeof a?"id":"name",c=0,d=this.children.length;d>c;++c)if(this.children[c][b]===a)return this.children[c];return null},j.resolve=function(a,b){var c="string"==typeof a?a.split("."):a,d=this,e=0;if(""===c[e]){for(;null!==d.parent;)d=d.parent;e++}var g;do{do{if(!(d instanceof f.Namespace)){d=null;break}if(g=d.getChild(c[e]),!g||!(g instanceof f.T)||b&&!(g instanceof f.Namespace)){d=null;break}d=g,e++}while(e<c.length);if(null!=d)break;if(null!==this.parent)return this.parent.resolve(a,b)}while(null!=d);return d},j.qn=function(a){var b=[],c=a;do b.unshift(c.name),c=c.parent;while(null!==c);for(var d=1;d<=b.length;d++){var e=b.slice(b.length-d);if(a===this.resolve(e,a instanceof f.Namespace))return e.join(".")}return a.fqn()},j.build=function(){for(var a,b={},c=this.children,d=0,e=c.length;e>d;++d)a=c[d],a instanceof i&&(b[a.name]=a.build());return Object.defineProperty&&Object.defineProperty(b,"$options",{value:this.buildOpt()}),b},j.buildOpt=function(){for(var a={},b=Object.keys(this.options),c=0,d=b.length;d>c;++c){var e=b[c],f=this.options[b[c]];a[e]=f}return a},j.getOption=function(a){return"undefined"==typeof a?this.options:"undefined"!=typeof this.options[a]?this.options[a]:null},f.Namespace=i;var k=function(a,c,d,e){if(this.type=a,this.resolvedType=c,this.isMapKey=d,this.syntax=e,d&&b.MAP_KEY_TYPES.indexOf(a)<0)throw Error("Invalid map key type: "+a.name)},l=k.prototype;k.defaultFieldValue=c,l.verifyValue=function(c){function e(a,b){throw Error("Illegal value for "+f.toString(!0)+" of type "+f.type.name+": "+a+" ("+b+")")}var f=this;switch(this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:return("number"!=typeof c||c===c&&c%1!==0)&&e(typeof c,"not an integer"),c>4294967295?0|c:c;case b.TYPES.uint32:case b.TYPES.fixed32:return("number"!=typeof c||c===c&&c%1!==0)&&e(typeof c,"not an integer"),0>c?c>>>0:c;case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:if(b.Long)try{return d(c,!1)}catch(g){e(typeof c,g.message)}else e(typeof c,"requires Long.js");case b.TYPES.uint64:case b.TYPES.fixed64:if(b.Long)try{return d(c,!0)}catch(g){e(typeof c,g.message)}else e(typeof c,"requires Long.js");case b.TYPES.bool:return"boolean"!=typeof c&&e(typeof c,"not a boolean"),c;case b.TYPES["float"]:case b.TYPES["double"]:return"number"!=typeof c&&e(typeof c,"not a number"),c;case b.TYPES.string:return"string"==typeof c||c&&c instanceof String||e(typeof c,"not a string"),""+c;case b.TYPES.bytes:return a.isByteBuffer(c)?c:a.wrap(c,"base64");case b.TYPES["enum"]:var h=this.resolvedType.getChildren(b.Reflect.Enum.Value);for(j=0;j<h.length;j++){if(h[j].name==c)return h[j].id;if(h[j].id==c)return h[j].id}if("proto3"===this.syntax)return("number"!=typeof c||c===c&&c%1!==0)&&e(typeof c,"not an integer"),(c>4294967295||0>c)&&e(typeof c,"not in range for uint32"),c;e(c,"not a valid enum value");case b.TYPES.group:case b.TYPES.message:if(c&&"object"==typeof c||e(typeof c,"object expected"),c instanceof this.resolvedType.clazz)return c;if(c instanceof b.Builder.Message){var i={};for(var j in c)c.hasOwnProperty(j)&&(i[j]=c[j]);c=i}return new this.resolvedType.clazz(c)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+c+" (undefined type "+this.type+")")},l.calculateLength=function(c,d){if(null===d)return 0;var e;switch(this.type){case b.TYPES.int32:return 0>d?a.calculateVarint64(d):a.calculateVarint32(d);case b.TYPES.uint32:return a.calculateVarint32(d);case b.TYPES.sint32:return a.calculateVarint32(a.zigZagEncode32(d));case b.TYPES.fixed32:case b.TYPES.sfixed32:case b.TYPES["float"]:return 4;case b.TYPES.int64:case b.TYPES.uint64:return a.calculateVarint64(d);case b.TYPES.sint64:return a.calculateVarint64(a.zigZagEncode64(d));case b.TYPES.fixed64:case b.TYPES.sfixed64:return 8;case b.TYPES.bool:return 1;case b.TYPES["enum"]:return a.calculateVarint32(d);case b.TYPES["double"]:return 8;case b.TYPES.string:return e=a.calculateUTF8Bytes(d),a.calculateVarint32(e)+e;case b.TYPES.bytes:if(d.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+d.remaining()+" bytes remaining");return a.calculateVarint32(d.remaining())+d.remaining();case b.TYPES.message:return e=this.resolvedType.calculate(d),a.calculateVarint32(e)+e;case b.TYPES.group:return e=this.resolvedType.calculate(d),e+a.calculateVarint32(c<<3|b.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+d+" (unknown type)")},l.encodeValue=function(c,d,e){if(null===d)return e;switch(this.type){case b.TYPES.int32:0>d?e.writeVarint64(d):e.writeVarint32(d);break;case b.TYPES.uint32:e.writeVarint32(d);break;case b.TYPES.sint32:e.writeVarint32ZigZag(d);break;case b.TYPES.fixed32:e.writeUint32(d);break;case b.TYPES.sfixed32:e.writeInt32(d);break;case b.TYPES.int64:case b.TYPES.uint64:e.writeVarint64(d);break;case b.TYPES.sint64:e.writeVarint64ZigZag(d);break;case b.TYPES.fixed64:e.writeUint64(d);break;case b.TYPES.sfixed64:e.writeInt64(d);break;case b.TYPES.bool:"string"==typeof d?e.writeVarint32("false"===d.toLowerCase()?0:!!d):e.writeVarint32(d?1:0);break;case b.TYPES["enum"]:e.writeVarint32(d);break;case b.TYPES["float"]:e.writeFloat32(d);break;case b.TYPES["double"]:e.writeFloat64(d);break;case b.TYPES.string:e.writeVString(d);break;case b.TYPES.bytes:if(d.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+d.remaining()+" bytes remaining");var f=d.offset;e.writeVarint32(d.remaining()),e.append(d),d.offset=f;break;case b.TYPES.message:var g=(new a).LE();this.resolvedType.encode(d,g),e.writeVarint32(g.offset),e.append(g.flip());break;case b.TYPES.group:this.resolvedType.encode(d,e),e.writeVarint32(c<<3|b.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+d+" (unknown type)")}return e},l.decode=function(a,c,d){if(c!=this.type.wireType)throw Error("Unexpected wire type for element");var e,f;switch(this.type){case b.TYPES.int32:return 0|a.readVarint32();case b.TYPES.uint32:return a.readVarint32()>>>0;case b.TYPES.sint32:return 0|a.readVarint32ZigZag();case b.TYPES.fixed32:return a.readUint32()>>>0;case b.TYPES.sfixed32:return 0|a.readInt32();case b.TYPES.int64:return a.readVarint64();case b.TYPES.uint64:return a.readVarint64().toUnsigned();case b.TYPES.sint64:return a.readVarint64ZigZag();case b.TYPES.fixed64:return a.readUint64();case b.TYPES.sfixed64:return a.readInt64();case b.TYPES.bool:return!!a.readVarint32();case b.TYPES["enum"]:return a.readVarint32();case b.TYPES["float"]:return a.readFloat();case b.TYPES["double"]:return a.readDouble();case b.TYPES.string:return a.readVString();case b.TYPES.bytes:if(f=a.readVarint32(),a.remaining()<f)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+f+" required but got only "+a.remaining());return e=a.clone(),e.limit=e.offset+f,a.offset+=f,e;case b.TYPES.message:return f=a.readVarint32(),this.resolvedType.decode(a,f);case b.TYPES.group:return this.resolvedType.decode(a,-1,d)}throw Error("[INTERNAL] Illegal decode type")},l.valueFromString=function(c){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:case b.TYPES.uint32:case b.TYPES.fixed32:return this.verifyValue(parseInt(c));case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:case b.TYPES.uint64:case b.TYPES.fixed64:return this.verifyValue(c);case b.TYPES.bool:return"true"===c;case b.TYPES.string:return this.verifyValue(c);case b.TYPES.bytes:return a.fromBinary(c)}},l.valueToString=function(a){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===b.TYPES.bytes?a.toString("binary"):a.toString()},f.Element=k;var m=function(a,b,c,d,e,f){i.call(this,a,b,c,d,f),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!e,this._fields=null,this._fieldsById=null,this._fieldsByName=null},n=m.prototype=Object.create(i.prototype);n.build=function(c){if(this.clazz&&!c)return this.clazz;var d=function(b,c){function d(c,e,f,g){if(null===c||"object"!=typeof c){if(g&&g instanceof b.Reflect.Enum){var h=b.Reflect.Enum.getName(g.object,c);if(null!==h)return h}return c}if(a.isByteBuffer(c))return e?c.toBase64():c.toBuffer();if(b.Long.isLong(c))return f?c.toString():b.Long.fromValue(c);var i;if(Array.isArray(c))return i=[],c.forEach(function(a,b){i[b]=d(a,e,f,g)}),i;if(i={},c instanceof b.Map){for(var j=c.entries(),k=j.next();!k.done;k=j.next())i[c.keyElem.valueToString(k.value[0])]=d(k.value[1],e,f,c.valueElem.resolvedType);return i}var l=c.$type,m=void 0;for(var n in c)c.hasOwnProperty(n)&&(l&&(m=l.getChild(n))?i[n]=d(c[n],e,f,m.resolvedType):i[n]=d(c[n],e,f));return i}var e=c.getChildren(b.Reflect.Message.Field),f=c.getChildren(b.Reflect.Message.OneOf),g=function(d,h){b.Builder.Message.call(this);for(var i=0,j=f.length;j>i;++i)this[f[i].name]=null;for(i=0,j=e.length;j>i;++i){var k=e[i];this[k.name]=k.repeated?[]:k.map?new b.Map(k):null,!k.required&&"proto3"!==c.syntax||null===k.defaultValue||(this[k.name]=k.defaultValue)}if(arguments.length>0){var l;if(1!==arguments.length||null===d||"object"!=typeof d||!("function"!=typeof d.encode||d instanceof g)||Array.isArray(d)||d instanceof b.Map||a.isByteBuffer(d)||d instanceof ArrayBuffer||b.Long&&d instanceof b.Long)for(i=0,j=arguments.length;j>i;++i)"undefined"!=typeof(l=arguments[i])&&this.$set(e[i].name,l);else this.$set(d)}},h=g.prototype=Object.create(b.Builder.Message.prototype);h.add=function(a,d,e){var f=c._fieldsByName[a];if(!e){if(!f)throw Error(this+"#"+a+" is undefined");if(!(f instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+f.toString(!0));if(!f.repeated)throw Error(this+"#"+a+" is not a repeated field");d=f.verifyValue(d,!0)}return null===this[a]&&(this[a]=[]),this[a].push(d),this},h.$add=h.add,h.set=function(a,d,e){if(a&&"object"==typeof a){e=d;for(var f in a)a.hasOwnProperty(f)&&"undefined"!=typeof(d=a[f])&&this.$set(f,d,e);return this}var g=c._fieldsByName[a];if(e)this[a]=d;else{if(!g)throw Error(this+"#"+a+" is not a field: undefined");if(!(g instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+g.toString(!0));this[g.name]=d=g.verifyValue(d)}if(g&&g.oneof){var h=this[g.oneof.name];null!==d?(null!==h&&h!==g.name&&(this[h]=null),this[g.oneof.name]=g.name):h===a&&(this[g.oneof.name]=null)}return this},h.$set=h.set,h.get=function(a,d){if(d)return this[a];var e=c._fieldsByName[a];if(!(e&&e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: undefined");if(!(e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+e.toString(!0));return this[e.name]},h.$get=h.get;for(var i=0;i<e.length;i++){var j=e[i];j instanceof b.Reflect.Message.ExtensionField||c.builder.options.populateAccessors&&function(a){var b=a.originalName.replace(/(_[a-zA-Z])/g,function(a){return a.toUpperCase().replace("_","")});b=b.substring(0,1).toUpperCase()+b.substring(1);var d=a.originalName.replace(/([A-Z])/g,function(a){return"_"+a}),e=function(b,c){return this[a.name]=c?b:a.verifyValue(b),this},f=function(){return this[a.name]};null===c.getChild("set"+b)&&(h["set"+b]=e),null===c.getChild("set_"+d)&&(h["set_"+d]=e),null===c.getChild("get"+b)&&(h["get"+b]=f),null===c.getChild("get_"+d)&&(h["get_"+d]=f)}(j)}h.encode=function(b,d){"boolean"==typeof b&&(d=b,b=void 0);var e=!1;b||(b=new a,e=!0);var f=b.littleEndian;try{return c.encode(this,b.LE(),d),(e?b.flip():b).LE(f)}catch(g){throw b.LE(f),g}},g.encode=function(a,b,c){return new g(a).encode(b,c)},h.calculate=function(){return c.calculate(this)},h.encodeDelimited=function(b,d){var e=!1;b||(b=new a,e=!0);var f=(new a).LE();return c.encode(this,f,d).flip(),b.writeVarint32(f.remaining()),b.append(f),e?b.flip():b},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toArrayBuffer()),a}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBuffer()),a}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBase64()),a}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toHex()),a}},h.toHex=h.encodeHex,h.toRaw=function(a,b){return d(this,!!a,!!b,this.$type)},h.encodeJSON=function(){return JSON.stringify(d(this,!0,!0,this.$type))},g.decode=function(b,d,e){"string"==typeof d&&(e=d,d=-1),"string"==typeof b&&(b=a.wrap(b,e?e:"base64")),b=a.isByteBuffer(b)?b:a.wrap(b);var f=b.littleEndian;try{var g=c.decode(b.LE());return b.LE(f),g}catch(h){throw b.LE(f),h}},g.decodeDelimited=function(b,d){if("string"==typeof b&&(b=a.wrap(b,d?d:"base64")),b=a.isByteBuffer(b)?b:a.wrap(b),b.remaining()<1)return null;var e=b.offset,f=b.readVarint32();if(b.remaining()<f)return b.offset=e,null;try{var g=c.decode(b.slice(b.offset,b.offset+f).LE());return b.offset+=f,g}catch(h){throw b.offset+=f,h}},g.decode64=function(a){return g.decode(a,"base64")},g.decodeHex=function(a){return g.decode(a,"hex")},g.decodeJSON=function(a){return new g(JSON.parse(a))},h.toString=function(){return c.toString()};return Object.defineProperty&&(Object.defineProperty(g,"$options",{value:c.buildOpt()}),Object.defineProperty(h,"$options",{value:g.$options}),Object.defineProperty(g,"$type",{value:c}),Object.defineProperty(h,"$type",{value:c})),g}(b,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var e,f=0,g=this.children.length;g>f;f++)if(e=this.children[f],e instanceof s||e instanceof m||e instanceof w){
if(d.hasOwnProperty(e.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+e.toString(!0)+" cannot override static property '"+e.name+"'");d[e.name]=e.build()}else if(e instanceof m.Field)e.build(),this._fields.push(e),this._fieldsById[e.id]=e,this._fieldsByName[e.name]=e;else if(!(e instanceof m.OneOf||e instanceof v))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[f].toString(!0));return this.clazz=d},n.encode=function(a,b,c){for(var d,e,f=null,g=0,h=this._fields.length;h>g;++g)d=this._fields[g],e=a[d.name],d.required&&null===e?null===f&&(f=d):d.encode(c?e:d.verifyValue(e),b,a);if(null!==f){var i=Error("Missing at least one required field for "+this.toString(!0)+": "+f);throw i.encoded=b,i}return b},n.calculate=function(a){for(var b,c,d=0,e=0,f=this._fields.length;f>e;++e){if(b=this._fields[e],c=a[b.name],b.required&&null===c)throw Error("Missing at least one required field for "+this.toString(!0)+": "+b);d+=b.calculate(c,a)}return d},n.decode=function(a,c,d){c="number"==typeof c?c:-1;for(var f,g,h,i,j=a.offset,k=new this.clazz;a.offset<j+c||-1===c&&a.remaining()>0;){if(f=a.readVarint32(),g=7&f,h=f>>>3,g===b.WIRE_TYPES.ENDGROUP){if(h!==d)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+h+" ("+(d?d+" expected":"not a group")+")");break}if(i=this._fieldsById[h]){if(i.repeated&&!i.options.packed)k[i.name].push(i.decode(g,a));else if(i.map){var l=i.decode(g,a);k[i.name].set(l[0],l[1])}else if(k[i.name]=i.decode(g,a),i.oneof){var m=k[i.oneof.name];null!==m&&m!==i.name&&(k[m]=null),k[i.oneof.name]=i.name}}else switch(g){case b.WIRE_TYPES.VARINT:a.readVarint32();break;case b.WIRE_TYPES.BITS32:a.offset+=4;break;case b.WIRE_TYPES.BITS64:a.offset+=8;break;case b.WIRE_TYPES.LDELIM:var n=a.readVarint32();a.offset+=n;break;case b.WIRE_TYPES.STARTGROUP:for(;e(h,a););break;default:throw Error("Illegal wire type for unknown field "+h+" in "+this.toString(!0)+"#decode: "+g)}}for(var o=0,p=this._fields.length;p>o;++o)if(i=this._fields[o],null===k[i.name])if("proto3"===this.syntax)k[i.name]=i.defaultValue;else{if(i.required){var q=Error("Missing at least one required field for "+this.toString(!0)+": "+i.name);throw q.decoded=k,q}b.populateDefaults&&null!==i.defaultValue&&(k[i.name]=i.defaultValue)}return k},f.Message=m;var o=function(a,c,d,e,f,h,i,j,k,l){g.call(this,a,c,h),this.className="Message.Field",this.required="required"===d,this.repeated="repeated"===d,this.map="map"===d,this.keyType=e||null,this.type=f,this.resolvedType=null,this.id=i,this.options=j||{},this.defaultValue=null,this.oneof=k||null,this.syntax=l||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof m.ExtensionField||(this.name=b.Util.toCamelCase(this.name))},p=o.prototype=Object.create(g.prototype);p.build=function(){this.element=new k(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new k(this.keyType,void 0,!0,this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?"undefined"!=typeof this.options["default"]&&(this.defaultValue=this.verifyValue(this.options["default"])):this.defaultValue=k.defaultFieldValue(this.type)},p.verifyValue=function(a,c){function d(a,b){throw Error("Illegal value for "+e.toString(!0)+" of type "+e.type.name+": "+a+" ("+b+")")}c=c||!1;var e=this;if(null===a)return this.required&&d(typeof a,"required"),"proto3"===this.syntax&&this.type!==b.TYPES.message&&d(typeof a,"proto3 field without field presence cannot be null"),null;var f;if(this.repeated&&!c){Array.isArray(a)||(a=[a]);var g=[];for(f=0;f<a.length;f++)g.push(this.element.verifyValue(a[f]));return g}return this.map&&!c?a instanceof b.Map?a:(a instanceof Object||d(typeof a,"expected ProtoBuf.Map or raw object for map field"),new b.Map(this,a)):(!this.repeated&&Array.isArray(a)&&d(typeof a,"no array expected"),this.element.verifyValue(a))},p.hasWirePresence=function(a,c){if("proto3"!==this.syntax)return null!==a;if(this.oneof&&c[this.oneof.name]===this.name)return!0;switch(this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:case b.TYPES.uint32:case b.TYPES.fixed32:return 0!==a;case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:case b.TYPES.uint64:case b.TYPES.fixed64:return 0!==a.low||0!==a.high;case b.TYPES.bool:return a;case b.TYPES["float"]:case b.TYPES["double"]:return 0!==a;case b.TYPES.string:return a.length>0;case b.TYPES.bytes:return a.remaining()>0;case b.TYPES["enum"]:return 0!==a;case b.TYPES.message:return null!==a;default:return!0}},p.encode=function(c,d,e){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return d;try{if(this.repeated){var f;if(this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){d.writeVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),d.ensureCapacity(d.offset+=1);var g=d.offset;for(f=0;f<c.length;f++)this.element.encodeValue(this.id,c[f],d);var h=d.offset-g,i=a.calculateVarint32(h);if(i>1){var j=d.slice(g,d.offset);g+=i-1,d.offset=g,d.append(j)}d.writeVarint32(h,g-i)}else for(f=0;f<c.length;f++)d.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,c[f],d)}else this.map?c.forEach(function(c,e,f){var g=a.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,e)+a.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,c);d.writeVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),d.writeVarint32(g),d.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,e,d),d.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,c,d)},this):this.hasWirePresence(c,e)&&(d.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,c,d))}catch(k){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+k+")")}return d},p.calculate=function(c,d){if(c=this.verifyValue(c),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return 0;var e=0;try{if(this.repeated){var f,g;if(this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(e+=a.calculateVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),g=0,f=0;f<c.length;f++)g+=this.element.calculateLength(this.id,c[f]);e+=a.calculateVarint32(g),e+=g}else for(f=0;f<c.length;f++)e+=a.calculateVarint32(this.id<<3|this.type.wireType),e+=this.element.calculateLength(this.id,c[f])}else this.map?c.forEach(function(c,d,f){var g=a.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,d)+a.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,c);e+=a.calculateVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),e+=a.calculateVarint32(g),e+=g},this):this.hasWirePresence(c,d)&&(e+=a.calculateVarint32(this.id<<3|this.type.wireType),e+=this.element.calculateLength(this.id,c))}catch(h){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+h+")")}return e},p.decode=function(a,c,d){var e,f,g=!this.map&&a==this.type.wireType||!d&&this.repeated&&this.options.packed&&a==b.WIRE_TYPES.LDELIM||this.map&&a==b.WIRE_TYPES.LDELIM;if(!g)throw Error("Illegal wire type for field "+this.toString(!0)+": "+a+" ("+this.type.wireType+" expected)");if(a==b.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!d){f=c.readVarint32(),f=c.offset+f;for(var h=[];c.offset<f;)h.push(this.decode(this.type.wireType,c,!0));return h}if(this.map){var i=k.defaultFieldValue(this.keyType);if(e=k.defaultFieldValue(this.type),f=c.readVarint32(),c.remaining()<f)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+f+" required but got only "+c.remaining());var j=c.clone();for(j.limit=j.offset+f,c.offset+=f;j.remaining()>0;){var l=j.readVarint32();a=7&l;var m=l>>>3;if(1===m)i=this.keyElement.decode(j,a,m);else{if(2!==m)throw Error("Unexpected tag in map field key/value submessage");e=this.element.decode(j,a,m)}}return[i,e]}return this.element.decode(c,a,this.id)},f.Message.Field=o;var q=function(a,b,c,d,e,f,g){o.call(this,a,b,c,null,d,e,f,g),this.extension};q.prototype=Object.create(o.prototype),f.Message.ExtensionField=q;var r=function(a,b,c){g.call(this,a,b,c),this.fields=[]};f.Message.OneOf=r;var s=function(a,b,c,d,e){i.call(this,a,b,c,d,e),this.className="Enum",this.object=null};s.getName=function(a,b){for(var c,d=Object.keys(a),e=0;e<d.length;++e)if(a[c=d[e]]===b)return c;return null};var t=s.prototype=Object.create(i.prototype);t.build=function(a){if(this.object&&!a)return this.object;for(var c=new b.Builder.Enum,d=this.getChildren(s.Value),e=0,f=d.length;f>e;++e)c[d[e].name]=d[e].id;return Object.defineProperty&&Object.defineProperty(c,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=c},f.Enum=s;var u=function(a,b,c,d){g.call(this,a,b,c),this.className="Enum.Value",this.id=d};u.prototype=Object.create(g.prototype),f.Enum.Value=u;var v=function(a,b,c,d){g.call(this,a,b,c),this.field=d};v.prototype=Object.create(g.prototype),f.Extension=v;var w=function(a,b,c,d){i.call(this,a,b,c,d),this.className="Service",this.clazz=null},x=w.prototype=Object.create(i.prototype);x.build=function(c){return this.clazz&&!c?this.clazz:this.clazz=function(b,c){for(var d=function(a){b.Builder.Service.call(this),this.rpcImpl=a||function(a,b,c){setTimeout(c.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},e=d.prototype=Object.create(b.Builder.Service.prototype),f=c.getChildren(b.Reflect.Service.RPCMethod),g=0;g<f.length;g++)!function(b){e[b.name]=function(d,e){try{try{d=b.resolvedRequestType.clazz.decode(a.wrap(d))}catch(f){if(!(f instanceof TypeError))throw f}if(null===d||"object"!=typeof d)throw Error("Illegal arguments");d instanceof b.resolvedRequestType.clazz||(d=new b.resolvedRequestType.clazz(d)),this.rpcImpl(b.fqn(),d,function(a,d){if(a)return void e(a);null===d&&(d="");try{d=b.resolvedResponseType.clazz.decode(d)}catch(f){}return d&&d instanceof b.resolvedResponseType.clazz?void e(null,d):void e(Error("Illegal response type received in service method "+c.name+"#"+b.name))})}catch(f){setTimeout(e.bind(this,f),0)}},d[b.name]=function(a,c,e){new d(a)[b.name](c,e)},Object.defineProperty&&(Object.defineProperty(d[b.name],"$options",{value:b.buildOpt()}),Object.defineProperty(e[b.name],"$options",{value:d[b.name].$options}))}(f[g]);return Object.defineProperty&&(Object.defineProperty(d,"$options",{value:c.buildOpt()}),Object.defineProperty(e,"$options",{value:d.$options}),Object.defineProperty(d,"$type",{value:c}),Object.defineProperty(e,"$type",{value:c})),d}(b,this)},f.Service=w;var y=function(a,b,c,d){g.call(this,a,b,c),this.className="Service.Method",this.options=d||{}},z=y.prototype=Object.create(g.prototype);z.buildOpt=j.buildOpt,f.Service.Method=y;var A=function(a,b,c,d,e,f,g,h){y.call(this,a,b,c,h),this.className="Service.RPCMethod",this.requestName=d,this.responseName=e,this.requestStream=f,this.responseStream=g,this.resolvedRequestType=null,this.resolvedResponseType=null};return A.prototype=Object.create(y.prototype),f.Service.RPCMethod=A,f}(c),c.Builder=function(a,b,c){function d(a){a.messages&&a.messages.forEach(function(b){b.syntax=a.syntax,d(b)}),a.enums&&a.enums.forEach(function(b){b.syntax=a.syntax})}var e=function(a){this.ns=new c.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=a||{}},f=e.prototype;return e.isMessage=function(a){return"string"!=typeof a.name?!1:"undefined"==typeof a.values&&"undefined"==typeof a.rpc},e.isMessageField=function(a){return"string"==typeof a.rule&&"string"==typeof a.name&&"string"==typeof a.type&&"undefined"!=typeof a.id},e.isEnum=function(a){return"string"!=typeof a.name?!1:!("undefined"==typeof a.values||!Array.isArray(a.values)||0===a.values.length)},e.isService=function(a){return!("string"!=typeof a.name||"object"!=typeof a.rpc||!a.rpc)},e.isExtend=function(a){return"string"==typeof a.ref},f.reset=function(){return this.ptr=this.ns,this},f.define=function(a){if("string"!=typeof a||!b.TYPEREF.test(a))throw Error("illegal namespace: "+a);return a.split(".").forEach(function(a){var b=this.ptr.getChild(a);null===b&&this.ptr.addChild(b=new c.Namespace(this,this.ptr,a)),this.ptr=b},this),this},f.create=function(b){if(!b)return this;if(Array.isArray(b)){if(0===b.length)return this;b=b.slice()}else b=[b];for(var d=[b];d.length>0;){if(b=d.pop(),!Array.isArray(b))throw Error("not a valid namespace: "+JSON.stringify(b));for(;b.length>0;){var f=b.shift();if(e.isMessage(f)){var g=new c.Message(this,this.ptr,f.name,f.options,f.isGroup,f.syntax),h={};f.oneofs&&Object.keys(f.oneofs).forEach(function(a){g.addChild(h[a]=new c.Message.OneOf(this,g,a))},this),f.fields&&f.fields.forEach(function(a){if(null!==g.getChild(0|a.id))throw Error("duplicate or invalid field id in "+g.name+": "+a.id);if(a.options&&"object"!=typeof a.options)throw Error("illegal field options in "+g.name+"#"+a.name);var b=null;if("string"==typeof a.oneof&&!(b=h[a.oneof]))throw Error("illegal oneof in "+g.name+"#"+a.name+": "+a.oneof);a=new c.Message.Field(this,g,a.rule,a.keytype,a.type,a.name,a.id,a.options,b,f.syntax),b&&b.fields.push(a),g.addChild(a)},this);var i=[];if(f.enums&&f.enums.forEach(function(a){i.push(a)}),f.messages&&f.messages.forEach(function(a){i.push(a)}),f.services&&f.services.forEach(function(a){i.push(a)}),f.extensions&&("number"==typeof f.extensions[0]?g.extensions=[f.extensions]:g.extensions=f.extensions),this.ptr.addChild(g),i.length>0){d.push(b),b=i,i=null,this.ptr=g,g=null;continue}i=null}else if(e.isEnum(f))g=new c.Enum(this,this.ptr,f.name,f.options,f.syntax),f.values.forEach(function(a){g.addChild(new c.Enum.Value(this,g,a.name,a.id))},this),this.ptr.addChild(g);else if(e.isService(f))g=new c.Service(this,this.ptr,f.name,f.options),Object.keys(f.rpc).forEach(function(a){var b=f.rpc[a];g.addChild(new c.Service.RPCMethod(this,g,a,b.request,b.response,!!b.request_stream,!!b.response_stream,b.options))},this),this.ptr.addChild(g);else{if(!e.isExtend(f))throw Error("not a valid definition: "+JSON.stringify(f));if(g=this.ptr.resolve(f.ref,!0))f.fields.forEach(function(b){if(null!==g.getChild(0|b.id))throw Error("duplicate extended field id in "+g.name+": "+b.id);if(g.extensions){var d=!1;if(g.extensions.forEach(function(a){b.id>=a[0]&&b.id<=a[1]&&(d=!0)}),!d)throw Error("illegal extended field id in "+g.name+": "+b.id+" (not within valid ranges)")}var e=b.name;this.options.convertFieldsToCamelCase&&(e=a.Util.toCamelCase(e));var f=new c.Message.ExtensionField(this,g,b.rule,b.type,this.ptr.fqn()+"."+e,b.id,b.options),h=new c.Extension(this,this.ptr,b.name,f);f.extension=h,this.ptr.addChild(h),g.addChild(f)},this);else if(!/\.?google\.protobuf\./.test(f.ref))throw Error("extended message "+f.ref+" is not defined")}f=null,g=null}b=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},f["import"]=function(b,c){var e="/";if("string"==typeof c){if(a.Util.IS_NODE&&(c=Xe.resolve(c)),this.files[c]===!0)return this.reset();this.files[c]=!0}else if("object"==typeof c){var f=c.root;a.Util.IS_NODE&&(f=Xe.resolve(f)),(f.indexOf("\\")>=0||c.file.indexOf("\\")>=0)&&(e="\\");var g=f+e+c.file;if(this.files[g]===!0)return this.reset();this.files[g]=!0}if(b.imports&&b.imports.length>0){var h,i=!1;"object"==typeof c?(this.importRoot=c.root,i=!0,h=this.importRoot,c=c.file,(h.indexOf("\\")>=0||c.indexOf("\\")>=0)&&(e="\\")):"string"==typeof c?this.importRoot?h=this.importRoot:c.indexOf("/")>=0?(h=c.replace(/\/[^\/]*$/,""),""===h&&(h="/")):c.indexOf("\\")>=0?(h=c.replace(/\\[^\\]*$/,""),e="\\"):h=".":h=null;for(var j=0;j<b.imports.length;j++)if("string"==typeof b.imports[j]){if(!h)throw Error("cannot determine import root");var k=b.imports[j];if("google/protobuf/descriptor.proto"===k)continue;if(k=h+e+k,this.files[k]===!0)continue;/\.proto$/i.test(k)&&!a.DotProto&&(k=k.replace(/\.proto$/,".json"));var l=a.Util.fetch(k);if(null===l)throw Error("failed to import '"+k+"' in '"+c+"': file not found");/\.json$/i.test(k)?this["import"](JSON.parse(l+""),k):this["import"](a.DotProto.Parser.parse(l),k)}else c?/\.(\w+)$/.test(c)?this["import"](b.imports[j],c.replace(/^(.+)\.(\w+)$/,function(a,b,c){return b+"_import"+j+"."+c})):this["import"](b.imports[j],c+"_import"+j):this["import"](b.imports[j]);i&&(this.importRoot=null)}b["package"]&&this.define(b["package"]),b.syntax&&d(b);var m=this.ptr;return b.options&&Object.keys(b.options).forEach(function(a){m.options[a]=b.options[a]}),b.messages&&(this.create(b.messages),this.ptr=m),b.enums&&(this.create(b.enums),this.ptr=m),b.services&&(this.create(b.services),this.ptr=m),b["extends"]&&this.create(b["extends"]),this.reset()},f.resolveAll=function(){var d;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof c.Namespace)this.ptr.children.forEach(function(a){this.ptr=a,this.resolveAll()},this);else if(this.ptr instanceof c.Message.Field){if(b.TYPE.test(this.ptr.type))this.ptr.type=a.TYPES[this.ptr.type];else{if(!b.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(d=(this.ptr instanceof c.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0),!d)throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=d,d instanceof c.Enum){if(this.ptr.type=a.TYPES["enum"],"proto3"===this.ptr.syntax&&"proto3"!==d.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(d instanceof c.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=d.isGroup?a.TYPES.group:a.TYPES.message}}if(this.ptr.map){if(!b.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=a.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof a.Reflect.Service.Method){if(!(this.ptr instanceof a.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(d=this.ptr.parent.resolve(this.ptr.requestName,!0),!(d&&d instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=d,d=this.ptr.parent.resolve(this.ptr.responseName,!0),!(d&&d instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=d}else if(!(this.ptr instanceof a.Reflect.Message.OneOf||this.ptr instanceof a.Reflect.Extension||this.ptr instanceof a.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},f.build=function(a){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!a)return this.result;for(var b="string"==typeof a?a.split("."):a,c=this.result,d=0;d<b.length;d++){if(!c[b[d]]){c=null;break}c=c[b[d]]}return c},f.lookup=function(a,b){return a?this.ns.resolve(a,b):this.ns},f.toString=function(){return"Builder"},e.Message=function(){},e.Enum=function(){},e.Service=function(){},e}(c,c.Lang,c.Reflect),c.Map=function(a,b){function c(a){var b=0;return{next:function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}}var d=function(a,c){if(!a.map)throw Error("field is not a map");if(this.field=a,this.keyElem=new b.Element(a.keyType,null,!0,a.syntax),this.valueElem=new b.Element(a.type,a.resolvedType,!1,a.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),c)for(var d=Object.keys(c),e=0;e<d.length;e++){var f=this.keyElem.valueFromString(d[e]),g=this.valueElem.verifyValue(c[d[e]]);this.map[this.keyElem.valueToString(f)]={key:f,value:g}}},e=d.prototype;return e.clear=function(){this.map={}},e["delete"]=function(a){var b=this.keyElem.valueToString(this.keyElem.verifyValue(a)),c=b in this.map;return delete this.map[b],c},e.entries=function(){for(var a,b=[],d=Object.keys(this.map),e=0;e<d.length;e++)b.push([(a=this.map[d[e]]).key,a.value]);return c(b)},e.keys=function(){for(var a=[],b=Object.keys(this.map),d=0;d<b.length;d++)a.push(this.map[b[d]].key);return c(a)},e.values=function(){for(var a=[],b=Object.keys(this.map),d=0;d<b.length;d++)a.push(this.map[b[d]].value);return c(a)},e.forEach=function(a,b){for(var c,d=Object.keys(this.map),e=0;e<d.length;e++)a.call(b,(c=this.map[d[e]]).value,c.key,this)},e.set=function(a,b){var c=this.keyElem.verifyValue(a),d=this.valueElem.verifyValue(b);return this.map[this.keyElem.valueToString(c)]={key:c,value:d},this},e.get=function(a){var b=this.keyElem.valueToString(this.keyElem.verifyValue(a));if(b in this.map)return this.map[b].value},e.has=function(a){var b=this.keyElem.valueToString(this.keyElem.verifyValue(a));return b in this.map},d}(c,c.Reflect),c.newBuilder=function(a){return a=a||{},"undefined"==typeof a.convertFieldsToCamelCase&&(a.convertFieldsToCamelCase=c.convertFieldsToCamelCase),"undefined"==typeof a.populateAccessors&&(a.populateAccessors=c.populateAccessors),new c.Builder(a)},c.loadJson=function(a,b,d){return("string"==typeof b||b&&"string"==typeof b.file&&"string"==typeof b.root)&&(d=b,b=null),b&&"object"==typeof b||(b=c.newBuilder()),"string"==typeof a&&(a=JSON.parse(a)),b["import"](a,d),b.resolveAll(),b},c.loadJsonFile=function(a,b,d){if(b&&"object"==typeof b?(d=b,b=null):b&&"function"==typeof b||(b=null),b)return c.Util.fetch("string"==typeof a?a:a.root+"/"+a.file,function(e){if(null===e)return void b(Error("Failed to fetch file"));try{b(null,c.loadJson(JSON.parse(e),d,a))}catch(f){b(f)}});var e=c.Util.fetch("object"==typeof a?a.root+"/"+a.file:a);return null===e?null:c.loadJson(JSON.parse(e),d,a)},c})}),bf=af&&"object"==typeof af&&"default"in af?af["default"]:af,cf=b(function(a){a.exports=bf.newBuilder({})["import"]({"package":"push_server.messages",options:{objc_class_prefix:"AVIM"},messages:[{name:"JsonObjectMessage",fields:[{rule:"required",type:"string",name:"data",id:1}]},{name:"UnreadTuple",fields:[{rule:"required",type:"string",name:"cid",id:1},{rule:"required",type:"int32",name:"unread",id:2},{rule:"optional",type:"string",name:"mid",id:3},{rule:"optional",type:"int64",name:"timestamp",id:4}]},{name:"LogItem",fields:[{rule:"optional",type:"string",name:"from",id:1},{rule:"optional",type:"string",name:"data",id:2},{rule:"optional",type:"int64",name:"timestamp",id:3},{rule:"optional",type:"string",name:"msgId",id:4},{rule:"optional",type:"int64",name:"ackAt",id:5}]},{name:"LoginCommand",fields:[]},{name:"DataCommand",fields:[{rule:"repeated",type:"string",name:"ids",id:1},{rule:"repeated",type:"JsonObjectMessage",name:"msg",id:2}]},{name:"SessionCommand",fields:[{rule:"optional",type:"int64",name:"t",id:1},{rule:"optional",type:"string",name:"n",id:2},{rule:"optional",type:"string",name:"s",id:3},{rule:"optional",type:"string",name:"ua",id:4},{rule:"optional",type:"bool",name:"r",id:5},{rule:"optional",type:"string",name:"tag",id:6},{rule:"optional",type:"string",name:"deviceId",id:7},{rule:"repeated",type:"string",name:"sessionPeerIds",id:8},{rule:"repeated",type:"string",name:"onlineSessionPeerIds",id:9},{rule:"optional",type:"string",name:"st",id:10},{rule:"optional",type:"int32",name:"stTtl",id:11},{rule:"optional",type:"int32",name:"code",id:12},{rule:"optional",type:"string",name:"reason",id:13},{rule:"optional",type:"string",name:"deviceToken",id:14},{rule:"optional",type:"bool",name:"sp",id:15}]},{name:"ErrorCommand",fields:[{rule:"required",type:"int32",name:"code",id:1},{rule:"required",type:"string",name:"reason",id:2},{rule:"optional",type:"int32",name:"appCode",id:3},{rule:"optional",type:"string",name:"detail",id:4}]},{name:"DirectCommand",fields:[{rule:"optional",type:"string",name:"msg",id:1},{rule:"optional",type:"string",name:"uid",id:2},{rule:"optional",type:"string",name:"fromPeerId",id:3},{rule:"optional",type:"int64",name:"timestamp",id:4},{rule:"optional",type:"bool",name:"offline",id:5},{rule:"optional",type:"bool",name:"hasMore",id:6},{rule:"repeated",type:"string",name:"toPeerIds",id:7},{rule:"optional",type:"bool",name:"r",id:10},{rule:"optional",type:"string",name:"cid",id:11},{rule:"optional",type:"string",name:"id",id:12},{rule:"optional",type:"bool",name:"transient",id:13},{rule:"optional",type:"string",name:"dt",id:14},{rule:"optional",type:"string",name:"roomId",id:15}]},{name:"AckCommand",fields:[{rule:"optional",type:"int32",name:"code",id:1},{rule:"optional",type:"string",name:"reason",id:2},{rule:"optional",type:"string",name:"mid",id:3},{rule:"optional",type:"string",name:"cid",id:4},{rule:"optional",type:"int64",name:"t",id:5},{rule:"optional",type:"string",name:"uid",id:6},{rule:"optional",type:"int64",name:"fromts",id:7},{rule:"optional",type:"int64",name:"tots",id:8},{rule:"optional",type:"string",name:"type",id:9},{rule:"repeated",type:"string",name:"ids",id:10},{rule:"optional",type:"int32",name:"appCode",id:11}]},{name:"UnreadCommand",fields:[{rule:"repeated",type:"UnreadTuple",name:"convs",id:1}]},{name:"ConvCommand",fields:[{rule:"repeated",type:"string",name:"m",id:1},{rule:"optional",type:"bool",name:"transient",id:2},{rule:"optional",type:"bool",name:"unique",id:3},{rule:"optional",type:"string",name:"cid",id:4},{rule:"optional",type:"string",name:"cdate",id:5},{rule:"optional",type:"string",name:"initBy",id:6},{rule:"optional",type:"string",name:"sort",id:7},{rule:"optional",type:"int32",name:"limit",id:8},{rule:"optional",type:"int32",name:"skip",id:9},{rule:"optional",type:"int32",name:"flag",id:10},{rule:"optional",type:"int32",name:"count",id:11},{rule:"optional",type:"string",name:"udate",id:12},{rule:"optional",type:"int64",name:"t",id:13},{rule:"optional",type:"string",name:"n",id:14},{rule:"optional",type:"string",name:"s",id:15},{rule:"optional",type:"JsonObjectMessage",name:"results",id:100},{rule:"optional",type:"JsonObjectMessage",name:"where",id:101},{rule:"optional",type:"JsonObjectMessage",name:"attr",id:103}]},{name:"RoomCommand",fields:[{rule:"optional",type:"string",name:"roomId",id:1},{rule:"optional",type:"string",name:"s",id:2},{rule:"optional",type:"int64",name:"t",id:3},{rule:"optional",type:"string",name:"n",id:4},{rule:"optional",type:"bool",name:"transient",id:5},{rule:"repeated",type:"string",name:"roomPeerIds",id:6},{rule:"optional",type:"string",name:"byPeerId",id:7}]},{name:"LogsCommand",fields:[{rule:"optional",type:"string",name:"cid",id:1},{rule:"optional",type:"int32",name:"l",id:2},{rule:"optional",type:"int32",name:"limit",id:3},{rule:"optional",type:"int64",name:"t",id:4},{rule:"optional",type:"int64",name:"tt",id:5},{rule:"optional",type:"string",name:"tmid",id:6},{rule:"optional",type:"string",name:"mid",id:7},{rule:"optional",type:"string",name:"checksum",id:8},{rule:"optional",type:"bool",name:"stored",id:9},{rule:"repeated",type:"LogItem",name:"logs",id:105}]},{name:"RcpCommand",fields:[{rule:"optional",type:"string",name:"id",id:1},{rule:"optional",type:"string",name:"cid",id:2},{rule:"optional",type:"int64",name:"t",id:3}]},{name:"ReadTuple",fields:[{rule:"required",type:"string",name:"cid",id:1},{rule:"optional",type:"int64",name:"timestamp",id:2},{rule:"optional",type:"string",name:"mid",id:3}]},{name:"ReadCommand",fields:[{rule:"optional",type:"string",name:"cid",id:1},{rule:"repeated",type:"string",name:"cids",id:2},{rule:"repeated",type:"ReadTuple",name:"convs",id:3}]},{name:"PresenceCommand",fields:[{rule:"optional",type:"StatusType",name:"status",id:1},{rule:"repeated",type:"string",name:"sessionPeerIds",id:2}]},{name:"ReportCommand",fields:[{rule:"optional",type:"bool",name:"initiative",id:1},{rule:"optional",type:"string",name:"type",id:2},{rule:"optional",type:"string",name:"data",id:3}]},{name:"GenericCommand",fields:[{rule:"required",type:"CommandType",name:"cmd",id:1},{rule:"optional",type:"OpType",name:"op",id:2},{rule:"optional",type:"string",name:"appId",id:3},{rule:"optional",type:"string",name:"peerId",id:4},{rule:"optional",type:"int32",name:"i",id:5},{rule:"optional",type:"string",name:"installationId",id:6},{rule:"optional",type:"LoginCommand",name:"loginMessage",id:100},{rule:"optional",type:"DataCommand",name:"dataMessage",id:101},{rule:"optional",type:"SessionCommand",name:"sessionMessage",id:102},{rule:"optional",type:"ErrorCommand",name:"errorMessage",id:103},{rule:"optional",type:"DirectCommand",name:"directMessage",id:104},{rule:"optional",type:"AckCommand",name:"ackMessage",id:105},{rule:"optional",type:"UnreadCommand",name:"unreadMessage",id:106},{rule:"optional",type:"ReadCommand",name:"readMessage",id:107},{rule:"optional",type:"RcpCommand",name:"rcpMessage",id:108},{rule:"optional",type:"LogsCommand",name:"logsMessage",id:109},{rule:"optional",type:"ConvCommand",name:"convMessage",id:110},{rule:"optional",type:"RoomCommand",name:"roomMessage",id:111},{rule:"optional",type:"PresenceCommand",name:"presenceMessage",id:112},{rule:"optional",type:"ReportCommand",name:"reportMessage",id:113}]}],enums:[{name:"CommandType",values:[{name:"session",id:0},{name:"conv",id:1},{name:"direct",id:2},{name:"ack",id:3},{name:"rcp",id:4},{name:"unread",id:5},{name:"logs",id:6},{name:"error",id:7},{name:"login",id:8},{name:"data",id:9},{name:"room",id:10},{name:"read",id:11},{name:"presence",id:12},{name:"report",id:13},{name:"echo",id:14}]},{name:"OpType",values:[{name:"open",id:1},{name:"add",id:2},{name:"remove",id:3},{name:"close",id:4},{name:"opened",id:5},{name:"closed",id:6},{name:"query",id:7},{name:"query_result",id:8},{name:"conflict",id:9},{name:"added",id:10},{name:"removed",id:11},{name:"start",id:30},{name:"started",id:31},{name:"joined",id:32},{name:"members_joined",id:33},{name:"left",id:39},{name:"members_left",id:40},{name:"results",id:42},{name:"count",id:43},{name:"result",id:44},{name:"update",id:45},{name:"updated",id:46},{name:"mute",id:47},{name:"unmute",id:48},{name:"join",id:80},{name:"invite",id:81},{name:"leave",id:82},{name:"kick",id:83},{name:"reject",id:84},{name:"invited",id:85},{name:"kicked",id:86},{name:"upload",id:100},{name:"uploaded",id:101}]},{name:"StatusType",values:[{name:"on",id:1},{name:"off",id:2}]}]}).build()}),df=cf&&"object"==typeof cf&&"default"in cf?cf["default"]:cf,ef=df.push_server.messages,ff=ef.JsonObjectMessage,gf=(ef.UnreadTuple,ef.LogItem,ef.LoginCommand,ef.DataCommand,ef.SessionCommand),hf=(ef.ErrorCommand,ef.DirectCommand),jf=ef.AckCommand,kf=(ef.UnreadCommand,ef.ConvCommand),lf=(ef.RoomCommand,ef.LogsCommand),mf=(ef.RcpCommand,ef.ReadTuple,ef.ReadCommand,ef.PresenceCommand,ef.ReportCommand,ef.GenericCommand),nf=ef.CommandType,of=ef.OpType,pf=(ef.StatusType,ye("LC:Connection")),qf=2e4,rf=function(a){function b(){Rb(this,b),pf("initializing Connection");for(var c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];var f=Hc(this,a.call.apply(a,[this].concat(d)));return f._commands={},f._serialId=0,f}return Tc(b,a),b.prototype.send=function(b){var c=this,d=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],e=++this._serialId;b.i=e,pf("↑",Ie(b),"sent");var f=void 0;if(b.toBuffer)f=b.toBuffer();else{if(!b.toArrayBuffer)throw new TypeError(b+" is not a GenericCommand");f=b.toArrayBuffer()}return a.prototype.send.call(this,f),d?new L(function(a,d){c._commands[e]={resolve:a,reject:d},setTimeout(function(){c._commands[e]&&(pf("✗",Ie(b),"timeout"),d(new Error("Command Timeout.")),delete c._commands[e])},qf)}):L.resolve()},b.prototype.handleMessage=function(a){var b=void 0;try{b=mf.decode(a),pf("↓",Ie(b),"received")}catch(c){console.warn("Decode message failed",a)}this.emit("allmessage",b);var d=b.i;d?this._commands[d]?(b.cmd===nf.error?this._commands[d].reject(We(b.errorMessage)):this._commands[d].resolve(b),delete this._commands[d]):console.warn("Unexpected command received with serialId ["+d+"],\n         which have timed out or never been requested."):b.cmd===nf.error?this.emit("error",We(b.errorMessage)):this.emit("message",b);
},b.prototype.ping=function(){return this.send(new mf({cmd:"echo"}))},b}(Re),sf=b(function(a){function b(a,b){function c(){a.Request.apply(this,arguments)}c.prototype=Object.create(a.Request.prototype),c.prototype.end=function(c){var d=a.Request.prototype.end,e=this;return new b(function(a,b){d.call(e,function(d,e){c&&c(d,e),d?(d.response=e,b(d)):a(e)})})},c.prototype.then=function(c,d){var e=a.Request.prototype.end,f=this;return new b(function(a,b){e.call(f,function(c,d){c?(c.response=d,b(c)):a(d)})}).then(c,d)};var d=function(a,b){return new c(a,b)};return d.options=function(a){return d("OPTIONS",a)},d.head=function(a,b){var c=d("HEAD",a);return b&&c.send(b),c},d.get=function(a,b){var c=d("GET",a);return b&&c.query(b),c},d.post=function(a,b){var c=d("POST",a);return b&&c.send(b),c},d.put=function(a,b){var c=d("PUT",a);return b&&c.send(b),c},d.patch=function(a,b){var c=d("PATCH",a);return b&&c.send(b),c},d.del=function(a){return d("DELETE",a)},d}a.exports=b}),tf=sf&&"object"==typeof sf&&"default"in sf?sf["default"]:sf,uf=b(function(a){a.exports=function(a,b,c){for(var d=0,e=a.length,f=3==arguments.length?c:a[d++];e>d;)f=b.call(null,f,a[d],++d,a);return f}}),vf=uf&&"object"==typeof uf&&"default"in uf?uf["default"]:uf,wf=b(function(a){function b(a){return a?c(a):void 0}function c(a){for(var c in b.prototype)a[c]=b.prototype[c];return a}a.exports=b,b.prototype.on=b.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},b.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=b.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},b.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},b.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},b.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),xf=wf&&"object"==typeof wf&&"default"in wf?wf["default"]:wf,yf=b(function(a,b,c){function d(){}function e(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function f(a){return a===Object(a)}function g(a){if(!f(a))return a;var b=[];for(var c in a)null!=a[c]&&h(b,c,a[c]);return b.join("&")}function h(a,b,c){return Array.isArray(c)?c.forEach(function(c){h(a,b,c)}):void a.push(encodeURIComponent(b)+"="+encodeURIComponent(c))}function i(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;g>f;++f)c=e[f],b=c.split("="),d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return d}function j(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;i>h;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=u(c.slice(b+1)),g[d]=e;return g}function k(a){return/[\/+]json\b/.test(a)}function l(a){return a.split(/ *; */).shift()}function m(a){return t(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function n(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=j(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function o(a,b){var c=this;s.call(this),this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new n(c)}catch(d){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=d,a.rawResponse=c.xhr&&c.xhr.responseText?c.xhr.responseText:null,c.callback(a)}if(c.emit("response",b),a)return c.callback(a,b);if(b.status>=200&&b.status<300)return c.callback(a,b);var e=new Error(b.statusText||"Unsuccessful HTTP response");e.original=a,e.response=b,e.status=b.status,c.callback(e,b)})}function p(a,b){return"function"==typeof b?new o("GET",a).end(b):1==arguments.length?new o("GET",a):new o(a,b)}function q(a,b){var c=p("DELETE",a);return b&&c.end(b),c}var r,s=xf,t=vf;r="undefined"!=typeof window?window:"undefined"!=typeof self?self:_,p.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1};var u="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};p.serializeObject=g,p.parseString=i,p.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":g,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":i,"application/json":JSON.parse},n.prototype.get=function(a){return this.header[a.toLowerCase()]},n.prototype.setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=l(b);var c=m(b);for(var d in c)this[d]=c[d]},n.prototype.parseBody=function(a){var b=p.parse[this.type];return b&&a&&(a.length||a instanceof Object)?b(a):null},n.prototype.setStatusProperties=function(a){1223===a&&(a=204);var b=a/100|0;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=4==b||5==b?this.toError():!1,this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},n.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},p.Response=n,s(o.prototype),o.prototype.use=function(a){return a(this),this},o.prototype.timeout=function(a){return this._timeout=a,this},o.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},o.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},o.prototype.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},o.prototype.getHeader=function(a){return this._header[a.toLowerCase()]},o.prototype.type=function(a){return this.set("Content-Type",p.types[a]||a),this},o.prototype.parse=function(a){return this._parser=a,this},o.prototype.accept=function(a){return this.set("Accept",p.types[a]||a),this},o.prototype.auth=function(a,b){var c=btoa(a+":"+b);return this.set("Authorization","Basic "+c),this},o.prototype.query=function(a){return"string"!=typeof a&&(a=g(a)),a&&this._query.push(a),this},o.prototype.field=function(a,b){return this._formData||(this._formData=new r.FormData),this._formData.append(a,b),this},o.prototype.attach=function(a,b,c){return this._formData||(this._formData=new r.FormData),this._formData.append(a,b,c||b.name),this},o.prototype.send=function(a){var b=f(a),c=this.getHeader("Content-Type");if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==c?this._data=this._data?this._data+"&"+a:a:this._data=(this._data||"")+a):this._data=a;return!b||e(a)?this:(c||this.type("json"),this)},o.prototype.callback=function(a,b){var c=this._callback;this.clearTimeout(),c(a,b)},o.prototype.crossDomainError=function(){var a=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},o.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},o.prototype.withCredentials=function(){return this._withCredentials=!0,this},o.prototype.end=function(a){var b=this,c=this.xhr=p.getXHR(),f=this._query.join("&"),g=this._timeout,h=this._formData||this._data;this._callback=a||d,c.onreadystatechange=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=0}if(0==a){if(b.timedout)return b.timeoutError();if(b.aborted)return;return b.crossDomainError()}b.emit("end")}};var i=function(a){a.total>0&&(a.percent=a.loaded/a.total*100),a.direction="download",b.emit("progress",a)};this.hasListeners("progress")&&(c.onprogress=i);try{c.upload&&this.hasListeners("progress")&&(c.upload.onprogress=i)}catch(j){}if(g&&!this._timer&&(this._timer=setTimeout(function(){b.timedout=!0,b.abort()},g)),f&&(f=p.serializeObject(f),this.url+=~this.url.indexOf("?")?"&"+f:"?"+f),c.open(this.method,this.url,!0),this._withCredentials&&(c.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!e(h)){var l=this.getHeader("Content-Type"),m=this._parser||p.serialize[l?l.split(";")[0]:""];!m&&k(l)&&(m=p.serialize["application/json"]),m&&(h=m(h))}for(var n in this.header)null!=this.header[n]&&c.setRequestHeader(n,this.header[n]);return this.emit("request",this),c.send("undefined"!=typeof h?h:null),this},o.prototype.then=function(a,b){return this.end(function(c,d){c?b(c):a(d)})},p.Request=o,p.get=function(a,b,c){var d=p("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},p.head=function(a,b,c){var d=p("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},p.del=q,p["delete"]=q,p.patch=function(a,b,c){var d=p("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},p.post=function(a,b,c){var d=p("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},p.put=function(a,b,c){var d=p("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},a.exports=p}),zf=yf&&"object"==typeof yf&&"default"in yf?yf["default"]:yf,Af=b(function(a,b,c){var d;if(c.crypto&&crypto.getRandomValues){var e=new Uint8Array(16);d=function(){return crypto.getRandomValues(e),e}}if(!d){var f=new Array(16);d=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),f[b]=a>>>((3&b)<<3)&255;return f}}a.exports=d}),Bf=Af&&"object"==typeof Af&&"default"in Af?Af["default"]:Af,Cf=b(function(a){function b(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=h[a])});16>e;)b[d+e++]=0;return b}function c(a,b){var c=b||0,d=g;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function d(a,b,d){var e=b&&d||0,f=b||[];a=a||{};var g=void 0!==a.clockseq?a.clockseq:l,h=void 0!==a.msecs?a.msecs:(new Date).getTime(),i=void 0!==a.nsecs?a.nsecs:n+1,j=h-m+(i-n)/1e4;if(0>j&&void 0===a.clockseq&&(g=g+1&16383),(0>j||h>m)&&void 0===a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=h,n=i,l=g,h+=122192928e5;var o=(1e4*(268435455&h)+i)%4294967296;f[e++]=o>>>24&255,f[e++]=o>>>16&255,f[e++]=o>>>8&255,f[e++]=255&o;var p=h/4294967296*1e4&268435455;f[e++]=p>>>8&255,f[e++]=255&p,f[e++]=p>>>24&15|16,f[e++]=p>>>16&255,f[e++]=g>>>8|128,f[e++]=255&g;for(var q=a.node||k,r=0;6>r;r++)f[e+r]=q[r];return b?b:c(f)}function e(a,b,d){var e=b&&d||0;"string"==typeof a&&(b="binary"==a?new Array(16):null,a=null),a=a||{};var g=a.random||(a.rng||f)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,b)for(var h=0;16>h;h++)b[e+h]=g[h];return b||c(g)}for(var f=Bf,g=[],h={},i=0;256>i;i++)g[i]=(i+256).toString(16).substr(1),h[g[i]]=i;var j=f(),k=[1|j[0],j[1],j[2],j[3],j[4],j[5]],l=16383&(j[6]<<8|j[7]),m=0,n=0,o=e;o.v1=d,o.v4=e,o.parse=b,o.unparse=c,a.exports=o}),Df=Cf&&"object"==typeof Cf&&"default"in Cf?Cf["default"]:Cf,Ef=function(a){function b(c){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e=arguments[2],f=arguments[3];if(Rb(this,b),void 0!==c&&"string"!=typeof c)throw new TypeError("Client id ["+c+"] is not a String");var g=Hc(this,a.call(this));return Pb(g,{id:c,_connection:e,options:d},f),g}return Tc(b,a),b.prototype._dispatchMessage=function(a){this.emit("message",a)},b}(Ke),Ff=b(function(a,b){function c(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var d=ge,e=c(d);b["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),(0,e["default"])(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()}),Gf=Ff&&"object"==typeof Ff&&"default"in Ff?Ff["default"]:Ff,Hf=function(){function a(b){Rb(this,a),Pb(this,{content:b},{id:Df.v4(),cid:null,timestamp:new Date,from:void 0,needReceipt:!1,"transient":!1})}return a.prototype.setNeedReceipt=function(a){return this.needReceipt=a,this},a.prototype.setTransient=function(a){return this["transient"]=a,this},a.prototype.toJSON=function(){return this.content},a.validate=function(){return!0},a.parse=function(a,b){return b||new this(a)},a}(),If=b(function(a){var b=Array.isArray;a.exports=b}),Jf=If&&"object"==typeof If&&"default"in If?If["default"]:If,Kf=b(function(a){function b(a){return"string"==typeof a||!c(a)&&d(a)&&g.call(a)==e}var c=Jf,d=oe,e="[object String]",f=Object.prototype,g=f.toString;a.exports=b}),Lf=Kf&&"object"==typeof Kf&&"default"in Kf?Kf["default"]:Kf,Mf=b(function(a){function b(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}a.exports=b}),Nf=Mf&&"object"==typeof Mf&&"default"in Mf?Mf["default"]:Mf,Of=b(function(a){function b(a){var b=c(a)?g.call(a):"";return b==d||b==e}var c=Nf,d="[object Function]",e="[object GeneratorFunction]",f=Object.prototype,g=f.toString;a.exports=b}),Pf=Of&&"object"==typeof Of&&"default"in Of?Of["default"]:Of,Qf=b(function(a){function b(a){return"number"==typeof a&&a>-1&&a%1==0&&c>=a}var c=9007199254740991;a.exports=b}),Rf=Qf&&"object"==typeof Qf&&"default"in Qf?Qf["default"]:Qf,Sf=b(function(a){function b(a){return function(b){return null==b?void 0:b[a]}}a.exports=b}),Tf=Sf&&"object"==typeof Sf&&"default"in Sf?Sf["default"]:Sf,Uf=b(function(a){var b=Tf,c=b("length");a.exports=c}),Vf=Uf&&"object"==typeof Uf&&"default"in Uf?Uf["default"]:Uf,Wf=b(function(a){function b(a){return null!=a&&e(c(a))&&!d(a)}var c=Vf,d=Pf,e=Rf;a.exports=b}),Xf=Wf&&"object"==typeof Wf&&"default"in Wf?Wf["default"]:Wf,Yf=b(function(a){function b(a){return d(a)&&c(a)}var c=Xf,d=oe;a.exports=b}),Zf=Yf&&"object"==typeof Yf&&"default"in Yf?Yf["default"]:Yf,$f=b(function(a){function b(a){return c(a)&&f.call(a,"callee")&&(!h.call(a,"callee")||g.call(a)==d)}var c=Zf,d="[object Arguments]",e=Object.prototype,f=e.hasOwnProperty,g=e.toString,h=e.propertyIsEnumerable;a.exports=b}),_f=$f&&"object"==typeof $f&&"default"in $f?$f["default"]:$f,ag=b(function(a){function b(a){if(e(a)&&(d(a)||g(a)||f(a.splice)||c(a)))return!a.length;for(var b in a)if(i.call(a,b))return!1;return!0}var c=_f,d=Jf,e=Xf,f=Pf,g=Lf,h=Object.prototype,i=h.hasOwnProperty;a.exports=b}),bg=ag&&"object"==typeof ag&&"default"in ag?ag["default"]:ag,cg=ye("LC:Conversation"),dg=function(a){function b(c,d){Rb(this,b);var e=Hc(this,a.call(this));if(Pb(e,{mutedMembers:[],members:[],_attributes:{},"transient":!1,muted:!1},Ee({attributes:"_attributes",name:"_name"},c)),e.members=Id(new ce(e.members)),!(d instanceof qg))throw new TypeError("Conversation must be initialized with a client");return e._client=d,["kicked","membersjoined","membersleft","message"].forEach(function(a){return e.on(a,function(b){return e._debug(a+" event emitted.",b)})}),e}return Tc(b,a),b.prototype.setAttributes=function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(this._debug("set attributes: value="+ud(a)+", assign="+b),!se(a))throw new TypeError("attributes must be a plain object");return b?this._pendingAttributes=Pb({},this.attributes,a):this._pendingAttributes=a,this},b.prototype.setAttribute=function(a,b){return"undefined"==typeof this._pendingAttributes&&(this._pendingAttributes={}),this._pendingAttributes[a]=b,this},b.prototype.setName=function(a){return this._debug("set name: "+a),this._pendingName=a,this},b.prototype._debug=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];cg.apply(void 0,b.concat(["["+this.id+"]"]))},b.prototype._send=function(a){return null===a.cmd&&(a.cmd="conv"),"conv"===a.cmd&&null===a.convMessage&&(a.convMessage=new kf),a.convMessage&&null===a.convMessage.cid&&(a.convMessage.cid=this.id),this._client._send(a)},b.prototype.save=function(){var a=this;this._debug("save");var b={};if("undefined"!=typeof this._pendingAttributes&&(b.attr=this._pendingAttributes),"undefined"!=typeof this._pendingNamed&&(b.name=this._pendingName),bg(b))return this._debug("nothing touched, resolve with self"),L.resolve(this);this._debug("attr: "+ud(b));var c=new kf({attr:new ff({data:ud(b)})});return this._send(new mf({op:"update",convMessage:c})).then(function(b){return a.updatedAt=b.convMessage.udate,"undefined"!=typeof a._pendingAttributes&&(a._attributes=a._pendingAttributes,delete a._pendingAttributes),"undefined"!=typeof a._pendingNamed&&(a._name=a._pendingName,delete a._pendingName),a})},b.prototype.fetch=function(){var a=this;return this._client.getQuery().equalTo("objectId",this.id).find().then(function(){return a})},b.prototype.mute=function(){var a=this;return this._debug("mute"),this._send(new mf({op:"mute"})).then(function(){return a["transient"]||(a.muted=!0,a.mutedMembers=Fe(a.mutedMembers,[a._client.id])),a})},b.prototype.unmute=function(){var a=this;return this._debug("unmute"),this._send(new mf({op:"unmute"})).then(function(){return a["transient"]||(a.muted=!1,a.mutedMembers=Ge(a.mutedMembers,[a._client.id])),a})},b.prototype.count=function(){return this._debug("unmute"),this._send(new mf({op:"count"})).then(function(a){return a.convMessage.count})},b.prototype.add=function(a){var b=this;this._debug("add",a),"string"==typeof a&&(a=[a]);var c=new kf({m:a});return this._send(new mf({op:"add",convMessage:c})).then(function(){return b["transient"]||(b.members=Fe(b.members,a)),b})},b.prototype.remove=function(a){var b=this;this._debug("remove",a),"string"==typeof a&&(a=[a]);var c=new kf({m:a});return this._send(new mf({op:"remove",convMessage:c})).then(function(){return b["transient"]||(b.members=Ge(b.members,a)),b})},b.prototype.join=function(){return this._debug("join"),this.add(this._client.id)},b.prototype.quit=function(){return this._debug("quit"),this.remove(this._client.id)},b.prototype.send=function(a){var b=this;if(this._debug(a,"send"),!(a instanceof Hf))throw new TypeError(a+" is not a Message");Pb(a,{cid:this.id,from:this._client.id});var c=a.toJSON();return"string"!=typeof c&&(c=ud(c)),this._send(new mf({cmd:"direct",directMessage:new hf({msg:c,cid:this.id,r:a.needReceipt,"transient":a["transient"],dt:a.id})})).then(function(c){var d=c.ackMessage,e=d.uid,f=d.t,g=d.code,h=d.reason,i=d.appCode;if(null!==g)throw We({code:g,reason:h,appCode:i});return Pb(a,{id:e,timestamp:new Date(f.toNumber())}),b.lastMessage=a,b.lastMessageAt=a.timestamp,a})},b.prototype.queryMessages=function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(this._debug("query messages",b),b.beforeMessageId&&!b.beforeTime)throw new Error("query option beforeMessageId must be used with option beforeTime");if(b.afterMessageId&&!b.afterTime)throw new Error("query option afterMessageId must be used with option afterTime");var c=Ee({beforeTime:"t",beforeMessageId:"mid",afterTime:"tt",afterMessageId:"tmid",limit:"l"},b);return c.t instanceof Date&&(c.t=c.t.getTime()),c.tt instanceof Date&&(c.tt=c.tt.getTime()),this._send(new mf({cmd:"logs",logsMessage:new lf(Pb(c,{cid:this.id}))})).then(function(b){return b.logsMessage.logs.map(function(b){var c={id:b.msgId,cid:a.id,timestamp:new Date(b.timestamp.toNumber()),from:b.from},d=a._client._messageParser.parse(b.data);return Pb(d,c),d})})},b.prototype.getMessagesIterator=function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=b.beforeTime,d=b.beforeMessageId,e=b.limit,f=void 0;return{next:function(){return f=void 0===f?a.queryMessages({limit:e,beforeTime:c,beforeMessageId:d}):f.then(function(b){return 0===b.length||b.length<e?[]:a.queryMessages({beforeTime:b[0].timestamp,beforeMessageId:b[0].id,limit:e})}),{value:f,done:!1}}}},Gf(b,[{key:"createdAt",set:function(a){this._createdAt=De(a)},get:function(){return this._createdAt}},{key:"updatedAt",set:function(a){this._updatedAt=De(a)},get:function(){return this._updatedAt}},{key:"lastMessageAt",set:function(a){this._lastMessageAt=De(a)},get:function(){return this._lastMessageAt}},{key:"attributes",get:function(){return"undefined"!=typeof this._pendingAttributes?this._pendingAttributes:this._attributes},set:function(a){this.setAttributes(a)}},{key:"name",get:function(){return"undefined"!=typeof this._pendingName?this._pendingName:this._name},set:function(a){this.setName(a)}}]),b}(Ke),eg=ye("LC:ConversationQuery"),fg=function(){function a(b){Rb(this,a),this._client=b,this._where={},this._extraOptions={}}return a._encode=function(a){return a instanceof Date?{__type:"Date",iso:a.toJSON()}:a instanceof RegExp?a.source:a},a._quote=function(a){return"\\Q"+a.replace("\\E","\\E\\\\E\\Q")+"\\E"},a._calculateFlag=function(a){return["withLastMessages","compact"].reduce(function(b,c){return(b<<1)+Boolean(a[c])},0)},a.prototype._addCondition=function(a,b,c){return this._where[a]||(this._where[a]={}),this._where[a][b]=this.constructor._encode(c),this},a.prototype.toJSON=function(){var a={where:this._where,flag:this.constructor._calculateFlag(this._extraOptions)};return"undefined"!=typeof this._skip&&(a.skip=this._skip),"undefined"!=typeof this._limit&&(a.limit=this._limit),eg(a),a},a.prototype.containsMembers=function(a){return this.containsAll("m",a)},a.prototype.withMembers=function(a,b){var c=new ce(a);return b&&c.add(this._client.id),this.sizeEqualTo("m",c.size),this.containsMembers(Id(c))},a.prototype.equalTo=function(a,b){return this._where[a]=this.constructor._encode(b),this},a.prototype.lessThan=function(a,b){return this._addCondition(a,"$lt",b)},a.prototype.lessThanOrEqualTo=function(a,b){return this._addCondition(a,"$lte",b)},a.prototype.greaterThan=function(a,b){return this._addCondition(a,"$gt",b)},a.prototype.greaterThanOrEqualTo=function(a,b){return this._addCondition(a,"$gte",b)},a.prototype.notEqualTo=function(a,b){return this._addCondition(a,"$ne",b)},a.prototype.containedIn=function(a,b){return this._addCondition(a,"$in",b)},a.prototype.notContainsIn=function(a,b){return this._addCondition(a,"$nin",b)},a.prototype.containsAll=function(a,b){return this._addCondition(a,"$all",b)},a.prototype.contains=function(b,c){return this._addCondition(b,"$regex",a._quote(c))},a.prototype.startsWith=function(b,c){return this._addCondition(b,"$regex","^"+a._quote(c))},a.prototype.endsWith=function(b,c){return this._addCondition(b,"$regex",a._quote(c)+"$")},a.prototype.matches=function(a,b){this._addCondition(a,"$regex",b);var c="";return b.ignoreCase&&(c+="i"),b.multiline&&(c+="m"),c&&c.length&&this._addCondition(a,"$options",c),this},a.prototype.sizeEqualTo=function(a,b){return this._addCondition(a,"$size",b)},a.prototype.limit=function(a){return this._limit=a,this},a.prototype.skip=function(a){return this._skip=a,this},a.prototype.ascending=function(a){return this._order=a,this},a.prototype.addAscending=function(a){return this._order?this._order+=","+a:this._order=a,this},a.prototype.descending=function(a){return this._order="-"+a,this},a.prototype.addDescending=function(a){return this._order?this._order+=",-"+a:this._order="-"+a,a},a.prototype.withLastMessages=function(a){return this._extraOptions.withLastMessages=a,this},a.prototype.compact=function(a){return this._extraOptions.compact=a,this},a.prototype.find=function(){return this._client._executeQuery(this)},a}(),gg=b(function(a){function b(a){if(d(a)){var b=c(a.valueOf)?a.valueOf():a;a=d(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(f,"");var k=h.test(a);return k||i.test(a)?j(a.slice(2),k?2:8):g.test(a)?e:+a}var c=Pf,d=Nf,e=NaN,f=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,i=/^0o[0-7]+$/i,j=parseInt;a.exports=b}),hg=gg&&"object"==typeof gg&&"default"in gg?gg["default"]:gg,ig=b(function(a){var b=Date.now;a.exports=b}),jg=ig&&"object"==typeof ig&&"default"in ig?ig["default"]:ig,kg=b(function(a){function b(a,b,h){function i(){t&&clearTimeout(t),p&&clearTimeout(p),v=0,o=p=s=t=u=void 0}function j(b,c){c&&clearTimeout(c),p=t=u=void 0,b&&(v=d(),q=a.apply(s,o),t||p||(o=s=void 0))}function k(){var a=b-(d()-r);0>=a||a>b?j(u,p):t=setTimeout(k,a)}function l(){return(t&&u||p&&y)&&(q=a.apply(s,o)),i(),q}function m(){j(y,t)}function n(){if(o=arguments,r=d(),s=this,u=y&&(t||!w),x===!1)var c=w&&!t;else{v||p||w||(v=r);var e=x-(r-v),f=(0>=e||e>x)&&(w||p);f?(p&&(p=clearTimeout(p)),v=r,q=a.apply(s,o)):p||(p=setTimeout(m,e))}return f&&t?t=clearTimeout(t):t||b===x||(t=setTimeout(k,b)),c&&(f=!0,q=a.apply(s,o)),!f||t||p||(o=s=void 0),q}var o,p,q,r,s,t,u,v=0,w=!1,x=!1,y=!0;if("function"!=typeof a)throw new TypeError(f);return b=e(b)||0,c(h)&&(w=!!h.leading,x="maxWait"in h&&g(e(h.maxWait)||0,b),y="trailing"in h?!!h.trailing:y),n.cancel=i,n.flush=l,n}var c=Nf,d=jg,e=hg,f="Expected a function",g=Math.max;a.exports=b}),lg=kg&&"object"==typeof kg&&"default"in kg?kg["default"]:kg,mg=b(function(a){function b(a,b,f){var g=!0,h=!0;if("function"!=typeof a)throw new TypeError(e);return d(f)&&(g="leading"in f?!!f.leading:g,h="trailing"in f?!!f.trailing:h),c(a,b,{leading:g,maxWait:b,trailing:h})}var c=lg,d=Nf,e="Expected a function";a.exports=b}),ng=mg&&"object"==typeof mg&&"default"in mg?mg["default"]:mg,og="2.3.5",pg=ye("LC:IMClient"),qg=function(a){function b(){Rb(this,b);for(var c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];var f=Hc(this,a.call.apply(a,[this].concat(d)));if(!f._messageParser)throw new Error("IMClient must be initialized with a MessageParser");return f._conversationCache=new Ce("client:"+f.id),f._ackMessageBuffer={},["invited","kicked","membersjoined","membersleft","message","unhandledmessage"].forEach(function(a){return f.on(a,function(b){return f._debug(a+" event emitted.",b)})}),f}return Tc(b,a),b.prototype._debug=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];pg.apply(void 0,b.concat(["["+this.id+"]"]))},b.prototype._dispatchMessage=function(a){return this._debug(Ie(a),"received"),a.cmd===nf.conv?this._dispatchConvMessage(a):a.cmd===nf.direct?this._dispatchDirectMessage(a):a.cmd===nf.session?this._dispatchSessionMessage(a):(this.emit("unhandledmessage",a),L.resolve())},b.prototype._dispatchSessionMessage=function(a){var b=a.sessionMessage,c=b.code,d=b.reason;switch(a.op){case of.closed:return c===Ve.code&&this.emit("conflict",{code:c,reason:d}),this.emit("close",{code:c,reason:d});default:return this.emit("unhandledmessage",a),L.reject(new Error("Unrecognized session command"))}},b.prototype._dispatchConvMessage=function(a){var b=this,c=a.convMessage,d=a.convMessage,e=d.initBy,f=d.m;switch(a.op){case of.joined:return this.getConversation(c.cid).then(function(a){return b.emit("invited",{conversation:a,invitedBy:e})});case of.left:return this.getConversation(c.cid).then(function(a){a.members=Ge(a.members,[b.id]);var c={kickedBy:e};b.emit("kicked",Pb({conversation:a},c)),a.emit("kicked",c)});case of.members_joined:return this.getConversation(c.cid).then(function(a){a.members=Fe(a.members,c.m);var d={invitedBy:e,members:f};b.emit("membersjoined",Pb({conversation:a},d)),a.emit("membersjoined",d)});case of.members_left:return this.getConversation(c.cid).then(function(a){a.members=Ge(a.members,c.m);var d={kickedBy:e,members:f};b.emit("membersleft",Pb({conversation:a},d)),a.emit("membersleft",d)});default:return this.emit("unhandledmessage",a),L.reject(new Error("Unrecognized conversation command"))}},b.prototype._dispatchDirectMessage=function(a){var b=this,c=a.directMessage,d=a.directMessage,e=d.id,f=d.cid,g=d.fromPeerId,h=d.timestamp,i=d["transient"];return this.getConversation(c.cid).then(function(a){var d={id:e,cid:f,timestamp:new Date(h.toNumber()),from:g,"transient":i},j=b._messageParser.parse(c.msg);Pb(j,d),a.lastMessage=j,a.lastMessageAt=j.timestamp,b.emit("message",{conversation:a,message:j}),a.emit("message",j),i||a["transient"]||b._sendAck(j)})},b.prototype._sendAck=function(a){this._debug("send ack for",a);var b=a.cid;return b?(this._ackMessageBuffer[b]||(this._ackMessageBuffer[b]=[]),this._ackMessageBuffer[b].push(a),this._doSendAckThrottled||(this._doSendAckThrottled=ng(this._doSendAck.bind(this),1e3)),this._doSendAckThrottled()):L.reject(new Error("missing cid"))},b.prototype._doSendAck=function(){var a=this;return this._connection.is("connected")?(pg("do send ack",this._ackMessageBuffer),L.all(me(this._ackMessageBuffer).map(function(b){var c=a._ackMessageBuffer[b],d=c.map(function(a){return a.timestamp}),e=new mf({cmd:"ack",ackMessage:new jf({cid:b,fromts:Math.min.apply(null,d),tots:Math.max.apply(null,d)})});return a._send(e,!1).then(function(){return delete a._ackMessageBuffer[b]})}))):L.resolve()},b.prototype._send=function(a){var b,c=a;this.id&&(c.peerId=this.id);for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;d>f;f++)e[f-1]=arguments[f];return(b=this._connection).send.apply(b,[c].concat(e))},b.prototype._open=function(a,b,c){var d=this,e=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return this._debug("open session"),L.resolve(new mf({cmd:"session",op:"open",appId:a,sessionMessage:new gf({ua:"js/"+og,r:e,tag:b,deviceId:c})})).then(function(a){var b=a;return d.options.signatureFactory?(d._debug("call signatureFactory with ["+d.id+"]"),L.resolve().then(function(){return d.options.signatureFactory(d.id)}).then(Ae(function(a){return d._debug("signatureResult",a)})).then(function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.signature,d=a.timestamp,e=a.nonce;if("string"!=typeof c||"number"!=typeof d||"string"!=typeof e)throw new Error("malformed signature");return Pb(b.sessionMessage,{s:c,t:d,n:e}),b},function(a){throw d._debug(a),new Error("signatureFactory error: "+a.message)})):b}).then(this._send.bind(this)).then(function(a){var b=a.peerId;return b?void(d.id=b):void console.warn("Unexpected session opened without peerId.")})},b.prototype.close=function(){var a=this;this._debug("close session");var b=new mf({cmd:"session",op:"close"});return this._send(b).then(function(){a.emit("close",{code:0})})},b.prototype.ping=function(a){if(this._debug("ping"),!(a instanceof Array))throw new TypeError("clientIds "+a+" is not an Array");var b=new mf({cmd:"session",op:"query",sessionMessage:new gf({sessionPeerIds:a})});return this._send(b).then(function(a){return a.sessionMessage.onlineSessionPeerIds})},b.prototype.getConversation=function(a){if("string"!=typeof a)throw new TypeError(a+" is not a String");var b=this._conversationCache.get(a);return b?L.resolve(b):this.getQuery().equalTo("objectId",a).find().then(function(a){
return a[0]||null})},b.prototype.getQuery=function(){return new fg(this)},b.prototype._executeQuery=function(a){var b=this,c=a.toJSON();c.where=new ff({data:ud(c.where)});var d=new mf({cmd:"conv",op:"query",convMessage:new kf(c)});return this._send(d).then(function(a){try{return JSON.parse(a.convMessage.results.data)}catch(b){var c=ud(Ie(a));throw new Error("Parse query result failed: "+b.message+". Command: "+c)}}).then(function(a){return a.map(b._parseConversationFromRawData.bind(b))}).then(function(a){return a.map(function(a){var c=b._conversationCache.get(a.id);return c?(b._debug("update cached conversation"),["name","creator","createdAt","updatedAt","lastMessageAt","lastMessage","mutedMembers","members","_attributes","transient","muted"].forEach(function(b){var d=a[b];null!==d&&(c[b]=d)}),delete c._pendingAttributes,delete c._pendingName):(c=a,b._debug("no match, set cache"),b._conversationCache.set(a.id,a)),c})})},b.prototype._parseConversationFromRawData=function(a){var b=Ee({objectId:"id",lm:"lastMessageAt",msg:"lastMessage",m:"members",attr:"attributes",tr:"transient",c:"creator",mu:"mutedMembers"},a);return b.lastMessage&&(b.lastMessage=this._messageParser.parse(b.lastMessage)),new dg(b,this)},b.prototype.createConversation=function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c={},d=b.name,e=b.attributes,f=b.members,g=b["transient"],h=b.unique;if(!Array.isArray(f))throw new TypeError("conversation members "+f+" is not an array");if(d){if("string"!=typeof d)throw new TypeError("conversation name "+d+" is not a string");c.name=d}e&&(c.attr=e),c=new ff({data:ud(c)});var i={m:f,attr:c,"transient":g,unique:h},j=new mf({cmd:"conv",op:"start",convMessage:new kf(i)});return this._send(j).then(function(c){return new dg(Pb({},b,{id:c.convMessage.cid,createdAt:c.convMessage.cdate,updatedAt:c.convMessage.cdate,lastMessageAt:null,creator:a.id,members:f.concat([a.id])}),a)}).then(Ae(function(b){return a._conversationCache.set(b.id,b)}))},b}(Ef),rg=b(function(a){var b=Za,c=Ad;a.exports=ba.getIterator=function(a){var d=c(a);if("function"!=typeof d)throw TypeError(a+" is not iterable!");return b(d.call(a))}}),sg=rg&&"object"==typeof rg&&"default"in rg?rg["default"]:rg,tg=b(function(a){a.exports=sg}),ug=tg&&"object"==typeof tg&&"default"in tg?tg["default"]:tg,vg=b(function(a){a.exports={"default":ug,__esModule:!0}}),wg=vg&&"object"==typeof vg&&"default"in vg?vg["default"]:vg,xg=ye("LC:MessageParser"),yg=function(){function a(){Rb(this,a),this._messageClasses=[]}return a.prototype.register=function(a){if(!(a&&a.parse&&a.prototype&&a.prototype.toJSON))throw new TypeError("Invalid messageClass");this._messageClasses.unshift(a)},a.prototype.parse=function(a){xg("parsing message:",a);var b=void 0;try{b=JSON.parse(a)}catch(c){b=a}var d=!0,e=!1,f=void 0;try{for(var g,h=wg(this._messageClasses);!(d=(g=h.next()).done);d=!0){var i=g.value,j=se(b)?Pb({},b):b,k=void 0,l=void 0;try{k=i.validate(j)}catch(c){}if(k){try{l=i.parse(j)}catch(c){console.warn("parsing a valid message content error",{error:c,Klass:i,content:j})}if(void 0!==l)return xg("parse result:",l),l}}}catch(m){e=!0,f=m}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}throw new Error("No Message Class matched")},a}(),zg=function(a){function b(){return Rb(this,b),Hc(this,a.call(this,{}))}return Tc(b,a),b.prototype.setText=function(a){return this.content.text=a,this},b.prototype.getText=function(){return this.content.text},b.prototype.setAttributes=function(a){return this.content.attrs=a,this},b.prototype.getAttributes=function(){return this.content.attrs},b.prototype._getExtras=function(){return{_lctype:0}},b.prototype.toJSON=function(){return Pb({_lctext:this.getText(),_lcattrs:this.getAttributes()},this._getExtras())},b.parse=function(b){var c=arguments.length<=1||void 0===arguments[1]?new this:arguments[1];return c.setText(b._lctext).setAttributes(b._lcattrs),a.parse.call(this,b,c)},Gf(b,[{key:"text",set:function(a){return this.setText(a)},get:function(){return this.getText()}},{key:"attributes",set:function(a){return this.setAttributes(a)},get:function(){return this.getAttributes()}}]),b}(Hf),Ag=function(a){function b(){var c=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(Rb(this,b),"string"!=typeof c)throw new TypeError(c+" is not a string");var d=Hc(this,a.call(this));return d.setText(c),d}return Tc(b,a),b.prototype._getExtras=function(){return{_lctype:-1}},b.validate=function(a){return-1===a._lctype},b.parse=function(){for(var b,c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];return(b=a.parse).call.apply(b,[this].concat(d))},b}(zg),Bg=tf(zf,L),Cg=ye("LC:Realtime"),Dg=function(a){function b(c){Rb(this,b),Cg("initializing Realtime");var d=Hc(this,a.call(this));if("string"!=typeof c.appId)throw new TypeError("appId ["+c.appId+"] is not a string");if("string"!=typeof c.appKey)throw new TypeError("appKey is not a string");return d._options=Pb({appId:void 0,appKey:void 0,region:"cn",pushOfflineMessages:!1,ssl:!0},c),d._id=Df.v4(),d._cache=new Ce("endpoints"),d._clients={},d._messageParser=new yg,[Hf,Ag].forEach(d._messageParser.register.bind(d._messageParser)),d}return Tc(b,a),b.prototype._open=function(){var a=this;if(this._openPromise)return this._openPromise;var b=3;this._options.pushOfflineMessages&&(b=1);var c="lc.protobuf."+b;return this._openPromise=new L(function(b,d){Cg("No connection established, create a new one.");var e=new rf(function(){return a._getEndpoints(a._options)},c);e.binaryType="arraybuffer",e.on("open",function(){return b(e)}),e.on("error",d),e.on("message",a._dispatchMessage.bind(a)),["disconnect","reconnect","retry"].forEach(function(b){return e.on(b,function(c){Cg(b+" event emitted.",c),a.emit(b,c)})}),e.handleClose=function(a){var b=Db([Se,Te,Ue],function(b){return b.code===a.code});if(b){var c=new Error(""+(b.message||a.reason));c.code=a.code,this["throw"](c)}else this.disconnect()}}),this._openPromise},b.prototype._getEndpoints=function(a){var b=this;return L.resolve(this._cache.get("endpoints")||this.constructor._fetchEndpointsInfo(a).then(Ae(function(a){return b._cache.set("endpoints",a,a.ttl)}))).then(function(a){return Cg("endpoint info:",a),[a.server,a.secondary]})},b._fetchEndpointsInfo=function(a){var b=a.appId,c=a.region,d=a.ssl,e=a._debug;Cg("fetch endpoint info");var f=void 0;switch(c){case"cn":f="router-g0-push.leancloud.cn/v1/route";break;case"us":f="router-a0-push.leancloud.cn/v1/route";break;default:throw new Error("Region ["+c+"] is not supported.")}var g=Z.location?"//":"https://";return Bg.get(""+g+f).query({appId:b,secure:d,debug:e,_t:Date.now()}).timeout(2e4).then(function(a){return a.body})},b.prototype._close=function(){this._openPromise&&this._openPromise.then(function(a){return a.close()}),delete this._openPromise},b.prototype._register=function(a){if(!(a instanceof Ef))throw new TypeError(a+" is not a Client");if(!a.id)throw new Error("Client must have an id to be registered");this._clients[a.id]=a},b.prototype._deregister=function(a){if(!(a instanceof Ef))throw new TypeError(a+" is not a Client");if(!a.id)throw new Error("Client must have an id to be deregistered");delete this._clients[a.id],0===nb(this._clients).length&&this._close()},b.prototype._dispatchMessage=function(a){if(null!==a.peerId){var b=this._clients[a.peerId];return b?L.resolve(b._dispatchMessage(a))["catch"](Cg):Cg("[WARN] Unexpected message received without any live client match",Ie(a))}return Cg("[WARN] Unexpected message received without peerId",Ie(a))},b.prototype.createIMClient=function(a,b,c){var d=this;if(a){if(void 0!==this._clients[a])return L.reject(new Error("IMClient["+a+"] is already created"));this._clients[a]=null}return this._open().then(function(e){var f=new qg(a,b,e,{_messageParser:d._messageParser});return e.on("reconnect",function(){return f._open(d._options.appId,c,d._id,!0)}),f.on("close",function(){return d._deregister(f)},d),f._open(d._options.appId,c,d._id).then(function(){return d._register(f),f})})},b.prototype.createPushClient=function(){return this._open()},b.prototype.register=function(){var a;return(a=this._messageParser).register.apply(a,arguments)},b}(Ke);a.Realtime=Dg,a.Message=Hf,a.TypedMessage=zg,a.TextMessage=Ag});
//# sourceMappingURL=bundle.browser.min.js.map